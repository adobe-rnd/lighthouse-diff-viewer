{
  "version": 3,
  "sources": ["../../../utils/src/lodash.js", "../../../utils/src/seed-data/lhr-generator.js", "../../../utils/src/audit-diff-finder.js", "../../../utils/src/markdown.js", "../../../../node_modules/preact/src/constants.js", "../../../../node_modules/preact/src/util.js", "../../../../node_modules/preact/src/options.js", "../../../../node_modules/preact/src/create-element.js", "../../../../node_modules/preact/src/component.js", "../../../../node_modules/preact/src/create-context.js", "../../../../node_modules/preact/src/diff/children.js", "../../../../node_modules/preact/src/diff/props.js", "../../../../node_modules/preact/src/diff/index.js", "../../../../node_modules/preact/src/render.js", "../../../../node_modules/preact/src/clone-element.js", "../../../../node_modules/preact/src/diff/catch-error.js", "../../../../node_modules/preact/hooks/src/index.js", "../../../../node_modules/clsx/dist/clsx.m.js", "../../../server/src/ui/components/loading-spinner.jsx", "../../../server/src/ui/components/paper.jsx", "../../../server/src/ui/components/lhr-viewer-link.jsx", "../../../server/src/ui/components/lhr-viewer-button.jsx", "../../src/ui/components/lhci-components.jsx", "../../src/ui/components/report-upload-box.jsx", "../../src/ui/routes/landing/landing.jsx", "../../../server/src/ui/routes/build-view/lhr-comparison.jsx", "../../../server/src/ui/components/dropdown.jsx", "../../../server/src/ui/hooks/use-previous-value.jsx", "../../../server/src/ui/components/score-icon.jsx", "../../../server/src/ui/components/markdown.jsx", "../../../server/src/ui/components/nbsp.jsx", "../../../server/src/ui/routes/build-view/audit-detail/simple-details.jsx", "../../../server/src/ui/routes/build-view/audit-detail/table-details.jsx", "../../../server/src/ui/routes/build-view/audit-list/numeric-diff.jsx", "../../../server/src/ui/routes/build-view/audit-list/audit-diff.jsx", "../../../server/src/ui/routes/build-view/audit-detail/audit-detail.jsx", "../../../server/src/ui/routes/build-view/audit-detail/audit-detail-pane.jsx", "../../../server/src/ui/components/gauge.jsx", "../../../server/src/ui/components/pwa-gauge.jsx", "../../../server/src/ui/components/score-delta-badge.jsx", "../../../server/src/ui/routes/build-view/lhr-comparison-scores.jsx", "../../../server/src/ui/routes/build-view/audit-list/audit-group.jsx", "../../../server/src/ui/routes/build-view/lhr-comparison-legend.jsx", "../../../../node_modules/preact/compat/src/util.js", "../../../../node_modules/preact/compat/src/PureComponent.js", "../../../../node_modules/preact/compat/src/memo.js", "../../../../node_modules/preact/compat/src/forwardRef.js", "../../../../node_modules/preact/compat/src/Children.js", "../../../../node_modules/preact/compat/src/suspense.js", "../../../../node_modules/preact/compat/src/suspense-list.js", "../../../../node_modules/preact/src/constants.js", "../../../../node_modules/preact/compat/src/portals.js", "../../../../node_modules/preact/compat/src/render.js", "../../../../node_modules/preact/compat/src/index.js", "../../../server/src/ui/components/modal.jsx", "../../../server/src/ui/routes/build-view/lhr-comparison-runtime-diff.jsx", "../../src/ui/routes/comparison/comparison.jsx", "../../src/ui/components/toast.jsx", "../../src/ui/app.jsx", "../../src/ui/entry.jsx"],
  "sourcesContent": ["/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n'use strict';\n\n/**\n * Recursively merges properties of v2 into v1. Mutates o1 in place, does not return a copy.\n *\n * @template T\n * @param {T} v1\n * @param {T} v2\n * @return {T}\n */\nfunction merge(v1, v2) {\n  if (Array.isArray(v1)) {\n    if (!Array.isArray(v2)) return v2;\n\n    for (let i = 0; i < Math.max(v1.length, v2.length); i++) {\n      v1[i] = i < v2.length ? merge(v1[i], v2[i]) : v1[i];\n    }\n\n    return v1;\n  } else if (typeof v1 === 'object' && v1 !== null) {\n    if (typeof v2 !== 'object' || v2 === null) return v2;\n    /** @type {Record<string, *>} */\n    const o1 = v1;\n    /** @type {Record<string, *>} */\n    const o2 = v2;\n\n    const o1Keys = new Set(Object.keys(o1));\n    const o2Keys = new Set(Object.keys(o2));\n    for (const key of new Set([...o1Keys, ...o2Keys])) {\n      o1[key] = key in o2 ? merge(o1[key], o2[key]) : o1[key];\n    }\n\n    return v1;\n  } else {\n    return v2;\n  }\n}\n\n/**\n * Converts a string from camelCase to kebab-case.\n * @param {string} s\n * @param {{alphanumericOnly?: boolean}} [opts]\n */\nfunction kebabCase(s, opts) {\n  let kebabed = s.replace(/([a-z])([A-Z])/g, '$1-$2');\n  if (opts && opts.alphanumericOnly) {\n    kebabed = kebabed\n      .replace(/[^a-z0-9]+/gi, '-')\n      .replace(/-+/g, '-')\n      .replace(/(^-|-$)/g, '');\n  }\n  return kebabed.toLowerCase();\n}\n\n/**\n * @template TKey\n * @template TValue\n * @param {Array<TValue>} items\n * @param {(item: TValue) => TKey} keyFn\n * @return {Map<TKey, Array<TValue>>}\n */\nfunction groupIntoMap(items, keyFn) {\n  /** @type {Map<TKey, Array<TValue>>} */\n  const groups = new Map();\n\n  for (const item of items) {\n    const key = keyFn(item);\n    const group = groups.get(key) || [];\n    group.push(item);\n    groups.set(key, group);\n  }\n\n  return groups;\n}\n\n/**\n * @template {any[]} T\n * @param {(...args: T) => void} fn\n * @param {number} time\n * @return {{(...args: T): void; cancel: () => void;}}\n */\nfunction debounce(fn, time) {\n  /** @type {NodeJS.Timeout|undefined} */\n  let timeout;\n  const cancel = () => {\n    if (timeout) clearTimeout(timeout);\n    timeout = undefined;\n  };\n\n  /** @param {T} args */\n  const debouncedFn = (...args) => {\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => fn(...args), time);\n  };\n\n  debouncedFn.cancel = cancel;\n  return debouncedFn;\n}\n\nmodule.exports = {\n  merge,\n  kebabCase,\n  debounce,\n  /**\n   * Generates an array of numbers from `from` (inclusive) to `to` (exclusive)\n   * @param {number} from\n   * @param {number} to\n   * @param {number} [by]\n   * @return {Array<number>}\n   */\n  range(from, to, by = 1) {\n    /** @type {Array<number>} */\n    const numbers = [];\n    for (let i = from; i < to; i += by) {\n      numbers.push(i);\n    }\n    return numbers;\n  },\n  /**\n   * Converts a string from kebab-case or camelCase to Start Case.\n   * @param {string} s\n   */\n  startCase(s) {\n    return kebabCase(s)\n      .split('-')\n      .map(word => `${word.slice(0, 1).toUpperCase()}${word.slice(1)}`)\n      .join(' ');\n  },\n  /**\n   * @param {string} s\n   * @param {number} length\n   * @param {string} [padding]\n   */\n  padStart(s, length, padding = ' ') {\n    if (s.length >= length) return s;\n    return `${padding.repeat(length)}${s}`.slice(-length);\n  },\n  /**\n   * @param {string} s\n   * @param {number} length\n   * @param {string} [padding]\n   */\n  padEnd(s, length, padding = ' ') {\n    if (s.length >= length) return s;\n    return `${s}${padding.repeat(length)}`.slice(0, length);\n  },\n  /**\n   * @param {any} o1\n   * @param {any} o2\n   * @param {number} [depth]\n   * @return {boolean}\n   */\n  isEqual(o1, o2, depth = 0) {\n    // Protect against infinite loops.\n    if (depth > 100) return false;\n\n    // If they don't share the same type they're not equal.\n    if (typeof o1 !== typeof o2) return false;\n    // If they're not objects, use referential equality with NaN handling.\n    if (Number.isNaN(o1) && Number.isNaN(o2)) return true;\n    if (typeof o1 !== 'object') return o1 === o2;\n    // Try quick referential equality before perfoming deep comparisons.\n    if (o1 === o2) return true;\n    // Check for null.\n    if (!o1 || !o2) return false;\n    // At this point we know they're both truthy objects.\n    // Perform deep inspection on the object's properties.\n\n    if (Array.isArray(o1)) {\n      if (!Array.isArray(o2)) return false;\n      return o1.every((v, i) => this.isEqual(v, o2[i])) && o1.length === o2.length;\n    }\n\n    const o1Keys = Object.keys(o1).sort();\n    const o2Keys = Object.keys(o2).sort();\n    const allChildrenEqual = o1Keys.every(k => this.isEqual(o1[k], o2[k], depth + 1));\n    return allChildrenEqual && this.isEqual(o1Keys, o2Keys);\n  },\n  /**\n   * Deep clones an object via JSON.parse/JSON.stringify.\n   * @template T\n   * @param {T} o\n   * @return {T}\n   */\n  cloneDeep(o) {\n    return JSON.parse(JSON.stringify(o));\n  },\n  /**\n   * Filters items by referential uniqueness of the value returned by keyFn.\n   * Unique items are guaranteed to be in the same order of the original array.\n   *\n   * @template TArr\n   * @template TKey\n   * @param {Array<TArr>} items\n   * @param {(item: TArr) => TKey} keyFn\n   * @return {Array<TArr>}\n   */\n  uniqBy(items, keyFn) {\n    /** @type {Set<TKey>} */\n    const seen = new Set();\n    /** @type {Array<TArr>} */\n    const out = [];\n\n    for (const item of items) {\n      const key = keyFn(item);\n      if (seen.has(key)) continue;\n      seen.add(key);\n      out.push(item);\n    }\n\n    return out;\n  },\n  /**\n   * @template T\n   * @param {Array<T>} items\n   * @param {(item: T) => any} keyFn\n   * @return {Array<Array<T>>}\n   */\n  groupBy(items, keyFn) {\n    return [...groupIntoMap(items, keyFn).values()];\n  },\n  groupIntoMap,\n  /**\n   * @template TArr\n   * @param {Array<TArr>} items\n   * @param {(o: TArr) => number} keyFn\n   */\n  maxBy(items, keyFn) {\n    let maxItem = undefined;\n    let maxValue = -Infinity;\n    for (const item of items) {\n      const value = keyFn(item);\n      if (value > maxValue) {\n        maxItem = item;\n        maxValue = value;\n      }\n    }\n\n    return maxItem;\n  },\n  /**\n   * @template TArr\n   * @param {Array<TArr>} items\n   * @param {(o: TArr) => number} keyFn\n   */\n  minBy(items, keyFn) {\n    return this.maxBy(items, o => -keyFn(o));\n  },\n  /**\n   * @template TArr\n   * @param {Array<TArr>} items\n   * @param {(o: TArr) => number} keyFn\n   */\n  sortBy(items, keyFn) {\n    return items.slice().sort((a, b) => keyFn(a) - keyFn(b));\n  },\n  /**\n   * @template {Object} T\n   * @param {T} object\n   * @param {Array<keyof T>} propertiesToPick\n   * @return {Partial<T>}\n   */\n  pick(object, propertiesToPick) {\n    /** @type {Partial<T>} */\n    const out = {};\n    for (const [key_, value] of Object.entries(object)) {\n      const key = /** @type {keyof T} */ (key_);\n      if (!propertiesToPick.includes(key)) continue;\n      out[key] = value;\n    }\n\n    return out;\n  },\n  /**\n   * @template {Object} T\n   * @param {T} object\n   * @param {Array<keyof T>} propertiesToDrop\n   * @param {{dropUndefined?: boolean}} [options]\n   * @return {Partial<T>}\n   */\n  omit(object, propertiesToDrop, options = {}) {\n    /** @type {Partial<T>} */\n    const out = {};\n    for (const [key_, value] of Object.entries(object)) {\n      const key = /** @type {keyof T} */ (key_);\n      if (propertiesToDrop.includes(key)) continue;\n      if (options.dropUndefined && value === undefined) continue;\n      out[key] = value;\n    }\n\n    return out;\n  },\n  /** @param {string} uuid */\n  shortId(uuid) {\n    return uuid.replace(/-/g, '').slice(0, 12);\n  },\n  /** @param {string} string @param {number} number @param {string} [pluralForm] */\n  pluralize(string, number, pluralForm) {\n    pluralForm = pluralForm || `${string}s`;\n    return number === 1 ? string : pluralForm;\n  },\n  uniqueId: (() => {\n    let id = 1;\n    return () => id++;\n  })(),\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n'use strict';\n\nconst _ = require('../lodash.js');\n\n/** @typedef {import('./prandom.js')} PRandom */\n\nconst LOREM_IPSUM =\n  // eslint-disable-next-line max-len\n  'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin urna nunc, molestie sed hendrerit et, vulputate vitae mauris. Sed tempor vitae risus vel hendrerit. Nulla vestibulum malesuada erat vitae laoreet. Phasellus sodales vehicula dolor, dictum ullamcorper metus aliquam id. Nullam porttitor posuere purus id rhoncus. Sed et mi ligula. Donec imperdiet nulla sit amet justo cursus, id tempus ex accumsan. Maecenas ultricies elit eget lectus posuere vestibulum. Cras vestibulum neque nec justo congue feugiat non id dui. Pellentesque dapibus ac orci sed malesuada. Sed rhoncus vitae lorem eget facilisis. Donec auctor tortor a tortor egestas, vel condimentum lacus auctor.';\n\n/** @typedef {{url?: string, inclusionRate?: number, averageWastedMs?: number, averageTotalBytes?: number, averageWastedBytes?: number}} ItemGenDef */\n/** @typedef {{auditId: string, passRate?: number, averageNumericValue?: number, averageWastedMs?: number, items?: ItemGenDef[], unit?: string}} AuditGenDef */\n\n/** @param {string} auditId */\nfunction getCategoryForAuditId(auditId) {\n  if (auditId.startsWith('a11y')) return 'accessibility';\n  if (auditId.startsWith('seo')) return 'seo';\n  if (auditId.startsWith('best-practices')) return 'best-practices';\n  if (auditId.startsWith('pwa')) return 'pwa';\n  return 'performance';\n}\n\n/** @param {string} auditId */\nfunction getGroupForAuditId(auditId) {\n  if (auditId === 'cumulative-layout-shift') return 'metrics';\n  if (auditId === 'first-contentful-paint') return 'metrics';\n  if (auditId === 'first-meaningful-paint') return 'metrics';\n  if (auditId === 'speed-index') return 'metrics';\n  if (auditId === 'interactive') return 'metrics';\n  if (auditId === 'first-cpu-idle') return 'metrics';\n  if (auditId === 'max-potential-fid') return 'metrics';\n  if (auditId.startsWith('diagnostic-')) return 'diagnostics';\n  if (auditId.startsWith('uses-')) return 'load-opportunities';\n  if (auditId.startsWith('a11y-aria')) return 'a11y-aria';\n  if (auditId.startsWith('a11y')) return 'a11y-best-practices';\n  if (auditId.startsWith('seo')) return 'seo-content';\n  if (auditId.startsWith('best-practices')) return 'best-practices';\n  if (auditId.startsWith('pwa-fast-reliable')) return 'pwa-fast-reliable';\n  if (auditId.startsWith('pwa-installable')) return 'pwa-installable';\n  if (auditId.startsWith('pwa-optimized')) return 'pwa-optimized';\n}\n\n/** @param {number} average @param {PRandom} prandom */\nfunction generateNumericValue(average, prandom) {\n  const maxDeltaAsPercent = 0.1;\n  const maxDelta = average * maxDeltaAsPercent;\n  const percentile = prandom.next();\n  return (percentile - 0.5) * 2 * maxDelta + average;\n}\n\n/**\n *\n * @param {string} pageUrl\n * @param {Array<AuditGenDef>} auditDefs\n * @param {PRandom} prandom\n * @return {LH.Result}\n */\nfunction createLHR(pageUrl, auditDefs, prandom) {\n  /** @type {LH.Result['audits']} */\n  const audits = {};\n\n  const loremIpsumTokens = LOREM_IPSUM.split(' ');\n  for (const auditDef of auditDefs) {\n    const {auditId, averageNumericValue, averageWastedMs, unit = 'items'} = auditDef;\n    const groupId = getGroupForAuditId(auditId);\n    if (typeof averageNumericValue === 'number') {\n      const numericValue = generateNumericValue(averageNumericValue, prandom);\n      // score of 100 = <1000\n      // score of 0 = >10000\n      const score = 1 - Math.min(1, Math.max((numericValue - 1000) / 9000, 0));\n      audits[auditId] = {\n        score,\n        numericValue,\n        scoreDisplayMode: 'numeric',\n        displayValue:\n          groupId === 'metrics'\n            ? `${(numericValue / 1000).toLocaleString(undefined, {maximumFractionDigits: 1})} s`\n            : `${Math.round(numericValue)} ${unit}`,\n      };\n    } else if (typeof averageWastedMs === 'number') {\n      const wastedMs = generateNumericValue(averageWastedMs, prandom);\n      // score of 100 = <100\n      // score of 0 = >1000\n      const score = 1 - Math.min(1, Math.max((wastedMs - 100) / 900, 0));\n      const hasBytes = auditDef.items && auditDef.items.some(item => item.averageWastedBytes);\n      const wastedBytes = wastedMs * 257;\n      audits[auditId] = {\n        score,\n        scoreDisplayMode: 'numeric',\n        displayValue: hasBytes\n          ? `${(wastedBytes / 1024).toLocaleString(undefined, {\n              maximumFractionDigits: 0,\n            })} KB`\n          : `${(wastedMs / 1000).toLocaleString(undefined, {\n              maximumFractionDigits: 1,\n            })} s`,\n        details: {\n          type: 'opportunity',\n          overallSavingsMs: wastedMs,\n          overallSavingsBytes: hasBytes ? wastedBytes : undefined,\n          items: [],\n        },\n      };\n    } else {\n      const {passRate = 1} = auditDef;\n      audits[auditId] = {score: prandom.next() <= passRate ? 1 : 0, scoreDisplayMode: 'binary'};\n    }\n\n    /** @type {Record<string, any>} */\n    const headersAsObject = {};\n    if (auditDef.items) {\n      const items = [];\n      for (const {url, inclusionRate = 1, ...rest} of auditDef.items) {\n        if (prandom.next() > inclusionRate) continue;\n        /** @type {any} */\n        const item = {};\n        if (url) {\n          if (url.includes('lorempixel')) {\n            headersAsObject.thumbnail = {key: 'url', valueType: 'thumbnail'};\n          }\n\n          headersAsObject.url = {key: 'url', valueType: 'url', label: 'URL'};\n          item.url = new URL(url, pageUrl).href;\n        }\n\n        for (const key of Object.keys(rest)) {\n          if (key.startsWith('average')) {\n            const dataKey = key.replace('average', '').replace(/^\\w/, v => v.toLowerCase());\n            const valueType = key.endsWith('Ms') ? 'timespanMs' : 'bytes';\n            headersAsObject[dataKey] = {key: dataKey, valueType, label: _.startCase(dataKey)};\n            // @ts-ignore - tsc can't understand Object.keys\n            const averageValue = rest[key];\n            item[dataKey] = generateNumericValue(averageValue, prandom);\n          } else {\n            headersAsObject[key] = {key, valueType: 'text', label: _.startCase(key)};\n            // @ts-ignore - tsc can't understand Object.keys\n            item[key] = rest[key];\n          }\n        }\n\n        items.push(item);\n      }\n\n      const details = audits[auditId].details || {type: 'table'};\n      details.headings = Object.values(headersAsObject).map(header => {\n        // Do the inverse of _getCanonicalizedTableHeadings\n        if (getGroupForAuditId(auditId) === 'load-opportunities') return header;\n        return {...header, itemType: header.valueType, text: header.label, valueType: undefined};\n      });\n      details.items = items;\n      audits[auditId].details = details;\n    }\n\n    audits[auditId].title = _.startCase(auditId);\n    audits[auditId].description = `Help text for ${_.startCase(auditId)}. ${loremIpsumTokens\n      .slice(0, Math.round(auditId.length * 1.5))\n      .join(' ')}.`;\n  }\n\n  /** @type {LH.Result['categories']} */\n  const categories = {};\n\n  const auditsGroupedByCategory = _.groupBy(Object.entries(audits), pair =>\n    getCategoryForAuditId(pair[0])\n  );\n  for (const audits of auditsGroupedByCategory) {\n    const category = getCategoryForAuditId(audits[0][0]);\n    const sum = audits.reduce((sum, next) => sum + (next[1].score || 0), 0);\n    categories[category] = {\n      id: category,\n      title: category.toUpperCase(),\n      score: sum / audits.length,\n      auditRefs: audits.map(([id]) => ({id, weight: 1, group: getGroupForAuditId(id)})),\n    };\n  }\n\n  const fetchTimeBase = new Date('2019-08-01T12:00:00').getTime();\n  const fetchTimeOffset = Math.round(prandom.next() * 1000 * 60 * 60 * 24 * 7);\n  const fetchTime = new Date(fetchTimeBase + fetchTimeOffset).toISOString();\n\n  return {\n    requestedUrl: pageUrl,\n    finalUrl: pageUrl,\n    categories,\n    audits,\n\n    fetchTime,\n    lighthouseVersion: '5.2.0',\n    configSettings: {channel: 'cli'},\n    categoryGroups: {\n      metrics: {title: 'Metrics'},\n      'load-opportunities': {title: 'Opportunities'},\n      diagnostics: {title: 'Diagnostics'},\n      accessibility: {title: 'Accessibility'},\n      seo: {title: 'SEO'},\n      'best-practices': {title: 'Best Practices'},\n      'pwa-fast-reliable': {title: 'PWA Fast & Reliable'},\n      'pwa-installable': {title: 'PWA Installable'},\n      'pwa-optimized': {title: 'PWA Optimized'},\n    },\n    runWarnings: [],\n    userAgent: 'Chrome!',\n    environment: {hostUserAgent: '', networkUserAgent: '', benchmarkIndex: 500},\n    timing: {total: 1, entries: []},\n    i18n: {rendererFormattedStrings: {}, icuMessagePaths: {}},\n  };\n}\n\nmodule.exports = {createLHR, generateNumericValue, getGroupForAuditId};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n'use strict';\n\nconst _ = require('./lodash.js');\nconst {getGroupForAuditId} = require('./seed-data/lhr-generator.js');\n\n/** @typedef {'improvement'|'neutral'|'regression'} DiffLabel */\n/** @typedef {'better'|'worse'|'added'|'removed'|'ambiguous'|'no change'} RowLabel */\n/** @typedef {{item: Record<string, any>, kind?: string, index: number}} DetailItemEntry */\n\n// Hardcoded audit ids that arent worth diffing and generally regress the UX when done.\nconst auditsToNotDIff = ['main-thread-tasks', 'screenshot-thumbnails', 'metrics'];\n\n/**\n * @param {number} delta\n * @param {'audit'|'score'} deltaType\n * @return {DiffLabel}\n */\nfunction getDeltaLabel(delta, deltaType = 'audit') {\n  if (delta === 0) return 'neutral';\n  let isImprovement = delta < 0;\n  if (deltaType === 'score') isImprovement = delta > 0;\n  return isImprovement ? 'improvement' : 'regression';\n}\n\n/**\n * @param {LHCI.AuditDiff} diff\n * @return {DiffLabel}\n */\nfunction getDiffLabel(diff) {\n  switch (diff.type) {\n    case 'error':\n      return 'regression';\n    case 'score':\n      return getDeltaLabel(getDeltaStats(diff).delta, 'score');\n    case 'numericValue':\n    case 'itemCount':\n    case 'itemDelta':\n      return getDeltaLabel(getDeltaStats(diff).delta, 'audit');\n    case 'itemAddition':\n      return 'regression';\n    case 'itemRemoval':\n      return 'improvement';\n    default:\n      return 'neutral';\n  }\n}\n\n/**\n * Given the array of diffs for a particular row, determine its label.\n *\n * @param {Array<LHCI.AuditDiff>} diffs\n * @return {RowLabel}\n */\nfunction getRowLabel(diffs) {\n  if (!diffs.length) return 'no change';\n\n  if (diffs.some(diff => diff.type === 'itemAddition')) return 'added';\n  if (diffs.some(diff => diff.type === 'itemRemoval')) return 'removed';\n\n  const itemDeltaDiffs = diffs.filter(\n    /** @return {diff is LHCI.NumericItemAuditDiff} */ diff => diff.type === 'itemDelta'\n  );\n\n  // All the diffs were worse, it's \"worse\".\n  if (itemDeltaDiffs.every(diff => diff.compareValue > diff.baseValue)) return 'worse';\n  // All the diffs were better, it's \"better\".\n  if (itemDeltaDiffs.every(diff => diff.compareValue < diff.baseValue)) return 'better';\n  // The item had diffs but some were better and some were worse, so we can't decide.\n  if (itemDeltaDiffs.length) return 'ambiguous';\n\n  return 'no change';\n}\n\n/**\n * @param {Array<LHCI.AuditDiff>} diffs\n * @param {number|undefined} compareItemIndex\n * @param {number|undefined} baseItemIndex\n * @return {Array<LHCI.AuditDiff>}\n */\nfunction getMatchingDiffsForIndex(diffs, compareItemIndex, baseItemIndex) {\n  return diffs.filter(diff => {\n    const compareIndex = 'compareItemIndex' in diff ? diff.compareItemIndex : undefined;\n    const baseIndex = 'baseItemIndex' in diff ? diff.baseItemIndex : undefined;\n    if (typeof compareIndex === 'number') return compareIndex === compareItemIndex;\n    if (typeof baseIndex === 'number') return baseIndex === baseItemIndex;\n    return false;\n  });\n}\n\n/**\n * Given the array of all diffs for an audit, determine the label for a row with particular item index.\n *\n * @param {Array<LHCI.AuditDiff>} diffs\n * @param {number|undefined} compareItemIndex\n * @param {number|undefined} baseItemIndex\n * @return {RowLabel}\n */\nfunction getRowLabelForIndex(diffs, compareItemIndex, baseItemIndex) {\n  return getRowLabel(getMatchingDiffsForIndex(diffs, compareItemIndex, baseItemIndex));\n}\n\n/**\n * Given the array of all diffs for an audit, determine the worst numeric delta for a particular row.\n * Used for sorting.\n *\n * @param {Array<LHCI.AuditDiff>} diffs\n * @param {number|undefined} compareItemIndex\n * @param {number|undefined} baseItemIndex\n * @return {number|undefined}\n */\nfunction getWorstNumericDeltaForIndex(diffs, compareItemIndex, baseItemIndex) {\n  const matchingDiffs = getMatchingDiffsForIndex(diffs, compareItemIndex, baseItemIndex);\n  const numericDiffs = matchingDiffs.filter(isNumericAuditDiff);\n  if (!numericDiffs.length) return undefined;\n  return Math.max(...numericDiffs.map(diff => getDeltaStats(diff).delta));\n}\n\n/** @param {Array<DiffLabel>} labels @return {DiffLabel} */\nfunction getMostSevereDiffLabel(labels) {\n  if (labels.some(l => l === 'regression')) return 'regression';\n  if (labels.some(l => l === 'neutral')) return 'neutral';\n  return 'improvement';\n}\n\n/**\n * @param {LHCI.AuditDiff} diff\n * @return {diff is LHCI.NumericAuditDiff|LHCI.NumericItemAuditDiff} */\nfunction isNumericAuditDiff(diff) {\n  return ['score', 'numericValue', 'itemCount', 'itemDelta'].includes(diff.type);\n}\n\n/** @param {number|null|undefined} score */\nfunction getScoreLevel(score) {\n  if (typeof score !== 'number') return 'error';\n  if (score >= 0.9) return 'pass';\n  if (score >= 0.5) return 'average';\n  return 'fail';\n}\n\n/** @param {number|null|undefined} value @param {[number, number]} cutoffs */\nfunction getMetricScoreLevel(value, cutoffs) {\n  if (typeof value !== 'number') return 'error';\n  if (value <= cutoffs[0]) return 'pass';\n  if (value <= cutoffs[1]) return 'average';\n  return 'fail';\n}\n\n/** @param {LHCI.AuditDiff} diff */\nfunction getDiffSeverity(diff) {\n  const delta = isNumericAuditDiff(diff) ? getDeltaStats(diff).absoluteDelta : 0;\n  if (diff.type === 'error') return 1e12;\n  if (diff.type === 'score') return 1e10 * delta;\n  if (diff.type === 'numericValue') return 1e8 * Math.max(delta / 1000, 1);\n  if (diff.type === 'itemCount') return 1e6 * delta;\n  if (diff.type === 'itemAddition') return 1e5;\n  if (diff.type === 'itemRemoval') return 1e5;\n  if (diff.type === 'itemDelta') return Math.min(Math.max(delta / 100, 1), 1e5 - 1);\n  return 0;\n}\n\n/**\n * @param {LHCI.NumericAuditDiff | LHCI.NumericItemAuditDiff} diff\n */\nfunction getDeltaStats(diff) {\n  const {baseValue, compareValue} = diff;\n  const delta = compareValue - baseValue;\n  const absoluteDelta = Math.abs(delta);\n  // Handle the 0 case to avoid messy NaN handling.\n  if (delta === 0) return {delta, absoluteDelta, percentDelta: 0, percentAbsoluteDelta: 0};\n\n  // Percent delta is `delta / baseValue` unless `baseValue == 0`.\n  // Then `percentDelta` is 100% by arbitrary convention (instead of Infinity/NaN).\n  const percentDelta = baseValue ? delta / baseValue : 1;\n  const percentAbsoluteDelta = Math.abs(percentDelta);\n\n  return {\n    delta,\n    absoluteDelta,\n    percentDelta,\n    percentAbsoluteDelta,\n  };\n}\n\n/**\n * @param {{auditId: string, type: LHCI.AuditDiffType, baseValue?: number|null, compareValue?: number|null, itemKey?: string, baseItemIndex?: number, compareItemIndex?: number}} diff\n * @return {LHCI.AuditDiff}\n */\nfunction createAuditDiff(diff) {\n  const {auditId, type, baseValue, compareValue, baseItemIndex, compareItemIndex, itemKey} = diff;\n  if (type === 'itemAddition') {\n    if (typeof compareItemIndex !== 'number') throw new Error('compareItemIndex is not set');\n    return {auditId, type, compareItemIndex};\n  }\n\n  if (type === 'itemRemoval') {\n    if (typeof baseItemIndex !== 'number') throw new Error('baseItemIndex is not set');\n    return {auditId, type, baseItemIndex};\n  }\n\n  if (type === 'displayValue') {\n    throw new Error('Do not use createAuditDiff for displayValue, just manually create');\n  }\n\n  if (\n    typeof compareValue !== 'number' ||\n    typeof baseValue !== 'number' ||\n    !Number.isFinite(baseValue) ||\n    !Number.isFinite(compareValue) ||\n    type === 'error'\n  ) {\n    return {\n      auditId,\n      type: 'error',\n      attemptedType: type,\n      baseValue: baseValue || NaN,\n      compareValue: compareValue || NaN,\n    };\n  }\n\n  /** @type {LHCI.NumericAuditDiff} */\n  const numericDiffResult = {\n    auditId,\n    type: 'score',\n    baseValue,\n    compareValue,\n  };\n\n  if (type === 'itemDelta') {\n    if (typeof itemKey !== 'string') throw new Error('itemKey is not set');\n    if (typeof baseItemIndex !== 'number' && typeof compareItemIndex !== 'number') {\n      throw new Error('Either baseItemIndex or compareItemIndex must be set');\n    }\n\n    return {\n      ...numericDiffResult,\n      type: 'itemDelta',\n      baseItemIndex,\n      compareItemIndex,\n      itemKey,\n    };\n  }\n\n  return {...numericDiffResult, type};\n}\n\n/**\n *\n * @param {string} auditId\n * @param {DetailItemEntry} baseEntry\n * @param {DetailItemEntry} compareEntry\n * @param {Array<{key: string | null}>} headings\n * @return {Array<LHCI.AuditDiff>}\n */\nfunction findAuditDetailItemKeyDiffs(auditId, baseEntry, compareEntry, headings) {\n  /** @type {Array<LHCI.AuditDiff>} */\n  const diffs = [];\n\n  for (const key of Object.keys(baseEntry.item)) {\n    const baseValue = baseEntry.item[key];\n    const compareValue = compareEntry.item[key];\n    // If these aren't numeric, comparable values, skip the key.\n    if (typeof baseValue !== 'number' || typeof compareValue !== 'number') continue;\n    // If these aren't shown in the table, skip the key.\n    if (!headings.some(heading => heading.key === key)) continue;\n\n    diffs.push(\n      createAuditDiff({\n        auditId,\n        type: 'itemDelta',\n        itemKey: key,\n        baseItemIndex: baseEntry.index,\n        compareItemIndex: compareEntry.index,\n        baseValue,\n        compareValue,\n      })\n    );\n  }\n\n  return diffs;\n}\n\n/**\n * This function creates NumericItemAuditDiffs from itemAddition/itemRemoved diffs. Normally, these\n * are superfluous data, but in some instances (table details views for example), it's desirable to\n * understand the diff state of each individual itemKey. The missing values are assumed to be 0\n * for the purposes of the diff.\n *\n * @param {Array<LHCI.AuditDiff>} diffs\n * @param {Array<Record<string, any>>} baseItems\n * @param {Array<Record<string, any>>} compareItems\n * @return {Array<LHCI.AuditDiff>}\n */\nfunction synthesizeItemKeyDiffs(diffs, baseItems, compareItems) {\n  /** @type {Array<LHCI.AuditDiff>} */\n  const itemKeyDiffs = [];\n\n  for (const diff of diffs) {\n    if (diff.type !== 'itemAddition' && diff.type !== 'itemRemoval') continue;\n\n    const item =\n      diff.type === 'itemAddition'\n        ? compareItems[diff.compareItemIndex]\n        : baseItems[diff.baseItemIndex];\n\n    for (const key of Object.keys(item)) {\n      const baseValue = diff.type === 'itemAddition' ? 0 : item[key];\n      const compareValue = diff.type === 'itemAddition' ? item[key] : 0;\n      if (typeof compareValue !== 'number' || typeof baseValue !== 'number') continue;\n\n      const itemIndexKeyName = diff.type === 'itemAddition' ? 'compareItemIndex' : 'baseItemIndex';\n      const itemIndexValue =\n        diff.type === 'itemAddition' ? diff.compareItemIndex : diff.baseItemIndex;\n      itemKeyDiffs.push(\n        createAuditDiff({\n          auditId: diff.auditId,\n          type: 'itemDelta',\n          itemKey: key,\n          [itemIndexKeyName]: itemIndexValue,\n          baseValue,\n          compareValue,\n        })\n      );\n    }\n  }\n\n  return itemKeyDiffs;\n}\n\n/** @param {string} s */\nfunction replaceNondeterministicStrings(s) {\n  if (s.startsWith('http') && s.includes('?')) {\n    try {\n      const url = new URL(s);\n      url.search = '';\n      s = url.href;\n    } catch (err) {}\n  }\n\n  return (\n    s\n      // YouTube Embeds\n      .replace(/www-embed-player-[0-9a-z]+/i, 'www-embed-player')\n      .replace(/player_ias-[0-9a-z]+/i, 'player_ias')\n      // UUIDs\n      .replace(/\\b[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\\b/gi, 'UUID')\n      // localhost Ports\n      .replace(/:[0-9]{3,5}\\//, ':PORT/')\n      // Hash components embedded in filenames\n      .replace(/(\\.|-)[0-9a-f]{6,8}\\.(js|css|woff|html|png|jpeg|jpg|svg)/i, '$1HASH.$2')\n  );\n}\n\n/**\n * The items passed to this method can be dirtied by other libraries and contain circular structures.\n * Prune any private-looking properties that start with `_` throughout the entire object.\n *\n * @see https://github.com/GoogleChrome/lighthouse-ci/issues/666\n * @param {unknown} item\n * @return {unknown}\n */\nfunction deepPruneItemForKeySerialization(item) {\n  if (typeof item !== 'object') return item;\n  if (item === null) return item;\n\n  if (Array.isArray(item)) {\n    return item.map(entry => deepPruneItemForKeySerialization(entry));\n  } else {\n    const itemAsRecord = /** @type {Record<string, unknown>} */ (item);\n    const keys = Object.keys(item);\n    const keysToKeep = keys.filter(key => !key.startsWith('_'));\n    /** @type {Record<string, any>} */\n    const copy = {};\n    for (const key of keysToKeep) {\n      copy[key] = deepPruneItemForKeySerialization(itemAsRecord[key]);\n    }\n    return copy;\n  }\n}\n\n/** @param {Record<string, any>} item @return {string} */\nfunction getItemKey(item) {\n  // Do most specific checks at the top. most general at bottom..\n  //\n  // For sourcemapped opportunities that identify a source location\n  const source = item.source;\n  if (typeof source === 'string') return source;\n  if (source && source.url) return `${source.url}:${source.line}:${source.column}`;\n  // For the pre-grouped audits like resource-summary\n  if (typeof item.label === 'string') return item.label;\n  // For the pre-grouped audits like mainthread-work-breakdown\n  if (typeof item.groupLabel === 'string') return item.groupLabel;\n  // For user-timings\n  if (typeof item.name === 'string') return item.name;\n  // For dom-size\n  if (typeof item.statistic === 'string') return item.statistic;\n  // For third-party-summary\n  if (item.entity && typeof item.entity.text === 'string') return item.entity.text;\n  // For node\n  if (typeof item.node?.path === 'string') return item.node.path;\n  // Tap-targets\n  if (\n    typeof item.tapTarget?.path === 'string' &&\n    typeof item.overlappingTarget?.path === 'string'\n  ) {\n    return `${item.tapTarget.path} + ${item.overlappingTarget.path}`;\n  }\n  // For most opportunities, diagnostics, etc where 1 row === 1 resource\n  if (typeof item.url === 'string' && item.url) return item.url;\n  if (typeof item.origin === 'string' && item.origin) return item.origin;\n\n  // For everything else, use the entire object, actually works OK on most nodes.\n  return JSON.stringify(deepPruneItemForKeySerialization(item));\n}\n\n/**\n * @param {Array<Record<string, any>>} baseItems\n * @param {Array<Record<string, any>>} compareItems\n * @return {Array<{base?: DetailItemEntry, compare?: DetailItemEntry}>}\n */\nfunction zipBaseAndCompareItems(baseItems, compareItems) {\n  const groupedByKey = _.groupIntoMap(\n    [\n      ...baseItems.map((item, i) => ({item, kind: 'base', index: i})),\n      ...compareItems.map((item, i) => ({item, kind: 'compare', index: i})),\n    ],\n    entry => replaceNondeterministicStrings(getItemKey(entry.item))\n  );\n\n  /** @type {Array<{base?: DetailItemEntry, compare?: DetailItemEntry}>} */\n  const zipped = [];\n\n  for (const entries of groupedByKey.values()) {\n    const baseItems = entries.filter(entry => entry.kind === 'base');\n    const compareItems = entries.filter(entry => entry.kind === 'compare');\n\n    if (baseItems.length > 1 || compareItems.length > 1) {\n      // The key is not actually unique, just treat all as added/removed.\n      for (const entry of entries) {\n        zipped.push({[entry.kind]: entry});\n      }\n\n      continue;\n    }\n\n    zipped.push({base: baseItems[0], compare: compareItems[0]});\n  }\n\n  return zipped;\n}\n\n/**\n * @param {Array<LHCI.AuditDiff>} diffs\n * @param {Array<{base?: DetailItemEntry, compare?: DetailItemEntry}>} zippedItems\n * @return {Array<{base?: DetailItemEntry, compare?: DetailItemEntry, diffs: Array<LHCI.AuditDiff>}>}\n */\nfunction sortZippedBaseAndCompareItems(diffs, zippedItems) {\n  /** @type {Array<RowLabel>} */\n  const rowLabelSortOrder = ['added', 'worse', 'ambiguous', 'removed', 'better', 'no change'];\n\n  return zippedItems\n    .map(item => {\n      return {\n        ...item,\n        diffs: getMatchingDiffsForIndex(\n          diffs,\n          item.compare && item.compare.index,\n          item.base && item.base.index\n        ),\n      };\n    })\n    .sort((a, b) => {\n      const compareIndexA = a.compare && a.compare.index;\n      const baseIndexA = a.base && a.base.index;\n      const compareIndexB = b.compare && b.compare.index;\n      const baseIndexB = b.base && b.base.index;\n\n      const rowStateIndexA = rowLabelSortOrder.indexOf(\n        getRowLabelForIndex(diffs, compareIndexA, baseIndexA)\n      );\n      const rowStateIndexB = rowLabelSortOrder.indexOf(\n        getRowLabelForIndex(diffs, compareIndexB, baseIndexB)\n      );\n\n      const labelValueA = getItemKey(\n        (a.compare && a.compare.item) || (a.base && a.base.item) || {}\n      );\n      const labelValueB = getItemKey(\n        (b.compare && b.compare.item) || (b.base && b.base.item) || {}\n      );\n\n      const numericValueA = getWorstNumericDeltaForIndex(diffs, compareIndexA, baseIndexA);\n      const numericValueB = getWorstNumericDeltaForIndex(diffs, compareIndexB, baseIndexB);\n\n      if (rowStateIndexA === rowStateIndexB) {\n        return typeof numericValueA === 'number' && typeof numericValueB === 'number'\n          ? numericValueB - numericValueA\n          : labelValueA.localeCompare(labelValueB);\n      }\n      return rowStateIndexA - rowStateIndexB;\n    });\n}\n\n/**\n * @param {string} auditId\n * @param {Array<Record<string, any>>} baseItems\n * @param {Array<Record<string, any>>} compareItems\n * @param {Array<{key: string | null}>} headings\n * @return {Array<LHCI.AuditDiff>}\n */\nfunction findAuditDetailItemsDiffs(auditId, baseItems, compareItems, headings) {\n  /** @type {Array<LHCI.AuditDiff>} */\n  const diffs = [];\n\n  for (const {base, compare} of zipBaseAndCompareItems(baseItems, compareItems)) {\n    if (base && compare) {\n      diffs.push(...findAuditDetailItemKeyDiffs(auditId, base, compare, headings));\n    } else if (compare) {\n      diffs.push({type: 'itemAddition', auditId, compareItemIndex: compare.index});\n    } else if (base) {\n      diffs.push({type: 'itemRemoval', auditId, baseItemIndex: base.index});\n    } else {\n      throw new Error('Impossible');\n    }\n  }\n\n  return diffs;\n}\n\n/**\n * @param {LH.AuditResult} audit\n */\nfunction normalizeScore(audit) {\n  if (audit.scoreDisplayMode === 'notApplicable') {\n    // notApplicable should be treated as passing.\n    return 1;\n  }\n\n  if (audit.scoreDisplayMode === 'informative') {\n    // informative should be treated as failing.\n    return 0;\n  }\n\n  return audit.score;\n}\n\n/**\n * @param {LH.AuditResult} audit\n */\nfunction getNumericValue(audit) {\n  if (\n    typeof audit.numericValue !== 'number' &&\n    audit.details &&\n    typeof audit.details.overallSavingsMs === 'number'\n  ) {\n    return audit.details.overallSavingsMs;\n  }\n\n  return audit.numericValue;\n}\n\n/**\n * @param {LH.AuditResult} audit\n */\nfunction normalizeNumericValue(audit) {\n  if (audit.scoreDisplayMode === 'notApplicable') {\n    return 0;\n  }\n\n  return getNumericValue(audit);\n}\n\n/**\n * @param {LH.AuditResult} audit\n * @return {Required<Pick<Required<LH.AuditResult>['details'],'items'|'headings'>>}\n */\nfunction normalizeDetails(audit) {\n  if (!audit.details) return {items: [], headings: []};\n  return {items: audit.details.items || [], headings: audit.details.headings || []};\n}\n\n/**\n * @param {LH.AuditResult} baseAudit\n * @param {LH.AuditResult} compareAudit\n * @param {{forceAllScoreDiffs?: boolean, skipDisplayValueDiffs?: boolean, synthesizeItemKeyDiffs?: boolean, percentAbsoluteDeltaThreshold?: number}} options\n * @return {Array<LHCI.AuditDiff>}\n */\nfunction findAuditDiffs(baseAudit, compareAudit, options = {}) {\n  const auditId = baseAudit.id || '';\n  const {percentAbsoluteDeltaThreshold = 0} = options;\n  /** @type {Array<LHCI.AuditDiff>} */\n  const diffs = [];\n\n  if (auditsToNotDIff.includes(auditId)) return diffs;\n\n  if (typeof baseAudit.score === 'number' || typeof compareAudit.score === 'number') {\n    diffs.push(\n      createAuditDiff({\n        auditId,\n        type: 'score',\n        baseValue: normalizeScore(baseAudit),\n        compareValue: normalizeScore(compareAudit),\n      })\n    );\n  }\n\n  if (\n    typeof getNumericValue(baseAudit) === 'number' ||\n    typeof getNumericValue(compareAudit) === 'number'\n  ) {\n    diffs.push(\n      createAuditDiff({\n        auditId,\n        type: 'numericValue',\n        baseValue: normalizeNumericValue(baseAudit),\n        compareValue: normalizeNumericValue(compareAudit),\n      })\n    );\n  }\n\n  if (typeof baseAudit.displayValue === 'string' || typeof compareAudit.displayValue === 'string') {\n    diffs.push({\n      auditId,\n      type: 'displayValue',\n      baseValue: baseAudit.displayValue || '',\n      compareValue: compareAudit.displayValue || '',\n    });\n  }\n\n  let hasItemDetails = false;\n  /** @type {Partial<LH.AuditResult['details']>} */\n  const baseAuditDetails = baseAudit.details || {};\n  /** @type {Partial<LH.AuditResult['details']>} */\n  const compareAuditDetails = compareAudit.details || {};\n  if (\n    (baseAuditDetails.type !== 'debugdata' && baseAuditDetails.items) ||\n    (compareAuditDetails.type !== 'debugdata' && compareAuditDetails.items)\n  ) {\n    hasItemDetails = true;\n    const {items: baseItems, headings: baseHeadings} = normalizeDetails(baseAudit);\n    const {items: compareItems, headings: compareHeadings} = normalizeDetails(compareAudit);\n    const headings = baseHeadings.concat(compareHeadings);\n\n    diffs.push(\n      createAuditDiff({\n        auditId,\n        type: 'itemCount',\n        baseValue: baseItems.length,\n        compareValue: compareItems.length,\n      })\n    );\n\n    diffs.push(...findAuditDetailItemsDiffs(auditId, baseItems, compareItems, headings));\n\n    if (options.synthesizeItemKeyDiffs) {\n      diffs.push(...synthesizeItemKeyDiffs(diffs, baseItems, compareItems));\n    }\n  }\n\n  const filteredDiffs = diffs.filter(diff => {\n    // Errors are always surfaced.\n    if (diff.type === 'error') return true;\n    // Additions and removals are always surfaced.\n    if (diff.type === 'itemAddition' || diff.type === 'itemRemoval') return true;\n    // If it's a score and we're not forcing all score diffs, only flag level changes.\n    if (diff.type === 'score' && !options.forceAllScoreDiffs) {\n      return getScoreLevel(diff.baseValue) !== getScoreLevel(diff.compareValue);\n    }\n    // If it's a display value change, ensure the values are different, and defer to the options.\n    if (diff.type === 'displayValue') {\n      return diff.baseValue !== diff.compareValue && !options.skipDisplayValueDiffs;\n    }\n\n    // Ensure the percent delta is above our threshold (0 by default).\n    return getDeltaStats(diff).percentAbsoluteDelta > percentAbsoluteDeltaThreshold;\n  });\n\n  // If the only diff found was a displayValue diff, skip it as the others were probably ignored by\n  // our percentAbsoluteDeltaThreshold.\n  if (filteredDiffs.length === 1 && filteredDiffs[0].type === 'displayValue') return [];\n\n  // If the only diff found was a numericValue/displayValue diff *AND* it seems like the result was flaky, skip it.\n  // The result is likely flaky if the audit passed *OR* it was supposed to have details but no details items changed.\n  const isAllPassing = compareAudit.score === 1 && baseAudit.score === 1;\n  const group = getGroupForAuditId(auditId);\n  if (\n    group !== 'metrics' && // if metrics group audit is found, don't skip it\n    filteredDiffs.every(diff => diff.type === 'displayValue' || diff.type === 'numericValue') &&\n    (isAllPassing || hasItemDetails)\n  ) {\n    return [];\n  }\n\n  return filteredDiffs;\n}\n\nmodule.exports = {\n  findAuditDiffs,\n  getDiffSeverity,\n  getDeltaLabel,\n  getDeltaStats,\n  getDiffLabel,\n  getRowLabel,\n  getRowLabelForIndex,\n  getMostSevereDiffLabel,\n  getMetricScoreLevel,\n  zipBaseAndCompareItems,\n  synthesizeItemKeyDiffs,\n  sortZippedBaseAndCompareItems,\n  replaceNondeterministicStrings,\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n'use strict';\n\n/**\n * @see https://github.com/GoogleChrome/lighthouse/blob/2ff07d29a3e12a75cc844427c567330eb84d4249/lighthouse-core/report/html/renderer/util.js#L320-L347\n *\n * Split a string on markdown links (e.g. [some link](https://...)) into\n * segments of plain text that weren't part of a link (marked as\n * `isLink === false`), and segments with text content and a URL that did make\n * up a link (marked as `isLink === true`).\n * @param {string} text\n * @return {Array<{isLink: true, text: string, linkHref: string}|{isLink: false, text: string}>}\n */\nfunction splitMarkdownLink(text) {\n  /** @type {Array<{isLink: true, text: string, linkHref: string}|{isLink: false, text: string}>} */\n  const segments = [];\n\n  const parts = text.split(/\\[([^\\]]+?)\\]\\((https?:\\/\\/.*?)\\)/g);\n  while (parts.length) {\n    // Shift off the same number of elements as the pre-split and capture groups.\n    const [preambleText, linkText, linkHref] = parts.splice(0, 3);\n\n    if (preambleText) {\n      // Skip empty text as it's an artifact of splitting, not meaningful.\n      segments.push({\n        isLink: false,\n        text: preambleText,\n      });\n    }\n\n    // Append link if there are any.\n    if (linkText && linkHref) {\n      segments.push({\n        isLink: true,\n        text: linkText,\n        linkHref,\n      });\n    }\n  }\n\n  return segments;\n}\n\nmodule.exports = {splitMarkdownLink};\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 16;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 17;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {preact.ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n", "import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n", "import { slice } from './util';\nimport options from './options';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: original == null ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == null && options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor == undefined;\n", "import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tparentDom = component._parentDom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {Component} a\n * @param {Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c;\n\trerenderQueue.sort(depthSort);\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile ((c = rerenderQueue.shift())) {\n\t\tif (c._dirty) {\n\t\t\tlet renderQueueLength = rerenderQueue.length;\n\t\t\trenderComponent(c);\n\t\t\tif (rerenderQueue.length > renderQueueLength) {\n\t\t\t\t// When i.e. rerendering a provider additional new items can be injected, we want to\n\t\t\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t\t\t// single pass\n\t\t\t\trerenderQueue.sort(depthSort);\n\t\t\t}\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n", "import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue, contextId) {\n\tcontextId = '__cC' + i++;\n\n\tconst context = {\n\t\t_id: contextId,\n\t\t_defaultValue: defaultValue,\n\t\t/** @type {FunctionComponent} */\n\t\tConsumer(props, contextValue) {\n\t\t\t// return props.children(\n\t\t\t// \tcontext[contextId] ? context[contextId].props.value : defaultValue\n\t\t\t// );\n\t\t\treturn props.children(contextValue);\n\t\t},\n\t\t/** @type {FunctionComponent} */\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\t/** @type {Component[]} */\n\t\t\t\tlet subs = [];\n\t\t\t\tlet ctx = {};\n\t\t\t\tctx[contextId] = this;\n\n\t\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t\tif (this.props.value !== _props.value) {\n\t\t\t\t\t\t// I think the forced value propagation here was only needed when `options.debounceRendering` was being bypassed:\n\t\t\t\t\t\t// https://github.com/preactjs/preact/commit/4d339fb803bea09e9f198abf38ca1bf8ea4b7771#diff-54682ce380935a717e41b8bfc54737f6R358\n\t\t\t\t\t\t// In those cases though, even with the value corrected, we're double-rendering all nodes.\n\t\t\t\t\t\t// It might be better to just tell folks not to use force-sync mode.\n\t\t\t\t\t\t// Currently, using `useContext()` in a class component will overwrite its `this.context` value.\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context[contextId] = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\t\t\t\t\t\tsubs.some(c => {\n\t\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\t// Devtools needs access to the context object when it\n\t// encounters a Provider. This is necessary to support\n\t// setting `displayName` on the context object instead\n\t// of on the component itself. See:\n\t// https://reactjs.org/docs/context.html#contextdisplayname\n\n\treturn (context.Provider._contextRef = context.Consumer.contextType =\n\t\tcontext);\n}\n", "import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR, INSERT_VNODE, MATCHED } from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\tnewParentVNode._nextDom = oldDom;\n\tconstructNewChildrenArray(newParentVNode, renderResult, oldChildren);\n\toldDom = newParentVNode._nextDom;\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\n\t\tif (\n\t\t\tchildVNode == null ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index === -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tisSvg,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, null, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == null && newDom != null) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tif (\n\t\t\tchildVNode._flags & INSERT_VNODE ||\n\t\t\toldVNode._children === childVNode._children\n\t\t) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom);\n\t\t} else if (\n\t\t\ttypeof childVNode.type == 'function' &&\n\t\t\tchildVNode._nextDom !== undefined\n\t\t) {\n\t\t\t// Since Fragments or components that return Fragment like VNodes can\n\t\t\t// contain multiple DOM nodes as the same level, continue the diff from\n\t\t\t// the sibling of last DOM child of this child VNode\n\t\t\toldDom = childVNode._nextDom;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because it\n\t\t// is only used by `diffChildren` to determine where to resume the diff\n\t\t// after diffing Components and Fragments. Once we store it the nextDOM\n\t\t// local var, we can clean up the property. Also prevents us hanging on to\n\t\t// DOM nodes that may have been unmounted.\n\t\tchildVNode._nextDom = undefined;\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\t// TODO: With new child diffing algo, consider alt ways to diff Fragments.\n\t// Such as dropping oldDom and moving fragments in place\n\t//\n\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t// _nextDom property to the nextSibling of its last child DOM node.\n\t//\n\t// `oldDom` contains the correct value here because if the last child\n\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t// node's nextSibling.\n\tnewParentVNode._nextDom = oldDom;\n\tnewParentVNode._dom = firstChildDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(newParentVNode, renderResult, oldChildren) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tconst newChildrenLength = renderResult.length;\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = [];\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == null ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = null;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode.constructor === undefined && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : null,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\t// Handle unmounting null placeholders, i.e. VNode => null in unkeyed children\n\t\tif (childVNode == null) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode && oldVNode.key == null && oldVNode._dom) {\n\t\t\t\tif (oldVNode._dom == newParentVNode._nextDom) {\n\t\t\t\t\tnewParentVNode._nextDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode, false);\n\n\t\t\t\t// Explicitly nullify this position in oldChildren instead of just\n\t\t\t\t// setting `_match=true` to prevent other routines (e.g.\n\t\t\t\t// `findMatchingIndex` or `getDomSibling`) from thinking VNodes or DOM\n\t\t\t\t// nodes in this position are still available to be used in diffing when\n\t\t\t\t// they have actually already been unmounted. For example, by only\n\t\t\t\t// setting `_match=true` here, the unmounting loop later would attempt\n\t\t\t\t// to unmount this VNode again seeing `_match==true`.  Further,\n\t\t\t\t// getDomSibling doesn't know about _match and so would incorrectly\n\t\t\t\t// assume DOM nodes in this subtree are mounted and usable.\n\t\t\t\toldChildren[i] = null;\n\t\t\t\tremainingOldChildren--;\n\t\t\t}\n\n\t\t\tcontinue;\n\t\t}\n\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\tconst skewedIndex = i + skew;\n\t\tconst matchingIndex = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t);\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tchildVNode._index = matchingIndex;\n\n\t\toldVNode = null;\n\t\tif (matchingIndex !== -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original === null\n\t\tconst isMounting = oldVNode == null || oldVNode._original === null;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\tskew--;\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex !== skewedIndex) {\n\t\t\tif (matchingIndex === skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else if (matchingIndex > skewedIndex) {\n\t\t\t\tif (remainingOldChildren > newChildrenLength - skewedIndex) {\n\t\t\t\t\tskew += matchingIndex - skewedIndex;\n\t\t\t\t} else {\n\t\t\t\t\t// ### Change from keyed: I think this was missing from the algo...\n\t\t\t\t\tskew--;\n\t\t\t\t}\n\t\t\t} else if (matchingIndex < skewedIndex) {\n\t\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\t\tskew = matchingIndex - skewedIndex;\n\t\t\t\t} else {\n\t\t\t\t\tskew = 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tskew = 0;\n\t\t\t}\n\n\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t// match the new skew index (i + new skew)\n\t\t\tif (matchingIndex !== i + skew) {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != null && (oldVNode._flags & MATCHED) === 0) {\n\t\t\t\tif (oldVNode._dom == newParentVNode._nextDom) {\n\t\t\t\t\tnewParentVNode._nextDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tparentDom.insertBefore(parentVNode._dom, oldDom || null);\n\t\toldDom = parentVNode._dom;\n\t}\n\n\treturn oldDom && oldDom.nextSibling;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet x = skewedIndex - 1;\n\tlet y = skewedIndex + 1;\n\tlet oldVNode = oldChildren[skewedIndex];\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\tlet shouldSearch =\n\t\tremainingOldChildren >\n\t\t(oldVNode != null && (oldVNode._flags & MATCHED) === 0 ? 1 : 0);\n\n\tif (\n\t\toldVNode === null ||\n\t\t(oldVNode && key == oldVNode.key && type === oldVNode.type)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tif (x >= 0) {\n\t\t\t\toldVNode = oldChildren[x];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) === 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn x;\n\t\t\t\t}\n\t\t\t\tx--;\n\t\t\t}\n\n\t\t\tif (y < oldChildren.length) {\n\t\t\t\toldVNode = oldChildren[y];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) === 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn y;\n\t\t\t\t}\n\t\t\t\ty++;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n", "import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value == null ? '' : value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, isSvg) {\n\tlet useCapture;\n\n\to: if (name === 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tuseCapture =\n\t\t\tname !== (name = name.replace(/(PointerCapture)$|Capture$/, '$1'));\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (name.toLowerCase() in dom) name = name.toLowerCase().slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = Date.now();\n\t\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\t\tdom.addEventListener(name, handler, useCapture);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\tdom.removeEventListener(name, handler, useCapture);\n\t\t}\n\t} else {\n\t\tif (isSvg) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname !== 'width' &&\n\t\t\tname !== 'height' &&\n\t\t\tname !== 'href' &&\n\t\t\tname !== 'list' &&\n\t\t\tname !== 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname !== 'tabIndex' &&\n\t\t\tname !== 'download' &&\n\t\t\tname !== 'rowSpan' &&\n\t\t\tname !== 'colSpan' &&\n\t\t\tname !== 'role' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == null ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != null && (value !== false || name[4] === '-')) {\n\t\t\tdom.setAttribute(name, value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {PreactEvent} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tconst eventHandler = this._listeners[e.type + false];\n\t/**\n\t * This trick is inspired by Vue https://github.com/vuejs/core/blob/main/packages/runtime-dom/src/modules/events.ts#L90-L101\n\t * when the dom performs an event it leaves micro-ticks in between bubbling up which means that an event can trigger on a newly\n\t * created DOM-node while the event bubbles up, this can cause quirky behavior as seen in https://github.com/preactjs/preact/issues/3927\n\t */\n\tif (!e._dispatched) {\n\t\t// When an event has no _dispatched we know this is the first event-target in the chain\n\t\t// so we set the initial dispatched time.\n\t\te._dispatched = Date.now();\n\t\t// When the _dispatched is smaller than the time when the targetted event handler was attached\n\t\t// we know we have bubbled up to an element that was added during patching the dom.\n\t} else if (e._dispatched <= eventHandler._attached) {\n\t\treturn;\n\t}\n\treturn eventHandler(options.event ? options.event(e) : e);\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {PreactEvent} e The event object from the browser\n * @private\n */\nfunction eventProxyCapture(e) {\n\treturn this._listeners[e.type + true](options.event ? options.event(e) : e);\n}\n", "import {\n\tEMPTY_OBJ,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tRESET_MODE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!c._force &&\n\t\t\t\t\t((c.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\t\tnewVNode._original === oldVNode._original)\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original !== oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.forEach(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type === Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = null;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t: MODE_HYDRATE;\n\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t\t// ^ could possibly be simplified to:\n\t\t\t\t// excessDomChildren.length = 0;\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == null &&\n\t\tnewVNode._original === oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\tnewVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tisSvg,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\troot._nextDom = undefined;\n\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tif (nodeType === 'svg') isSvg = true;\n\n\tif (excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value === !!nodeType &&\n\t\t\t\t(nodeType ? value.localName === nodeType : value.nodeType === 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (nodeType === null) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tif (isSvg) {\n\t\t\tdom = document.createElementNS('http://www.w3.org/2000/svg', nodeType);\n\t\t} else {\n\t\t\tdom = document.createElement(nodeType, newProps.is && newProps);\n\t\t}\n\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tisHydrating = false;\n\t}\n\n\tif (nodeType === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != null) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (i !== 'key' && !(i in newProps)) {\n\t\t\t\tsetProperty(dom, i, null, value, isSvg);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\ti !== 'key' &&\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], isSvg);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html !== oldHtml.__html &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg && nodeType !== 'foreignObject',\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (\n\t\t\t\tinputValue !== undefined &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType === 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType === 'option' && inputValue !== oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], false);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked !== undefined && checked !== dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], false);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any>} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) {\n\t\t\tapplyRef(r, null, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t\tvnode._component = undefined;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type !== 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove && vnode._dom != null) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._parent = vnode._dom = vnode._nextDom = undefined;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n", "import { EMPTY_OBJ } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {ComponentChild} vnode The virtual node to render\n * @param {PreactElement} parentDom The DOM element to render into\n * @param {PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: parentDom.firstChild\n\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t: null,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t? oldVNode._dom\n\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {ComponentChild} vnode The virtual node to render\n * @param {PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n", "import { assign, slice } from './util';\nimport { createVNode } from './create-element';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] === undefined && defaultProps !== undefined) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tnull\n\t);\n}\n", "/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {VNode} [oldVNode]\n * @param {ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {Component} */\n\tlet component,\n\t\t/** @type {ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n", "import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet EMPTY = [];\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingValue = EMPTY;\n\t\t\t\thookItem._nextValue = hookItem._pendingArgs = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\tif (hookItem._pendingValue !== EMPTY) {\n\t\t\t\thookItem._value = hookItem._pendingValue;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t\thookItem._pendingValue = EMPTY;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({ _pendingValue: EMPTY });\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} [initialState]\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\tconst stateHooks = hookState._component.__hooks._list.filter(\n\t\t\t\t\tx => x._component\n\t\t\t\t);\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = false;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn shouldUpdate || hookState._component.props !== p\n\t\t\t\t\t? prevScu\n\t\t\t\t\t\t? prevScu.call(this, p, s, c)\n\t\t\t\t\t\t: true\n\t\t\t\t\t: false;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tref(createHandle());\n\t\t\t\treturn () => ref(null);\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._pendingValue = factory();\n\t\tstate._pendingArgs = args;\n\t\tstate._factory = factory;\n\t\treturn state._pendingValue;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\n/**\n * @param {(error: any, errorInfo: import('preact').ErrorInfo) => void} cb\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\nexport function useId() {\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal.d').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n", "function toVal(mix) {\n\tvar k, y, str='';\n\tif (mix) {\n\t\tif (typeof mix === 'object') {\n\t\t\tif (!!mix.push) {\n\t\t\t\tfor (k=0; k < mix.length; k++) {\n\t\t\t\t\tif (mix[k] && (y = toVal(mix[k]))) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (k in mix) {\n\t\t\t\t\tif (mix[k] && (y = toVal(k))) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (typeof mix !== 'boolean' && !mix.call) {\n\t\t\tstr && (str += ' ');\n\t\t\tstr += mix;\n\t\t}\n\t}\n\treturn str;\n}\n\nexport default function () {\n\tvar i=0, x, str='';\n\twhile (i < arguments.length) {\n\t\tif (x = toVal(arguments[i++])) {\n\t\t\tstr && (str += ' ');\n\t\t\tstr += x\n\t\t}\n\t}\n\treturn str;\n}\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport clsx from 'clsx';\nimport './loading-spinner.css';\n\n// @ts-ignore - tsc doesn't understand bundlers :)\nconst SVG_PATH = require('./loading-spinner.svg');\n\nconst LoadingSpinner_ = () => {\n  return <img src={SVG_PATH} alt=\"Loading spinner\" />;\n};\n\n/** @param {{solo?: boolean}} props */\nexport const LoadingSpinner = props => {\n  return (\n    <div\n      className={clsx('loading-spinner', {\n        'loading-spinner--container': !props.solo,\n      })}\n    >\n      <LoadingSpinner_ />\n    </div>\n  );\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport clsx from 'clsx';\nimport './paper.css';\n\n/** @param {{children: string|JSX.Element|JSX.Element[], className?: string, key?: any}} props */\nexport const Paper = props => {\n  const {children} = props;\n  return <div className={clsx('paper', props.className)}>{children}</div>;\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport clsx from 'clsx';\nimport {useState} from 'preact/hooks';\nimport './lhr-viewer-link.css';\n\n/** @typedef {LH.Result|(() => Promise<LH.Result>)} LHResolver */\n\n/** @param {LH.Result} lhr */\nexport function openLhrInClassicViewer(lhr) {\n  // Allows for self-hosted viewer uri instead of linking externally\n  const VIEWER_ORIGIN = process.env.VIEWER_ORIGIN || 'https://googlechrome.github.io';\n  // Chrome doesn't allow us to immediately postMessage to a popup right\n  // after it's created. Normally, we could also listen for the popup window's\n  // load event, however it is cross-domain and won't fire. Instead, listen\n  // for a message from the target app saying \"I'm open\".\n  window.addEventListener('message', function msgHandler(messageEvent) {\n    if (messageEvent.origin !== VIEWER_ORIGIN) {\n      return;\n    }\n    // https://github.com/GoogleChrome/lighthouse/blob/35f1a6f90e9443bdf42179a4c9823e6d4848a9e6/lighthouse-viewer/app/src/lighthouse-report-viewer.js#L415-L418\n    if (popup && messageEvent.data.opened) {\n      popup.postMessage({lhresults: lhr}, VIEWER_ORIGIN);\n      window.removeEventListener('message', msgHandler);\n    }\n  });\n\n  // The popup's window.name is keyed by version+url+fetchTime, so we reuse/select tabs correctly\n  const fetchTime = lhr.fetchTime;\n  const windowName = `${lhr.lighthouseVersion}-${lhr.requestedUrl}-${fetchTime}`;\n  const popup = window.open(`${VIEWER_ORIGIN}/lighthouse/viewer`, windowName);\n}\n\n/** @param {{children: string|JSX.Element|JSX.Element[], lhr: LHResolver, className?: string}} props */\nexport const LhrViewerLink = props => {\n  const {children, lhr: lhrOrResolver} = props;\n  const [isLoading, setIsLoading] = useState(false);\n\n  return (\n    <span\n      className={clsx('lhr-viewer-link', props.className, {\n        'lhr-viewer-link--loading': isLoading,\n      })}\n      onClick={async evt => {\n        evt.preventDefault();\n        evt.stopImmediatePropagation();\n        if (isLoading) return;\n\n        if (typeof lhrOrResolver === 'object') return openLhrInClassicViewer(lhrOrResolver);\n\n        setIsLoading(true);\n        const lhr = await lhrOrResolver();\n        setIsLoading(false);\n        openLhrInClassicViewer(lhr);\n      }}\n    >\n      {children}\n    </span>\n  );\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport {LhrViewerLink} from './lhr-viewer-link';\nimport './lhr-viewer-button.css';\n\n// @ts-ignore - ts doesn't know how bundlers work :)\nconst LH_ICON_PATH = require('../favicon.svg');\n\n/** @param {{lhr: import('./lhr-viewer-link').LHResolver, label?: string}} props */\nexport const LhrViewerButton = props => {\n  const {lhr, label = 'Open Report'} = props;\n  return (\n    <LhrViewerLink lhr={lhr}>\n      <div className=\"lhr-viewer-button\" role=\"button\">\n        <img src={LH_ICON_PATH} /> <span>{label}</span>\n      </div>\n    </LhrViewerLink>\n  );\n};\n", "/**\n * @license Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nexport {LoadingSpinner} from '../../../../server/src/ui/components/loading-spinner.jsx';\nexport {Paper} from '../../../../server/src/ui/components/paper.jsx';\nexport {LhrViewerButton} from '../../../../server/src/ui/components/lhr-viewer-button.jsx';\n\n/** @type {string} */\n// @ts-expect-error - tsc doesn't get parcel :)\nexport const CONFETTI_PATH = require('../../../../server/src/ui/routes/project-list/confetti.svg');\n\n/** @type {string} */\n// @ts-expect-error - tsc doesn't get parcel :)\nexport const LH_LOGO_PATH = require('../../../../server/src/ui/logo.svg');\n", "/**\n * @license Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport './report-upload-box.css';\nimport {LhrViewerButton} from './lhci-components';\nimport {useState, useEffect, useRef} from 'preact/hooks';\nimport clsx from 'clsx';\n\n/** @typedef {import('../app.jsx').ToastMessage} ToastMessage */\n/** @typedef {import('../app.jsx').ReportData} ReportData */\n/** @typedef {'filename'|'hostname'|'pathname'|'path'|'timestamp-hostname'|'timestamp-pathname'} DisplayType */\n/** @typedef {{variant: 'base'|'compare', displayType: DisplayType, report: ReportData|undefined, setReport: (d: ReportData) => void, addToast: (t: ToastMessage) => void, showOpenLhrLink?: boolean, dragTarget?: 'self' | 'document'}} ReportUploadBoxProps */\n/** @typedef {HTMLElement|undefined} DragData */\n\n/** @param {string} s @return {LH.Result|Error} */\nexport function parseStringAsLhr(s) {\n  if (s.includes('<script>window.__LIGHTHOUSE_JSON__ = ')) {\n    const match = s.match(/window\\.__LIGHTHOUSE_JSON__ = (.*?});<\\/script>/);\n    if (match) s = match[1];\n  }\n\n  if (s.trim().charAt(0) === '{') {\n    try {\n      const lhr = JSON.parse(s).lighthouseResult;\n      if (lhr.lighthouseVersion) return lhr;\n      return new Error(`JSON did not contain a lighthouseVersion`);\n    } catch (err) {\n      return new Error(`File was not valid JSON (${err.message})`);\n    }\n  }\n\n  return new Error('File was not a valid report');\n}\n\n/** @param {LH.Result} lhrA  @param {LH.Result} lhrB @return {DisplayType} */\nexport function computeBestDisplayType(lhrA, lhrB) {\n  const urlA = new URL(lhrA.finalUrl);\n  const urlB = new URL(lhrB.finalUrl);\n  if (urlA.hostname !== urlB.hostname) return 'hostname';\n  if (urlA.pathname !== urlB.pathname) return 'pathname';\n  if (urlA.search !== urlB.search) return 'path';\n  if (urlA.pathname.length < 5) return 'timestamp-hostname';\n  return 'timestamp-pathname';\n}\n\n/** @param {{report: ReportData, displayType: DisplayType}} props */\nconst FilePill = props => {\n  const {filename, lhr} = props.report;\n  const url = new URL(lhr.finalUrl);\n  const timestamp = new Date(lhr.fetchTime).toLocaleString();\n  const options = {\n    filename,\n    hostname: url.hostname,\n    pathname: url.pathname,\n    path: `${url.pathname}${url.search}`,\n    'timestamp-hostname': `${timestamp} (${url.hostname})`,\n    'timestamp-pathname': `${timestamp} (${url.pathname})`,\n  };\n\n  const tooltip = `${url.href} at ${timestamp}`;\n  return <span title={tooltip}>{options[props.displayType]}</span>;\n};\n\n/** @param {Pick<ReportUploadBoxProps, 'addToast'|'setReport'>} props @param {FileList} fileList */\nfunction handleFileInput(props, fileList) {\n  const filename = fileList[0].name;\n  const reader = new FileReader();\n  reader.readAsText(fileList[0], 'utf-8');\n\n  reader.addEventListener('load', () => {\n    if (typeof reader.result !== 'string') {\n      props.addToast({message: 'File was not readable as text!', level: 'error'});\n      return;\n    }\n\n    const lhr = parseStringAsLhr(reader.result);\n    if (lhr instanceof Error) {\n      props.addToast({message: `Invalid file: ${lhr.message}`, level: 'error'});\n      return;\n    }\n\n    props.setReport({filename, data: reader.result, lhr});\n  });\n\n  reader.addEventListener('error', () => {\n    props.addToast({message: 'File was not readable!', level: 'error'});\n  });\n}\n\n/** @param {ReportUploadBoxProps} props @param {import('preact/hooks').MutableRef<DragData>} dragTargetRef @param {(b: boolean) => void} setIsDragging @param {Event} e */\nfunction handleDragEnter(props, dragTargetRef, setIsDragging, e) {\n  if (!(e.target instanceof HTMLElement)) return;\n  e.stopPropagation();\n  e.preventDefault();\n  setIsDragging(true);\n  dragTargetRef.current = e.target;\n}\n\n/** @param {ReportUploadBoxProps} props @param {import('preact/hooks').MutableRef<DragData>} dragTargetRef @param {(b: boolean) => void} setIsDragging @param {Event} e */\nfunction handleDragLeave(props, dragTargetRef, setIsDragging, e) {\n  if (e.target !== dragTargetRef.current) return;\n  e.stopPropagation();\n  e.preventDefault();\n  setIsDragging(false);\n  dragTargetRef.current = undefined;\n}\n\n/** @param {ReportUploadBoxProps} props @param {import('preact/hooks').Ref<DragData>} dragTargetRef @param {(b: boolean) => void} setIsDragging @param {Event} e */\nfunction handleDragOver(props, dragTargetRef, setIsDragging, e) {\n  if (!dragTargetRef.current) return;\n  e.stopPropagation();\n  e.preventDefault();\n}\n\n/** @param {Pick<ReportUploadBoxProps, 'addToast'|'setReport'>} props @param {import('preact/hooks').MutableRef<DragData>} dragTargetRef @param {(b: boolean) => void} setIsDragging @param {Event} e */\nfunction handleDrop(props, dragTargetRef, setIsDragging, e) {\n  if (!dragTargetRef.current) return;\n  if (!(e instanceof DragEvent)) return;\n  if (!e.dataTransfer) return;\n  e.stopPropagation();\n  e.preventDefault();\n  setIsDragging(false);\n  dragTargetRef.current = undefined;\n  handleFileInput(props, e.dataTransfer.files);\n}\n\n/** @param {ReportUploadBoxProps} props */\nexport const ReportUploadBox = props => {\n  const [isDragging, setIsDragging] = useState(false);\n  const dragTargetRef = useRef(/** @type {HTMLElement|undefined} */ (undefined));\n\n  /** @param {Event} e */\n  const onDragEnter = e => handleDragEnter(props, dragTargetRef, setIsDragging, e);\n  /** @param {Event} e */\n  const onDragLeave = e => handleDragLeave(props, dragTargetRef, setIsDragging, e);\n  /** @param {Event} e */\n  const onDragOver = e => handleDragOver(props, dragTargetRef, setIsDragging, e);\n  /** @param {Event} e */\n  const onDrop = e => handleDrop(props, dragTargetRef, setIsDragging, e);\n\n  useEffect(() => {\n    if (props.dragTarget !== 'document') return;\n\n    document.addEventListener('dragenter', onDragEnter);\n    document.addEventListener('dragleave', onDragLeave);\n    document.addEventListener('dragover', onDragOver);\n    document.addEventListener('drop', onDrop);\n\n    return () => {\n      document.removeEventListener('dragenter', onDragEnter);\n      document.removeEventListener('dragleave', onDragLeave);\n      document.removeEventListener('dragover', onDragOver);\n      document.removeEventListener('drop', onDrop);\n    };\n  }, [props.dragTarget, props.addToast, props.setReport, dragTargetRef.current]);\n\n  return (\n    <div\n      className={clsx(`report-upload-box report-upload-box--${props.variant}`, {\n        'report-upload-box--drop': isDragging,\n        'report-upload-box--document-target': props.dragTarget === 'document',\n      })}\n      onDragEnter={onDragEnter}\n      onDragLeave={onDragLeave}\n      onDragOver={onDragOver}\n      onDrop={onDrop}\n    >\n      <div className=\"report-upload-box__drop-outline\">Drop your report to upload</div>\n      <span className=\"report-upload-box__label\">\n        {props.variant === 'base' ? 'Base' : 'Compare'}\n      </span>\n      <div className=\"report-upload-box__file\">\n        {props.report ? (\n          <FilePill report={props.report} displayType={props.displayType} />\n        ) : (\n          <Fragment />\n        )}\n      </div>\n      <div className=\"report-upload-box__lhr-link\">\n        {props.report && props.showOpenLhrLink ? (\n          <LhrViewerButton lhr={props.report.lhr} label=\"View Report\" />\n        ) : null}\n      </div>\n      <div className=\"report-upload-box__spacer\" />\n      <label className=\"report-upload-box__upload\">\n        Select file\n        <input\n          type=\"file\"\n          style={{display: 'none'}}\n          onChange={e => {\n            const input = e.target;\n            if (!(input instanceof HTMLInputElement)) return;\n            const fileList = input.files;\n            if (!fileList || fileList.length !== 1) return;\n            handleFileInput(props, fileList);\n          }}\n        />\n      </label>\n    </div>\n  );\n};\n", "/**\n * @license Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport './landing.css';\nimport {CONFETTI_PATH, LH_LOGO_PATH, Paper} from '../../components/lhci-components.jsx';\nimport {ReportUploadBox} from '../../components/report-upload-box';\n\n/** @typedef {import('../../app.jsx').ToastMessage} ToastMessage */\n/** @typedef {import('../../app.jsx').ReportData} ReportData */\n\n/** @param {{baseReport?: ReportData, compareReport?: ReportData, setBaseReport: (d: ReportData) => void, setCompareReport: (d: ReportData) => void, addToast: (t: ToastMessage) => void}} props */\nexport const LandingRoute = props => {\n  return (\n    <div className=\"landing\">\n      <div className=\"landing__background\">\n        <img src={CONFETTI_PATH} alt=\"Lighthouse CI Background Image\" />\n      </div>\n      <Paper className=\"landing__paper\">\n        <div className=\"landing__logos\">\n          <img className=\"landing__logo\" src={LH_LOGO_PATH} alt=\"Lighthouse Logo\" />\n          <img className=\"landing__logo landing__logo--diff\" src={LH_LOGO_PATH} alt=\"\" />\n          <h1>Lighthouse Report Diff Tool</h1>\n        </div>\n        <p>Provide two Lighthouse reports to start comparing!</p>\n        <p>\n          <a href=\"./?baseReport=https://googlechrome.github.io/lighthouse-ci/packages/server/test/fixtures/lh-5-6-0-verge-a.json&compareReport=https://googlechrome.github.io/lighthouse-ci/packages/server/test/fixtures/lh-5-6-0-verge-b.json\">\n            View example diff\n          </a>\n        </p>\n        <div className=\"landing__upload\">\n          <ReportUploadBox\n            variant=\"base\"\n            report={props.baseReport}\n            setReport={props.setBaseReport}\n            addToast={props.addToast}\n            displayType=\"filename\"\n            dragTarget={props.baseReport ? 'self' : 'document'}\n          />\n          <ReportUploadBox\n            variant=\"compare\"\n            report={props.compareReport}\n            setReport={props.setCompareReport}\n            addToast={props.addToast}\n            displayType=\"filename\"\n            dragTarget={props.baseReport ? 'document' : 'self'}\n          />\n        </div>\n        <p>Above, drag &apos;n drop your JSON/HTML, or select the files from disk.</p>\n\n        <footer>\n          Powered by <a href=\"https://github.com/GoogleChrome/lighthouse-ci\">lighthouse-ci</a>\n        </footer>\n      </Paper>\n    </div>\n  );\n};\n", "/**\n * @license Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport {useState, useEffect} from 'preact/hooks';\nimport clsx from 'clsx';\nimport _ from '@lhci/utils/src/lodash';\nimport {findAuditDiffs, getDiffSeverity} from '@lhci/utils/src/audit-diff-finder';\n\nimport {Dropdown} from '../../components/dropdown';\nimport {AuditDetailPane} from './audit-detail/audit-detail-pane';\nimport {LhrComparisonScores} from './lhr-comparison-scores';\nimport {AuditGroup} from './audit-list/audit-group';\nimport {LhrComparisonLegend} from './lhr-comparison-legend';\nimport {Paper} from '../../components/paper';\nimport {LhrViewerLink} from '../../components/lhr-viewer-link';\n\nimport './lhr-comparison.css';\nimport {Modal} from '../../components/modal';\nimport {LhrRuntimeDiff, computeRuntimeDiffs} from './lhr-comparison-runtime-diff';\n\n/** @typedef {{id: string, pairs: Array<LHCI.AuditPair>, group: {id: string, title: string}, showAsUnchanged: boolean}} AuditGroupDef */\n\n/** @param {(s: string) => void} setAuditId */\nfunction useAuditPermalinkScrollOnLoad(setAuditId) {\n  /** @param {number} ms */\n  const wait = ms => new Promise(r => setTimeout(r, ms));\n\n  /** @param {string} selector */\n  const waitUntilSelector = async selector => {\n    let attempts = 0;\n    while (!document.querySelector(selector) && attempts < 10) {\n      await wait(500);\n      attempts++;\n    }\n  };\n\n  useEffect(() => {\n    if (window.location.hash.length <= 1) return;\n\n    Promise.resolve().then(async () => {\n      await waitUntilSelector('.lhr-comparison__audit-groups');\n      setAuditId(window.location.hash.slice(1));\n    });\n  }, []);\n}\n\n/**\n * @param {LH.Result} lhr\n * @param {LH.Result|undefined} baseLhr\n * @param {{percentAbsoluteDeltaThreshold: number}} options\n * @return {Array<AuditGroupDef>}\n */\nexport function computeAuditGroups(lhr, baseLhr, options) {\n  /** @type {Array<AuditGroupDef>} */\n  const auditGroups = [];\n\n  for (const [categoryId, category] of Object.entries(lhr.categories)) {\n    const categoryAsGroup = {title: category.title, description: category.description};\n    const auditRefsGroupedByGroup = _.groupBy(category.auditRefs, ref => ref.group);\n\n    const unchangedAuditsGroupId = `unchanged:${categoryId}`;\n    /** @type {AuditGroupDef} */\n    const unchangedAuditsGroup = {\n      id: unchangedAuditsGroupId,\n      group: {id: unchangedAuditsGroupId, title: `Unchanged Audits - ${category.title}`},\n      pairs: [],\n      showAsUnchanged: true,\n    };\n\n    for (const auditRefGroup of auditRefsGroupedByGroup) {\n      let groupId = auditRefGroup[0].group || '';\n      let groupWithoutId = lhr.categoryGroups && lhr.categoryGroups[groupId];\n      if (!groupWithoutId) {\n        // Only use the category as the group if the entire category is ungrouped.\n        // The lack of a category when the category otherwise uses groups means it's hidden.\n        if (auditRefsGroupedByGroup.length !== 1) continue;\n        groupId = `category:${categoryId}`;\n        groupWithoutId = categoryAsGroup;\n      }\n      const group = {...groupWithoutId, id: groupId};\n\n      const pairs = auditRefGroup\n        .map(ref => {\n          const audit = {...lhr.audits[ref.id], id: ref.id};\n          const baseAudit = baseLhr && baseLhr.audits[audit.id || ''];\n          const diffs = baseAudit\n            ? findAuditDiffs(baseAudit, audit, {...options, synthesizeItemKeyDiffs: true})\n            : [];\n          const maxSeverity = Math.max(...diffs.map(getDiffSeverity), 0);\n          return {audit, baseAudit, diffs, maxSeverity, group};\n        })\n        .sort((a, b) => (a.audit.score || 0) - (b.audit.score || 0));\n\n      const pairsWithDiffs = pairs.filter(pair => !pair.baseAudit || pair.diffs.length);\n      const pairsWithoutDiffs = pairs.filter(pair => pair.baseAudit && !pair.diffs.length);\n      if (pairsWithDiffs.length) {\n        auditGroups.push({id: groupId, group, pairs: pairsWithDiffs, showAsUnchanged: false});\n      }\n      if (pairsWithoutDiffs.length) {\n        unchangedAuditsGroup.pairs.push(...pairsWithoutDiffs);\n      }\n    }\n\n    if (unchangedAuditsGroup.pairs.length) {\n      auditGroups.push(unchangedAuditsGroup);\n    }\n  }\n\n  return auditGroups;\n}\n\n/** @param {{hookElements: LHCI.HookElements<'dropdowns'>, selectedAuditId?: string | null, lhr?: LH.Result, baseLhr?: LH.Result, percentAbsoluteDeltaThreshold: number, setPercentAbsoluteDeltaThreshold: (x: number) => void}} props */\nconst LhrComparisonScoresAndUrl = props => {\n  return (\n    <div className=\"lhr-comparison__scores-and-dropdowns\">\n      <div className=\"container\">\n        <div className=\"lhr-comparison__dropdowns\">\n          {props.hookElements.dropdowns}\n          <Dropdown\n            label=\"Threshold\"\n            value={props.percentAbsoluteDeltaThreshold.toString()}\n            setValue={value => {\n              props.setPercentAbsoluteDeltaThreshold(Number(value));\n            }}\n            options={[\n              {value: '0', label: '0%'},\n              {value: '0.05', label: '5%'},\n              {value: '0.1', label: '10%'},\n              {value: '0.15', label: '15%'},\n              {value: '0.25', label: '25%'},\n            ]}\n          />\n        </div>\n        {props.selectedAuditId ? <Fragment /> : <LhrComparisonScores {...props} />}\n      </div>\n    </div>\n  );\n};\n\n/** @param {{auditGroups: Array<AuditGroupDef|undefined>, baseLhr?: LH.Result, selectedAuditId: string|null, setSelectedAuditId: (id: string|null) => void, showAsNarrow: boolean}} props */\nconst AuditGroups = props => {\n  return (\n    <div className=\"lhr-comparison__audit-groups\">\n      {props.auditGroups.map(auditGroup => {\n        if (!auditGroup) return undefined;\n        return (\n          <AuditGroup\n            key={auditGroup.id}\n            showAsNarrow={props.showAsNarrow}\n            showAsUnchanged={auditGroup.showAsUnchanged}\n            pairs={auditGroup.pairs}\n            group={auditGroup.group}\n            baseLhr={props.baseLhr}\n            selectedAuditId={props.selectedAuditId}\n            setSelectedAuditId={props.setSelectedAuditId}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\n/** @param {{lhr: LH.Result, baseLhr: LH.Result|undefined, hookElements: LHCI.HookElements<'dropdowns'|'warnings'>, className?: string}} props */\nexport const LhrComparison = props => {\n  const {lhr, baseLhr} = props;\n  const defaultAck = /** @type {'none'|'acknowledged'|'closed'} */ ('none');\n  const [percentAbsoluteDeltaThreshold, setDiffThreshold] = useState(0.05);\n  const [selectedAuditId, setAuditId] = useState(/** @type {string|null} */ (null));\n  const [runtimeDiffAck, setRuntimeDiffAck] = useState(defaultAck);\n  useAuditPermalinkScrollOnLoad(setAuditId);\n\n  // Attach the LHRs to the window for easy debugging.\n  useEffect(() => {\n    // @ts-ignore\n    window.__LHR__ = lhr;\n    // @ts-ignore\n    window.__BASE_LHR__ = baseLhr;\n  }, [lhr, baseLhr]);\n\n  const runtimeDiffs = computeRuntimeDiffs(lhr, baseLhr);\n  const runtimeDiffsHaveError = runtimeDiffs.some(diff => diff.severity === 'error');\n  const auditGroups = computeAuditGroups(lhr, baseLhr, {percentAbsoluteDeltaThreshold});\n\n  return (\n    <Fragment>\n      {runtimeDiffAck === 'none' && runtimeDiffsHaveError ? (\n        <Modal onClose={() => setRuntimeDiffAck('acknowledged')}>\n          <LhrRuntimeDiff diffs={runtimeDiffs} variant=\"full\" />\n        </Modal>\n      ) : null}\n      {selectedAuditId ? (\n        <AuditDetailPane\n          selectedAuditId={selectedAuditId}\n          setSelectedAuditId={setAuditId}\n          pairs={auditGroups\n            .filter(group => !group.showAsUnchanged)\n            .map(group => group.pairs)\n            .reduce((a, b) => a.concat(b))}\n          baseLhr={baseLhr}\n        />\n      ) : (\n        <Fragment />\n      )}\n      <div\n        className={clsx('lhr-comparison', props.className, {\n          'lhr-comparison--with-audit-selection': !!selectedAuditId,\n        })}\n      >\n        <LhrComparisonScoresAndUrl\n          lhr={lhr}\n          baseLhr={baseLhr}\n          selectedAuditId={selectedAuditId}\n          hookElements={props.hookElements}\n          percentAbsoluteDeltaThreshold={percentAbsoluteDeltaThreshold}\n          setPercentAbsoluteDeltaThreshold={setDiffThreshold}\n        />\n        <div className=\"container\">\n          {props.hookElements.warnings}\n          {runtimeDiffAck !== 'closed' && runtimeDiffs.length ? (\n            <Paper className=\"position-relative\">\n              <LhrRuntimeDiff diffs={runtimeDiffs} variant=\"mini\" />\n              <div\n                className=\"lhr-comparison-runtime-diff__close\"\n                onClick={() => setRuntimeDiffAck('closed')}\n              >\n                <i className=\"material-icons\">close</i>\n              </div>\n            </Paper>\n          ) : null}\n          {auditGroups.length && baseLhr ? (\n            <Fragment>\n              {selectedAuditId ? null : (\n                <div className=\"lhr-comparison__legend-container\">\n                  <LhrComparisonLegend />\n                </div>\n              )}\n              <AuditGroups\n                showAsNarrow={!!selectedAuditId}\n                auditGroups={auditGroups}\n                baseLhr={baseLhr}\n                selectedAuditId={selectedAuditId}\n                setSelectedAuditId={setAuditId}\n              />\n            </Fragment>\n          ) : props.hookElements.warnings ? null : (\n            <Paper className=\"lhr-comparison__warning\">\n              <i className=\"material-icons\">sentiment_satisfied_alt</i>\n              <div>\n                Woah, no differences found! Switch base builds to explore other differences, or{' '}\n                <LhrViewerLink className=\"lhr-comparison__warning__lhr-link\" lhr={props.lhr}>\n                  jump straight to the Lighthouse report.\n                </LhrViewerLink>\n              </div>\n            </Paper>\n          )}\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport clsx from 'clsx';\nimport './dropdown.css';\n\n/** @param {{options: Array<{value: string, label: string}>, value: string, setValue(v: string): void, className?: string, title?: string, label?: string}} props */\nexport const Dropdown = props => {\n  const {options, value, setValue, className, title, label} = props;\n  const computedOptions = options.some(option => option.value === value)\n    ? options\n    : [...options, {value, label: value}];\n  return (\n    <div\n      className={clsx('dropdown', className)}\n      style={{position: 'relative'}}\n      data-tooltip={title}\n    >\n      <label>\n        {label ? <span className=\"dropdown__label\">{label}</span> : <Fragment />}\n        <select\n          onChange={evt => {\n            if (!(evt.target instanceof HTMLSelectElement)) return;\n            setValue(evt.target.value);\n          }}\n        >\n          {computedOptions.map(option => {\n            return (\n              <option key={option.value} value={option.value} selected={option.value === value}>\n                {option.label}\n              </option>\n            );\n          })}\n        </select>\n      </label>\n      <div className=\"dropdown__chevron\">\n        <i className=\"material-icons\">arrow_drop_down</i>\n      </div>\n    </div>\n  );\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {useRef, useEffect} from 'preact/hooks';\n\n/**\n * @template T\n * @param {T} value\n * @return {T|null|undefined}\n */\nexport function usePreviousValue(value) {\n  /** @type {import('preact').Ref<T|undefined>} */\n  const ref = useRef(undefined);\n\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n\n  // This is returned before our useEffect callback runs to update the value.\n  return ref.current;\n}\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\n\n/** @param {{score: number}} props */\nexport const ScoreIcon = props => {\n  const score = props.score;\n  if (score >= 0.9) return <i className=\"lh-score-pass\" />;\n  if (score >= 0.5) return <i className=\"lh-score-average\" />;\n  return (\n    <i className=\"lh-score-fail\">\n      <svg viewBox=\"0 0 120 120\" xmlns=\"http://www.w3.org/2000/svg\">\n        <polygon points=\"10,110 60,10 110,110\" />\n      </svg>\n    </i>\n  );\n};\n\n/** @param {{audit: LH.AuditResult}} props */\nexport const ScoreWord = props => {\n  const score = props.audit.score || 0;\n  if (score >= 0.9) return <span className=\"lh-score-word\">Pass</span>;\n  return <span className=\"lh-score-word\">Fail</span>;\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport {splitMarkdownLink} from '@lhci/utils/src/markdown.js';\n\n/** @param {{text: string}} props */\nexport const Markdown = props => {\n  const segments = splitMarkdownLink(props.text);\n\n  return (\n    <Fragment>\n      {segments.map((segment, i) => {\n        if (!segment.isLink) return <span key={i}>{segment.text}</span>;\n\n        const url = new URL(segment.linkHref);\n\n        const DOCS_ORIGINS = ['https://developers.google.com', 'https://web.dev'];\n        if (DOCS_ORIGINS.includes(url.origin)) {\n          url.searchParams.set('utm_source', 'lighthouse');\n          url.searchParams.set('utm_medium', 'ci');\n        }\n\n        return (\n          <a key={i} href={url.href} target=\"_blank\" rel=\"noopener noreferrer\">\n            {segment.text}\n          </a>\n        );\n      })}\n    </Fragment>\n  );\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\n\nexport const Nbsp = () => {\n  return <span style={{display: 'inline-block', width: 4, height: 1}} />;\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {Fragment, h} from 'preact';\nimport {Nbsp} from '../../../components/nbsp';\nimport './simple-details.css';\nimport {getDiffLabel, getDeltaStats} from '@lhci/utils/src/audit-diff-finder.js';\n\n/** @param {{type: LH.DetailsType, baseValue: any, compareValue: any, diff?: LHCI.NumericItemAuditDiff}} props */\nexport const SimpleDetails = props => {\n  let type = props.type;\n  const {compareValue, baseValue, diff} = props;\n  const value = compareValue === undefined ? baseValue : compareValue;\n\n  if (typeof value === 'object' && value.type) {\n    type = value.type;\n  }\n\n  const label = diff ? getDiffLabel(diff) : 'neutral';\n\n  const numericBase = Number.isFinite(baseValue) ? baseValue : 0;\n  const numericCompare = Number.isFinite(compareValue) ? compareValue : 0;\n  const baseDisplay = `Base Value: ${Math.round(numericBase).toLocaleString()}`;\n  const compareDisplay = `Compare Value: ${Math.round(numericCompare).toLocaleString()}`;\n  const numericTitle = `${baseDisplay}, ${compareDisplay}`;\n  const deltaPercent =\n    diff && getDeltaStats(diff).percentAbsoluteDelta !== 1\n      ? ` (${(getDeltaStats(diff).percentAbsoluteDelta * 100).toLocaleString(undefined, {\n          maximumFractionDigits: 0,\n        })}%)`\n      : '';\n\n  switch (type) {\n    case 'bytes': {\n      const kb = Math.abs((numericCompare - numericBase) / 1024);\n      return (\n        <pre className={`simple-details--${label}`} data-tooltip={numericTitle}>\n          {numericCompare >= numericBase ? '+' : '-'}\n          {kb.toLocaleString(undefined, {maximumFractionDigits: Math.abs(kb) < 1 ? 1 : 0})}\n          <Nbsp />\n          KB\n          {deltaPercent}\n        </pre>\n      );\n    }\n    case 'ms':\n    case 'timespanMs': {\n      const ms = Math.abs(Math.round(numericCompare - numericBase));\n      return (\n        <pre className={`simple-details--${label}`} data-tooltip={numericTitle}>\n          {numericCompare >= numericBase ? '+' : '-'}\n          {ms.toLocaleString()}\n          <Nbsp />\n          ms\n          {deltaPercent}\n        </pre>\n      );\n    }\n    case 'thumbnail':\n      return (\n        <img\n          style={{width: 48, height: 48, objectFit: 'cover'}}\n          src={value}\n          onError={evt => {\n            const img = evt.srcElement;\n            if (!(img instanceof HTMLImageElement)) return;\n\n            // On failure just replace the image with a 1x1 transparent gif.\n            img.onerror = null;\n            img.src =\n              'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';\n          }}\n        />\n      );\n    case 'url': {\n      let display = value;\n      let hostname = '';\n      try {\n        const url = new URL(value);\n        display = url.pathname;\n        hostname = url.hostname;\n      } catch (_) {}\n\n      // FIXME: use title instead of data-tooltip because of the `overflow: hidden` constraints on the table cell.\n      return (\n        <span title={value}>\n          {display}\n          {hostname ? <span className=\"simple-details__url-hostname\">({hostname})</span> : ''}\n        </span>\n      );\n    }\n    case 'link': {\n      if (!value.url) return <span>{value.text}</span>;\n      return (\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href={value.url}>\n          {value.text}\n        </a>\n      );\n    }\n    case 'code':\n      return <pre>{value}</pre>;\n    case 'numeric': {\n      return (\n        <pre className={`simple-details--${label}`}>\n          {numericCompare >= numericBase ? '+' : '-'}\n          {Math.abs(numericCompare - numericBase).toLocaleString()}\n          {deltaPercent}\n        </pre>\n      );\n    }\n    case 'text':\n      return <span>{value}</span>;\n    case 'node':\n      return <pre>{value.snippet}</pre>;\n    case 'source-location': {\n      if (!value.url) return <pre>{JSON.stringify(value)}</pre>;\n      const {url, line, column} = value;\n      return (\n        <pre>\n          {url}:{line}:{column}\n        </pre>\n      );\n    }\n    case 'debugdata': {\n      return <Fragment />;\n    }\n    default: {\n      const debugdata = JSON.stringify(props);\n      return <pre data-tooltip={debugdata}>{debugdata.slice(0, 20)}</pre>;\n    }\n  }\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport './table-details.css';\nimport {SimpleDetails} from './simple-details';\nimport {\n  zipBaseAndCompareItems,\n  sortZippedBaseAndCompareItems,\n  getRowLabelForIndex,\n} from '@lhci/utils/src/audit-diff-finder';\n\n/** @param {LH.DetailsType} itemType @return {boolean} */\nfunction isNumericValueType(itemType) {\n  switch (itemType) {\n    case 'bytes':\n    case 'ms':\n    case 'timespanMs':\n    case 'numeric':\n      return true;\n    default:\n      return false;\n  }\n}\n\n/** @param {{pair: LHCI.AuditPair}} props */\nexport const TableDetails = props => {\n  const {audit, baseAudit, diffs: allDiffs} = props.pair;\n  if (!audit.details) return <Fragment />;\n  const {headings: compareHeadings, items: compareItems} = audit.details;\n  if (!compareHeadings || !compareItems) return <Fragment />;\n\n  const baseHeadings = (baseAudit && baseAudit.details && baseAudit.details.headings) || [];\n  const baseItems = (baseAudit && baseAudit.details && baseAudit.details.items) || [];\n\n  const zippedItems = zipBaseAndCompareItems(baseItems, compareItems);\n  const sortedItems = sortZippedBaseAndCompareItems(allDiffs, zippedItems);\n  const headings = compareHeadings.length ? compareHeadings : baseHeadings;\n  // We'll insert the row label before the first numeric heading, or last if none is found.\n  let insertRowLabelAfterIndex =\n    headings.findIndex(heading =>\n      isNumericValueType(heading.valueType || heading.itemType || 'unknown')\n    ) - 1;\n  if (insertRowLabelAfterIndex < 0) insertRowLabelAfterIndex = headings.length - 1;\n\n  return (\n    <div className=\"table-details\">\n      <table>\n        <thead>\n          <tr>\n            {headings.map((heading, i) => {\n              const itemType = heading.valueType || heading.itemType || 'unknown';\n              return (\n                <Fragment key={i}>\n                  <th className={`table-column--${itemType}`}>{heading.label || heading.text}</th>\n                  {insertRowLabelAfterIndex === i ? <th /> : null}\n                </Fragment>\n              );\n            })}\n          </tr>\n        </thead>\n        <tbody>\n          {sortedItems.map(({base, compare, diffs}) => {\n            const definedItem = compare || base;\n            // This should never be true, but make tsc happy\n            if (!definedItem) return null;\n\n            const key = `${base && base.index}-${compare && compare.index}`;\n            const state = getRowLabelForIndex(\n              allDiffs,\n              compare && compare.index,\n              base && base.index\n            );\n\n            return (\n              <tr key={key}>\n                {headings.map((heading, j) => {\n                  const itemType = heading.valueType || heading.itemType || 'unknown';\n                  const diff = diffs.find(\n                    /** @return {diff is LHCI.NumericItemAuditDiff} */\n                    diff => diff.type === 'itemDelta' && diff.itemKey === heading.key\n                  );\n\n                  // With the introduction of subitems, not every item will have a value for every heading.\n                  const compareItem = heading.key && compare && compare.item[heading.key];\n                  const baseItem = heading.key && base && base.item[heading.key];\n\n                  return (\n                    <Fragment key={j}>\n                      <td className={`table-column--${itemType}`}>\n                        {compareItem || baseItem ? (\n                          <SimpleDetails\n                            type={itemType}\n                            compareValue={compareItem}\n                            baseValue={baseItem}\n                            diff={diff}\n                          />\n                        ) : (\n                          <Fragment />\n                        )}\n                      </td>\n                      {insertRowLabelAfterIndex === j ? (\n                        <td className=\"table-column--row-label\">\n                          {state === 'added' || state === 'removed' ? state : ''}\n                        </td>\n                      ) : null}\n                    </Fragment>\n                  );\n                })}\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport {getDeltaLabel} from '@lhci/utils/src/audit-diff-finder';\nimport clsx from 'clsx';\nimport {Nbsp} from '../../../components/nbsp';\nimport './numeric-diff.css';\n\nconst BIG_PICTURE_LIMITS = {\n  'first-contentful-paint': [0, 10000],\n  'first-meaningful-paint': [0, 10000],\n  'largest-contentful-paint': [0, 15000],\n  'speed-index': [0, 15000],\n  'first-cpu-idle': [0, 15000],\n  'interactive': [0, 20000],\n  'estimated-input-latency': [0, 1500],\n  'max-potential-fid': [0, 1500],\n  'total-blocking-time': [0, 1500],\n  'experimental-interaction-to-next-paint': [0, 3500],\n  'cumulative-layout-shift': [0, 1],\n  __default__: [0, 30 * 1000],\n};\n\n/** @param {LH.AuditResult|undefined} audit @param {'lower'|'upper'} limitType */\nconst getBigPictureLimit = (audit, limitType) => {\n  const auditId = /** @type {keyof typeof BIG_PICTURE_LIMITS} */ (audit && audit.id) || '';\n  const limits = BIG_PICTURE_LIMITS[auditId] || BIG_PICTURE_LIMITS.__default__;\n  return limits[limitType === 'lower' ? 0 : 1];\n};\n\n/** @param {number} x @param {'up'|'down'} direction */\nconst toNearestRoundNumber = (x, direction) => {\n  const fn = direction === 'up' ? Math.ceil : Math.floor;\n  if (x < 10) return fn(x);\n  if (x < 100) return fn(x / 10) * 10;\n  if (x < 1000) return fn(x / 100) * 100;\n  if (x < 10000) return fn(x / 1000) * 1000;\n  return fn(x / 2500) * 2500;\n};\n\n/**\n * @param {LH.AuditResult|undefined} audit\n * @param {string|undefined} groupId\n * @return {'ms'|'bytes'|'none'}\n */\nconst getUnitFromAudit = (audit, groupId) => {\n  if (audit && audit.id === 'cumulative-layout-shift') return 'none';\n  if (groupId === 'metrics') return 'ms';\n  if (groupId === 'load-opportunities') return 'ms';\n  if (!audit) return 'none';\n\n  if (audit.details) {\n    const details = audit.details;\n    if (details.overallSavingsMs) return 'ms';\n  }\n\n  const displayValue = audit.displayValue || '';\n  if (/[0-9,.]+\\s(ms|s)$/.test(displayValue)) return 'ms';\n  if (/[0-9,.]+\\s(KB|MB)$/.test(displayValue)) return 'bytes';\n\n  return 'none';\n};\n\n/** @param {number} x @param {{asDelta?: boolean, unit: 'ms'|'bytes'|'none', withSuffix?: boolean, preventSecondsConversion?: boolean}} options */\nconst toDisplay = (x, options) => {\n  const {asDelta = false, withSuffix = false, unit = 'none'} = options;\n  let value = Math.round(x);\n  let fractionDigits = 0;\n  let suffixUnit = '';\n\n  if (unit === 'ms') {\n    suffixUnit = 'ms';\n\n    if (Math.abs(value) >= 1000 && !options.preventSecondsConversion) {\n      value /= 1000;\n      fractionDigits = 1;\n      suffixUnit = 's';\n    }\n  }\n\n  if (unit === 'bytes') {\n    suffixUnit = 'KB';\n    value /= 1024;\n\n    if (Math.abs(value) >= 500) {\n      value /= 1024;\n      fractionDigits = 1;\n      suffixUnit = 'MB';\n    }\n  }\n\n  if (unit === 'none') {\n    if (Math.abs(x) < 1) {\n      value = x;\n      fractionDigits = 3;\n    } else if (Math.abs(value) < 10) {\n      value = x;\n      fractionDigits = 1;\n    } else if (Math.abs(value) >= 50) {\n      value /= 1000;\n      fractionDigits = 1;\n      suffixUnit = 'K';\n    }\n  }\n\n  const string = value.toLocaleString(undefined, {\n    minimumFractionDigits: fractionDigits,\n    maximumFractionDigits: fractionDigits,\n  });\n\n  const numericSign = asDelta && value >= 0 ? '+' : '';\n  const resultStr = numericSign + string + (withSuffix ? suffixUnit : '');\n  return {\n    element: (\n      <span>\n        {numericSign}\n        {string}\n        {withSuffix ? (\n          <Fragment>\n            <Nbsp />\n            {suffixUnit}\n          </Fragment>\n        ) : (\n          ''\n        )}\n      </span>\n    ),\n    string: resultStr,\n    length: resultStr.length,\n  };\n};\n\n/** @param {{diff: LHCI.NumericAuditDiff, audit?: LH.AuditResult, groupId?: string, showAsBigPicture?: boolean, showAsNarrow?: boolean}} props */\nexport const NumericDiff = props => {\n  const {diff, audit, groupId} = props;\n  const unit = getUnitFromAudit(audit, groupId);\n  const currentNumericValue = diff.compareValue;\n  const baseNumericValue = diff.baseValue;\n\n  if (typeof baseNumericValue !== 'number' || typeof currentNumericValue !== 'number') {\n    return <span>No diff available</span>;\n  }\n\n  const delta = currentNumericValue - baseNumericValue;\n  const minValue = Math.min(currentNumericValue, baseNumericValue);\n  const maxValue = Math.max(currentNumericValue, baseNumericValue);\n  const lowerLimit = props.showAsBigPicture\n    ? getBigPictureLimit(audit, 'lower')\n    : toNearestRoundNumber(minValue * 0.8, 'down');\n  const upperLimit = props.showAsBigPicture\n    ? getBigPictureLimit(audit, 'upper')\n    : toNearestRoundNumber(maxValue * 1.2, 'up');\n  const range = upperLimit - lowerLimit;\n\n  const minValueConstrainted = Math.min(Math.max(minValue, lowerLimit), upperLimit);\n  const maxValueConstrainted = Math.min(Math.max(maxValue, lowerLimit), upperLimit);\n  const boxLeft = (100 * (minValueConstrainted - lowerLimit)) / range;\n  const boxRight = 100 - (100 * (maxValueConstrainted - lowerLimit)) / range;\n  const deltaType = getDeltaLabel(delta, 'audit');\n  const minValueIsCurrentValue = minValue === currentNumericValue;\n  const hoverDisplay = `${toDisplay(baseNumericValue, {unit, withSuffix: true}).string} to ${\n    toDisplay(currentNumericValue, {\n      withSuffix: true,\n      unit,\n    }).string\n  }`;\n\n  if (props.showAsNarrow) {\n    return (\n      <div className={clsx('audit-numeric-diff', `text--${deltaType}`)} data-tooltip={hoverDisplay}>\n        {\n          toDisplay(delta, {asDelta: true, withSuffix: true, preventSecondsConversion: true, unit})\n            .element\n        }\n      </div>\n    );\n  }\n\n  // We want to ensure there's ~10px per character of space for the delta label.\n  // The min-width of the bar is ~300px, so if the deltaLabel is going to take up more than\n  // the narrowCutoffThresholdInPercent we want to flip it over to the other side.\n  const {element: deltaLabel, length: deltaLabelLength} = toDisplay(delta, {\n    asDelta: true,\n    withSuffix: true,\n    preventSecondsConversion: true,\n    unit,\n  });\n  const narrowCutoffThresholdInPercent = (deltaLabelLength * 10 * 100) / 300;\n\n  return (\n    <Fragment>\n      <div className=\"audit-numeric-diff\">\n        <div className=\"audit-numeric-diff__left-label\">\n          {toDisplay(lowerLimit, {unit}).element}\n        </div>\n        <div className=\"audit-numeric-diff__bar\">\n          <div\n            className={clsx('audit-numeric-diff__box', {\n              'audit-numeric-diff__box--improvement': deltaType === 'improvement',\n              'audit-numeric-diff__box--regression': deltaType === 'regression',\n            })}\n            style={{left: `${boxLeft}%`, right: `${boxRight}%`}}\n            data-tooltip={hoverDisplay}\n          >\n            <div\n              className=\"audit-numeric-diff__now\"\n              style={{left: minValueIsCurrentValue ? '0%' : '100%'}}\n            />\n            <div\n              className={clsx('audit-numeric-diff__delta-label', {\n                'audit-numeric-diff__delta-label--narrow-left':\n                  deltaType === 'improvement' && boxLeft < narrowCutoffThresholdInPercent,\n                'audit-numeric-diff__delta-label--narrow-right':\n                  deltaType === 'regression' && boxRight < narrowCutoffThresholdInPercent,\n              })}\n              style={{[minValueIsCurrentValue ? 'right' : 'left']: '100%'}}\n            >\n              {deltaLabel}\n            </div>\n          </div>\n        </div>\n        <div className=\"audit-numeric-diff__right-label\">\n          {toDisplay(upperLimit, {unit}).element}\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport * as _ from '@lhci/utils/src/lodash';\nimport {h, Fragment} from 'preact';\nimport {ScoreWord} from '../../../components/score-icon';\nimport {NumericDiff} from './numeric-diff';\nimport {getDiffLabel, getRowLabelForIndex} from '@lhci/utils/src/audit-diff-finder';\nimport clsx from 'clsx';\n\n/** @type {Record<string, string>} */\nconst ICONS_BY_AUDIT_ID = {\n  'font-display': 'font_download',\n  'uses-rel-preconnect': 'language',\n\n  'user-timings': 'timer',\n  'bootup-time': 'speed',\n  'mainthread-work-breakdown': 'speed',\n\n  'third-party-summary': 'language',\n\n  deprecations: 'error',\n  'errors-in-console': 'error',\n  'font-sizes': 'format_size',\n};\n\n/** @param {{audit: LH.AuditResult, groupId: string}} props */\nconst IconForAuditItems = props => {\n  const auditId = props.audit.id || '';\n  const groupId = props.groupId || '';\n\n  let icon = '';\n  if (groupId.includes('opportunities')) icon = 'web_asset';\n  if (groupId.includes('a11y')) icon = 'code';\n  if (auditId.includes('image')) icon = 'photo';\n  icon = ICONS_BY_AUDIT_ID[auditId] || icon || 'list_alt';\n\n  return <i className=\"material-icons\">{icon}</i>;\n};\n\n/** @param {{diff: LHCI.AuditDiff, audit: LH.AuditResult, baseAudit: LH.AuditResult}} props */\nconst ScoreDiff = props => {\n  return (\n    <Fragment>\n      <ScoreWord audit={props.baseAudit} />\n      <i\n        className={`material-icons audit-group__diff-arrow audit-group__diff-arrow--${getDiffLabel(\n          props.diff\n        )}`}\n      >\n        arrow_forward\n      </i>\n      <ScoreWord audit={props.audit} />\n    </Fragment>\n  );\n};\n\n/** @param {{diff: LHCI.DisplayValueAuditDiff, audit: LH.AuditResult, baseAudit: LH.AuditResult}} props */\nconst DisplayValueDiff = props => {\n  return (\n    <Fragment>\n      <span>{props.diff.baseValue}</span>\n      <i\n        className={`material-icons audit-group__diff-arrow audit-group__diff-arrow--${getDiffLabel(\n          props.diff\n        )}`}\n      >\n        arrow_forward\n      </i>\n      <span>{props.diff.compareValue}</span>\n    </Fragment>\n  );\n};\n\n/** @param {import('@lhci/utils/src/audit-diff-finder').RowLabel} rowLabel @return {'regression'|'improvement'|'neutral'} */\nfunction getDiffLabelForRowLabel(rowLabel) {\n  switch (rowLabel) {\n    case 'added':\n    case 'worse':\n    case 'ambiguous':\n      return 'regression';\n    case 'removed':\n    case 'better':\n      return 'improvement';\n    case 'no change':\n      return 'neutral';\n  }\n}\n\n/** @param {Array<LHCI.AuditDiff>} diffs */\nfunction getUniqueBaseCompareIndexPairs(diffs) {\n  return _.uniqBy(\n    diffs\n      .map(diff => ({\n        base: 'baseItemIndex' in diff ? diff.baseItemIndex : undefined,\n        compare: 'compareItemIndex' in diff ? diff.compareItemIndex : undefined,\n      }))\n      .filter(indexes => typeof indexes.base === 'number' || typeof indexes.compare === 'number'),\n    idx => `${idx.base}-${idx.compare}`\n  );\n}\n\n/** @param {{diffs: Array<LHCI.AuditDiff>, audit: LH.AuditResult, baseAudit: LH.AuditResult, groupId: string, showAsNarrow?: boolean}} props */\nexport const ItemDiff = props => {\n  const {diffs, baseAudit, groupId} = props;\n  const baseAuditItems = (baseAudit.details && baseAudit.details.items) || [];\n\n  const rowIndexes = getUniqueBaseCompareIndexPairs(diffs);\n  const rowLabels = rowIndexes\n    .map(pair => getRowLabelForIndex(diffs, pair.compare, pair.base))\n    .map(getDiffLabelForRowLabel);\n\n  const regressionCount = rowLabels.filter(label => label === 'regression').length;\n  const improvementCount = rowLabels.filter(label => label === 'improvement').length;\n\n  const baseElements = (\n    <Fragment>\n      <div className=\"audit-group__diff-badge-group\">\n        <IconForAuditItems audit={props.audit} groupId={groupId} />\n        <div className=\"audit-group__diff-badges\">\n          <span className=\"audit-group__diff-badge\">{baseAuditItems.length}</span>\n        </div>\n      </div>\n      <i\n        className={`material-icons audit-group__diff-arrow audit-group__diff-arrow--${\n          improvementCount > regressionCount ? 'improvement' : 'regression'\n        }`}\n      >\n        arrow_forward\n      </i>\n    </Fragment>\n  );\n\n  return (\n    <Fragment>\n      {props.showAsNarrow ? <Fragment /> : baseElements}\n      <div className={clsx(`audit-group__diff-badge-group`)}>\n        <IconForAuditItems audit={props.audit} groupId={groupId} />\n        <div\n          className={clsx('audit-group__diff-badges', {\n            'audit-group__diff-badge-group--multiple': Boolean(regressionCount && improvementCount),\n          })}\n        >\n          {regressionCount ? (\n            <span className=\"audit-group__diff-badge audit-group__diff-badge--regression\">\n              {regressionCount}\n            </span>\n          ) : null}\n          {improvementCount ? (\n            <span className=\"audit-group__diff-badge audit-group__diff-badge--improvement\">\n              {improvementCount}\n            </span>\n          ) : null}\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nconst NoBaseAudit = () => (\n  <div className=\"audit-group__error-message\" data-tooltip=\"Audit did not run in the base report\">\n    <i className=\"material-icons\">error_outline</i> Audit Missing\n  </div>\n);\n\n/** @param {{audit: LH.AuditResult, baseAudit: LH.AuditResult}} props */\nconst ErrorDiff = props => {\n  let message = 'An unknown error occurred while trying to compare the audit results.';\n  if (props.audit.scoreDisplayMode === 'error') {\n    message = `Audit in compare report errored: ${props.audit.errorMessage}`;\n  } else if (props.baseAudit.scoreDisplayMode === 'error') {\n    message = `Audit in base report errored: ${props.baseAudit.errorMessage}`;\n  }\n\n  return (\n    <div className=\"audit-group__error-message\" data-tooltip={message}>\n      <i className=\"material-icons\">error_outline</i> Audit Error\n    </div>\n  );\n};\n\n/** @param {{pair: LHCI.AuditPair, showAsBigPicture: boolean, showAsNarrow: boolean}} props */\nexport const AuditDiff = props => {\n  const {audit, baseAudit, diffs, group} = props.pair;\n  const noDiffAvailable = <span>No diff available</span>;\n\n  if (!baseAudit) return <NoBaseAudit />;\n\n  const errorDiff = diffs.find(diff => diff.type === 'error');\n  if (errorDiff) return <ErrorDiff audit={audit} baseAudit={baseAudit} />;\n\n  const numericDiff = diffs.find(diff => diff.type === 'numericValue');\n  if (numericDiff && numericDiff.type === 'numericValue') {\n    return (\n      <NumericDiff\n        diff={numericDiff}\n        audit={audit}\n        groupId={group.id}\n        showAsBigPicture={props.showAsBigPicture}\n        showAsNarrow={props.showAsNarrow}\n      />\n    );\n  }\n\n  const hasItemDiff = diffs.some(\n    diff => diff.type === 'itemAddition' || diff.type === 'itemRemoval' || diff.type === 'itemDelta'\n  );\n  if (hasItemDiff) {\n    return (\n      <ItemDiff\n        diffs={diffs}\n        audit={audit}\n        baseAudit={baseAudit}\n        groupId={group.id}\n        showAsNarrow={props.showAsNarrow}\n      />\n    );\n  }\n\n  const scoreDiff = diffs.find(diff => diff.type === 'score');\n  if (scoreDiff) return <ScoreDiff diff={scoreDiff} audit={audit} baseAudit={baseAudit} />;\n\n  const displayValueDiff = diffs.find(diff => diff.type === 'displayValue');\n  if (!displayValueDiff || displayValueDiff.type !== 'displayValue') return noDiffAvailable;\n  return <DisplayValueDiff diff={displayValueDiff} audit={audit} baseAudit={baseAudit} />;\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport clsx from 'clsx';\nimport {ScoreWord, ScoreIcon} from '../../../components/score-icon';\nimport {Markdown} from '../../../components/markdown';\nimport {TableDetails} from './table-details';\nimport {NumericDiff} from '../audit-list/numeric-diff';\nimport {ItemDiff} from '../audit-list/audit-diff';\nimport {getDiffLabel} from '@lhci/utils/src/audit-diff-finder';\n\n/** @param {{pair: LHCI.AuditPair, diff: LHCI.AuditDiff}} props */\nconst ScoreOnlyDetails = props => {\n  const {audit, baseAudit} = props.pair;\n  if (!baseAudit) return null;\n\n  return (\n    <div className=\"audit-detail-pane__audit-details--binary\">\n      <ScoreWord audit={baseAudit} />\n      <i\n        className={`material-icons audit-group__diff-arrow audit-group__diff-arrow--${getDiffLabel(\n          props.diff\n        )}`}\n      >\n        arrow_forward\n      </i>\n      <ScoreWord audit={audit} />\n    </div>\n  );\n};\n\n/** @param {{pair: LHCI.AuditPair}} props */\nconst ErrorDetails = props => {\n  const erroredAudit =\n    props.pair.audit.scoreDisplayMode === 'error' ? props.pair.audit : props.pair.baseAudit;\n  if (!erroredAudit) return null;\n  return (\n    <Fragment>\n      <div className=\"audit-detail-pane__audit-details-summary\">\n        Error occurred in the{' '}\n        {erroredAudit === props.pair.baseAudit ? 'base report:' : 'compare report:'}\n      </div>\n      <pre>{erroredAudit.errorMessage || 'Unknown error'}</pre>\n    </Fragment>\n  );\n};\n\n/** @param {{pair: LHCI.AuditPair, key?: string}} props */\nconst Details = props => {\n  const {pair} = props;\n  const details = pair.audit.details || {type: 'unknown'};\n  const baseDetails = (pair.baseAudit && pair.baseAudit.details) || {type: 'unknown'};\n  const hasItems = Boolean((details.items || []).length || (baseDetails.items || []).length);\n\n  let itemDiff = undefined;\n  let tableDetails = undefined;\n  let numericDetails = undefined;\n\n  if (pair.audit.errorMessage || (pair.baseAudit && pair.baseAudit.errorMessage)) {\n    return <ErrorDetails pair={pair} />;\n  }\n\n  if ((details.type === 'table' || details.type === 'opportunity') && hasItems) {\n    tableDetails = <TableDetails pair={pair} />;\n    if (pair.baseAudit) {\n      itemDiff = <ItemDiff {...pair} baseAudit={pair.baseAudit} groupId={pair.group.id} />;\n    }\n  }\n\n  const numericDiff = pair.diffs.find(diff => diff.type === 'numericValue');\n  if (numericDiff && numericDiff.type === 'numericValue') {\n    numericDetails = <NumericDiff diff={numericDiff} audit={pair.audit} />;\n  }\n\n  if (tableDetails || numericDiff) {\n    return (\n      <Fragment>\n        <div className=\"audit-detail-pane__audit-details-summary\">{numericDetails || itemDiff}</div>\n        {tableDetails}\n      </Fragment>\n    );\n  }\n\n  const scoreDiff = pair.diffs.find(diff => diff.type === 'score');\n  if (scoreDiff && scoreDiff.type === 'score')\n    return <ScoreOnlyDetails diff={scoreDiff} pair={props.pair} />;\n\n  return <pre>{JSON.stringify(props.pair, null, 2)}</pre>;\n};\n\n/** @param {{pair: LHCI.AuditPair, key?: string}} props */\nexport const AuditDetail = props => {\n  const {audit} = props.pair;\n\n  return (\n    <div id={`audit-detail-pane-audit--${audit.id}`} className={clsx('audit-detail-pane__audit')}>\n      <div className=\"audit-detail-pane__score\">\n        <ScoreIcon score={audit.score || 0} />\n      </div>\n      <div className=\"audit-detail-pane__audit-title\">{audit.title}</div>\n      <div className=\"audit-detail-pane__audit-description\">\n        <Markdown text={audit.description || ''} />\n      </div>\n      <div className=\"audit-detail-pane__audit-details\">\n        <Details pair={props.pair} />\n      </div>\n    </div>\n  );\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport './audit-detail-pane.css';\nimport {usePreviousValue} from '../../../hooks/use-previous-value.jsx';\nimport {useEffect, useRef} from 'preact/hooks';\nimport {AuditDetail} from './audit-detail';\n\n/**\n * @param {{selectedAuditId: string, setSelectedAuditId: (id: string|null) => void, pairs: Array<LHCI.AuditPair>, baseLhr?: LH.Result}} props\n */\nexport const AuditDetailPane = props => {\n  /** @type {import('preact').Ref<HTMLElement|undefined>} */\n  const paneElementRef = useRef(undefined);\n  const previouslySelectedAuditId = usePreviousValue(props.selectedAuditId);\n\n  // Scroll to the selected audit *when it changes*\n  useEffect(() => {\n    const auditId = props.selectedAuditId;\n    const paneElement = paneElementRef.current;\n    if (!paneElement || !auditId || auditId === previouslySelectedAuditId) return;\n\n    const childElement = paneElement.querySelector(`#audit-detail-pane-audit--${auditId}`);\n    if (!childElement || !(childElement instanceof HTMLElement)) return;\n\n    paneElement.scrollTo(0, childElement.offsetTop);\n  }, [props.selectedAuditId, previouslySelectedAuditId]);\n\n  return (\n    <div className=\"audit-detail-pane\" ref={el => (paneElementRef.current = el)}>\n      <div className=\"audit-detail-pane__close\" onClick={() => props.setSelectedAuditId(null)}>\n        <i className=\"material-icons\">close</i>\n      </div>\n      {props.pairs.map(pair => {\n        const {audit} = pair;\n        if (!audit.id) return undefined;\n        return <AuditDetail key={audit.id} pair={pair} />;\n      })}\n    </div>\n  );\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport clsx from 'clsx';\nimport './gauge.css';\nimport {getDiffLabel} from '@lhci/utils/src/audit-diff-finder';\n\n/** @param {{className?: string, score: number, diff?: LHCI.NumericAuditDiff}} props */\nexport const Gauge = props => {\n  const score = Math.round(props.score * 100);\n  const rawBaseScore = props.diff ? props.diff.baseValue : props.score;\n  const baseScore = Math.round(rawBaseScore * 100);\n  const label = props.diff ? getDiffLabel(props.diff) : 'neutral';\n\n  // 352 is ~= 2 * Math.PI * gauge radius (56)\n  // https://codepen.io/xgad/post/svg-radial-progress-meters\n  // score of 50: `stroke-dasharray: 176 352`;\n  // The roundcap on the arc makes it extend slightly past where it should, so we need to adjust it by a few pts.\n  const baseDasharrayScore = Math.max(0, props.score * 352 - 2);\n  const baseStrokeDasharray = `${baseDasharrayScore} 352`;\n  const delta = Math.abs(baseScore - score);\n  const deltaDasharrayScore = Math.max(0, (delta / 100) * 352 - 2);\n  const deltaStrokeDasharray = `${deltaDasharrayScore} 352`;\n  const deltaTransform = `rotate(${(Math.min(score, baseScore) / 100) * 360}deg)`;\n  const indicatorTransform = `rotate(${props.score * 360}deg)`;\n\n  return (\n    <div className={clsx('gauge', `gauge--${label}`)}>\n      <div className=\"gauge-arc\">\n        <svg viewBox=\"0 0 120 120\">\n          <circle\n            className=\"gauge-arc__arc\"\n            transform=\"rotate(-90 60 60)\"\n            r=\"56\"\n            cx=\"60\"\n            cy=\"60\"\n            style={{strokeDasharray: baseStrokeDasharray}}\n          />\n        </svg>\n        <div\n          className=\"gauge-arc__delta-wrapper\"\n          style={{transform: deltaTransform, display: deltaDasharrayScore < 1 ? 'none' : 'block'}}\n        >\n          <svg viewBox=\"0 0 120 120\">\n            <circle\n              className=\"gauge-arc__arc\"\n              transform=\"rotate(-90 60 60)\"\n              r=\"56\"\n              cx=\"60\"\n              cy=\"60\"\n              style={{strokeDasharray: deltaStrokeDasharray}}\n            />\n          </svg>\n        </div>\n        <div className=\"gauge-arc__indicator-wrapper\" style={{transform: indicatorTransform}}>\n          <div className=\"gauge-arc__indicator\" />\n        </div>\n      </div>\n      <span>{score}</span>\n    </div>\n  );\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport clsx from 'clsx';\n\nimport * as _ from '@lhci/utils/src/lodash.js';\nimport './pwa-gauge.css';\n\n// For SVG to function properly, we need to use the real attribtues that preact doesn't set.\n/* eslint-disable react/no-unknown-property */\n\n/** @typedef {{optimized: boolean, installable: boolean, fastAndReliable: boolean}} PWABadgeStatus */\n\n/** @param {{deltaType: import('@lhci/utils/src/audit-diff-finder').DiffLabel}} props */\nexport const FastReliableIcon = props => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 24 24\"\n      class={`pwa-icon pwa-icon--${props.deltaType}`}\n    >\n      <g fill-rule=\"nonzero\" fill=\"none\">\n        <circle class={`pwa-icon__background`} cx=\"12\" cy=\"12\" r=\"12\" />\n        <path\n          d=\"M12 4.3l6.3 2.8v4.2c0 3.88-2.69 7.52-6.3 8.4-3.61-.88-6.3-4.51-6.3-8.4V7.1L12 4.3zm-.56 12.88l3.3-5.79.04-.08c.05-.1.01-.29-.26-.29h-1.96l.56-3.92h-.56L9.3 12.82c0 .03.07-.12-.03.07-.11.2-.12.37.2.37h1.97l-.56 3.92h.56z\"\n          fill=\"#FFF\"\n        />\n      </g>\n    </svg>\n  );\n};\n\n/** @param {{deltaType: import('@lhci/utils/src/audit-diff-finder').DiffLabel}} props */\nexport const InstallableIcon = props => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 24 24\"\n      class={`pwa-icon pwa-icon--${props.deltaType}`}\n    >\n      <g fill-rule=\"nonzero\" fill=\"none\">\n        <circle class={`pwa-icon__background`} cx=\"12\" cy=\"12\" r=\"12\" />\n        <path\n          d=\"M12 5a7 7 0 1 0 0 14 7 7 0 0 0 0-14zm3.5 7.7h-2.8v2.8h-1.4v-2.8H8.5v-1.4h2.8V8.5h1.4v2.8h2.8v1.4z\"\n          fill=\"#FFF\"\n        />\n      </g>\n    </svg>\n  );\n};\n\n/** @param {{deltaType: import('@lhci/utils/src/audit-diff-finder').DiffLabel}} props */\nexport const OptimizedIcon = props => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 24 24\"\n      class={`pwa-icon pwa-icon--${props.deltaType}`}\n    >\n      <g fill=\"none\" fill-rule=\"evenodd\">\n        <rect class={`pwa-icon__background`} width=\"24\" height=\"24\" rx=\"12\" />\n        <path d=\"M5 5h14v14H5z\" />\n        <path\n          fill=\"#FFF\"\n          d=\"M12 15.07l3.6 2.18-.95-4.1 3.18-2.76-4.2-.36L12 6.17l-1.64 3.86-4.2.36 3.2 2.76-.96 4.1z\"\n        />\n      </g>\n    </svg>\n  );\n};\n\n/**\n *\n * @param {PWABadgeStatus} base\n * @param {PWABadgeStatus} compare\n * @param {keyof PWABadgeStatus} key\n * @return {import('@lhci/utils/src/audit-diff-finder').DiffLabel}\n */\nexport function getBadgeDiffType(base, compare, key) {\n  if (base[key] === compare[key]) return 'neutral';\n  if (compare[key]) return 'improvement';\n  return 'regression';\n}\n\n/** @param {LH.Result} lhr @return {PWABadgeStatus} */\nexport function getBadgeStatus(lhr) {\n  const pwaCategory = lhr.categories.pwa;\n  const auditsByCategory = _.groupIntoMap(pwaCategory.auditRefs, ref => ref.group);\n  /** @param {LH.CategoryResult['auditRefs']} [refs] */\n  const hasEveryPass = (refs = []) =>\n    refs.map(ref => lhr.audits[ref.id]).every(audit => audit && audit.score === 1);\n  return {\n    optimized: hasEveryPass(auditsByCategory.get('pwa-optimized') || []),\n    installable: hasEveryPass(auditsByCategory.get('pwa-installable') || []),\n    fastAndReliable: hasEveryPass(auditsByCategory.get('pwa-fast-reliable') || []),\n  };\n}\n\n/** @param {{status: PWABadgeStatus}} props */\nexport const PWAGauge = props => {\n  const {status} = props;\n  const all = status.optimized && status.installable && status.fastAndReliable;\n\n  return (\n    <div\n      className={clsx('pwa-gauge', {\n        'pwa-gauge--all': all,\n        'pwa-gauge--pwa-optimized': !all && status.optimized,\n        'pwa-gauge--pwa-installable': !all && status.installable,\n        'pwa-gauge--pwa-fast-reliable': !all && status.fastAndReliable,\n      })}\n    >\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 60\">\n        <defs>\n          <linearGradient\n            id=\"pwa-gauge__check-circle__gradient\"\n            x1=\"50%\"\n            y1=\"0%\"\n            x2=\"50%\"\n            y2=\"100%\"\n          >\n            <stop stop-color=\"#00C852\" offset=\"0%\" />\n            <stop stop-color=\"#009688\" offset=\"100%\" />\n          </linearGradient>\n          <linearGradient\n            id=\"pwa-gauge__installable__shadow-gradient\"\n            x1=\"76.056%\"\n            x2=\"24.111%\"\n            y1=\"82.995%\"\n            y2=\"24.735%\"\n          >\n            <stop stop-color=\"#A5D6A7\" offset=\"0%\" />\n            <stop stop-color=\"#80CBC4\" offset=\"100%\" />\n          </linearGradient>\n          <linearGradient\n            id=\"pwa-gauge__fast-reliable__shadow-gradient\"\n            x1=\"76.056%\"\n            y1=\"82.995%\"\n            x2=\"25.678%\"\n            y2=\"26.493%\"\n          >\n            <stop stop-color=\"#64B5F6\" offset=\"0%\" />\n            <stop stop-color=\"#2979FF\" offset=\"100%\" />\n          </linearGradient>\n\n          <g id=\"pwa-gauge__fast-reliable-badge\">\n            <circle fill=\"#FFFFFF\" cx=\"10\" cy=\"10\" r=\"10\" />\n            <path\n              fill=\"#304FFE\"\n              d=\"M10 3.58l5.25 2.34v3.5c0 3.23-2.24 6.26-5.25 7-3.01-.74-5.25-3.77-5.25-7v-3.5L10 3.58zm-.47 10.74l2.76-4.83.03-.07c.04-.08 0-.24-.22-.24h-1.64l.47-3.26h-.47l-2.7 4.77c-.02.01.05-.1-.04.05-.09.16-.1.31.18.31h1.63l-.47 3.27h.47z\"\n            />\n          </g>\n          <g id=\"pwa-gauge__installable-badge\">\n            <circle fill=\"#FFFFFF\" cx=\"10\" cy=\"10\" r=\"10\" />\n            <path\n              fill=\"#009688\"\n              d=\"M10 4.167A5.835 5.835 0 0 0 4.167 10 5.835 5.835 0 0 0 10 15.833 5.835 5.835 0 0 0 15.833 10 5.835 5.835 0 0 0 10 4.167zm2.917 6.416h-2.334v2.334H9.417v-2.334H7.083V9.417h2.334V7.083h1.166v2.334h2.334v1.166z\"\n            />\n          </g>\n        </defs>\n\n        <g stroke=\"none\" fill-rule=\"nonzero\">\n          {/* Background and PWA logo (color by default) */}\n          <circle class=\"pwa-gauge__disc\" cx=\"30\" cy=\"30\" r=\"30\" />\n          <g class=\"pwa-gauge__logo\">\n            <path\n              class=\"pwa-gauge__logo--secondary-color\"\n              d=\"M35.66 19.39l.7-1.75h2L37.4 15 38.6 12l3.4 9h-2.51l-.58-1.61z\"\n            />\n            <path\n              class=\"pwa-gauge__logo--primary-color\"\n              d=\"M33.52 21l3.65-9h-2.42l-2.5 5.82L30.5 12h-1.86l-1.9 5.82-1.35-2.65-1.21 3.72L25.4 21h2.38l1.72-5.2 1.64 5.2z\"\n            />\n            <path\n              class=\"pwa-gauge__logo--secondary-color\"\n              fill-rule=\"nonzero\"\n              d=\"M20.3 17.91h1.48c.45 0 .85-.05 1.2-.15l.39-1.18 1.07-3.3a2.64 2.64 0 0 0-.28-.37c-.55-.6-1.36-.91-2.42-.91H18v9h2.3V17.9zm1.96-3.84c.22.22.33.5.33.87 0 .36-.1.65-.29.87-.2.23-.59.35-1.15.35h-.86v-2.41h.87c.52 0 .89.1 1.1.32z\"\n            />\n          </g>\n\n          {/* No badges. */}\n          <rect\n            class=\"pwa-gauge__component pwa-gauge__na-line\"\n            fill=\"#FFFFFF\"\n            x=\"20\"\n            y=\"32\"\n            width=\"20\"\n            height=\"4\"\n            rx=\"2\"\n          />\n\n          {/* Just fast and reliable. */}\n          <g\n            class=\"pwa-gauge__component pwa-gauge__fast-reliable-badge\"\n            transform=\"translate(20, 29)\"\n          >\n            <path\n              fill=\"url(#pwa-gauge__fast-reliable__shadow-gradient)\"\n              d=\"M33.63 19.49A30 30 0 0 1 16.2 30.36L3 17.14 17.14 3l16.49 16.49z\"\n            />\n            <use href=\"#pwa-gauge__fast-reliable-badge\" />\n          </g>\n\n          {/* Just installable. */}\n          <g\n            class=\"pwa-gauge__component pwa-gauge__installable-badge\"\n            transform=\"translate(20, 29)\"\n          >\n            <path\n              fill=\"url(#pwa-gauge__installable__shadow-gradient)\"\n              d=\"M33.629 19.487c-4.272 5.453-10.391 9.39-17.415 10.869L3 17.142 17.142 3 33.63 19.487z\"\n            />\n            <use href=\"#pwa-gauge__installable-badge\" />\n          </g>\n\n          {/* Fast and reliable and installable. */}\n          <g class=\"pwa-gauge__component pwa-gauge__fast-reliable-installable-badges\">\n            <g transform=\"translate(8, 29)\">\n              {/* fast and reliable */}\n              <path\n                fill=\"url(#pwa-gauge__fast-reliable__shadow-gradient)\"\n                d=\"M16.321 30.463L3 17.143 17.142 3l22.365 22.365A29.864 29.864 0 0 1 22 31c-1.942 0-3.84-.184-5.679-.537z\"\n              />\n              <use href=\"#pwa-gauge__fast-reliable-badge\" />\n            </g>\n            <g transform=\"translate(32, 29)\">\n              {/* installable */}\n              <path\n                fill=\"url(#pwa-gauge__installable__shadow-gradient)\"\n                d=\"M25.982 11.84a30.107 30.107 0 0 1-13.08 15.203L3 17.143 17.142 3l8.84 8.84z\"\n              />\n              <use href=\"#pwa-gauge__installable-badge\" />\n            </g>\n          </g>\n\n          {/* Full PWA. */}\n          <g class=\"pwa-gauge__component pwa-gauge__check-circle\" transform=\"translate(18, 28)\">\n            <circle fill=\"#FFFFFF\" cx=\"12\" cy=\"12\" r=\"12\" />\n            <path\n              fill=\"url(#pwa-gauge__check-circle__gradient)\"\n              d=\"M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n            />\n          </g>\n        </g>\n      </svg>\n    </div>\n  );\n};\n", "/**\n * @license Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport './score-delta-badge.css';\nimport {getDiffLabel} from '@lhci/utils/src/audit-diff-finder';\nimport clsx from 'clsx';\n\n/** @param {{diff: LHCI.NumericAuditDiff, className?: string}} props */\nexport const ScoreDeltaBadge = props => {\n  const delta = Math.round((props.diff.compareValue - props.diff.baseValue) * 100);\n  return (\n    <div\n      className={clsx(\n        'score-delta-badge',\n        `score-delta-badge--${getDiffLabel(props.diff)}`,\n        props.className\n      )}\n    >\n      {delta < 0 ? delta : `+${delta}`}\n    </div>\n  );\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport './lhr-comparison-scores.css';\nimport clsx from 'clsx';\n\nimport {Gauge} from '../../components/gauge';\nimport {\n  PWAGauge,\n  getBadgeStatus,\n  FastReliableIcon,\n  InstallableIcon,\n  OptimizedIcon,\n  getBadgeDiffType,\n} from '../../components/pwa-gauge';\nimport {ScoreDeltaBadge} from '../../components/score-delta-badge';\n\n/** @param {{lhr: LH.Result, baseLhr?: LH.Result, categoryId: string}} props */\nconst StandardScoreItem = props => {\n  const {lhr, baseLhr, categoryId} = props;\n  const category = lhr.categories[categoryId];\n  const baseCategory = baseLhr && baseLhr.categories[categoryId];\n  /** @type {LHCI.NumericAuditDiff|undefined} */\n  const diff = baseCategory && {\n    auditId: '',\n    type: 'score',\n    baseValue: baseCategory.score,\n    compareValue: category.score,\n  };\n\n  return (\n    <div key={categoryId} className={clsx('lhr-comparison-scores-item')}>\n      <Gauge score={category.score} diff={diff} />\n      <div className=\"lhr-comparison-scores-item__label\">{category.title}</div>\n      {diff ? <ScoreDeltaBadge diff={diff} className=\"lhr-comparison-scores-item__delta\" /> : null}\n    </div>\n  );\n};\n\n/** @param {{lhr: LH.Result, baseLhr?: LH.Result, categoryId: string}} props */\nconst PwaScoreItem = props => {\n  const {lhr, baseLhr, categoryId} = props;\n  const compareStatus = getBadgeStatus(lhr);\n  let deltaEl;\n  const overallStatus = 'neutral';\n\n  if (baseLhr) {\n    const baseStatus = getBadgeStatus(baseLhr);\n    const diffTypes = {\n      fastAndReliable: getBadgeDiffType(baseStatus, compareStatus, 'fastAndReliable'),\n      installable: getBadgeDiffType(baseStatus, compareStatus, 'installable'),\n      optimized: getBadgeDiffType(baseStatus, compareStatus, 'optimized'),\n    };\n    const allEqual = Object.values(diffTypes).every(type => type === 'neutral');\n\n    const individualBadges = (\n      <Fragment>\n        {diffTypes.fastAndReliable === 'neutral' ? (\n          <Fragment />\n        ) : (\n          <FastReliableIcon deltaType={diffTypes.fastAndReliable} />\n        )}\n        {diffTypes.installable === 'neutral' ? (\n          <Fragment />\n        ) : (\n          <InstallableIcon deltaType={diffTypes.installable} />\n        )}\n        {diffTypes.optimized === 'neutral' ? (\n          <Fragment />\n        ) : (\n          <OptimizedIcon deltaType={diffTypes.optimized} />\n        )}\n      </Fragment>\n    );\n\n    deltaEl = (\n      <div className={clsx('lhr-comparison-scores-item__delta')}>\n        {allEqual ? '-' : individualBadges}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      key={categoryId}\n      className={clsx(\n        'lhr-comparison-scores-item',\n        `lhr-comparison-scores-item--pwa`,\n        `lhr-comparison-scores-item--${overallStatus}`\n      )}\n    >\n      <PWAGauge status={compareStatus} />\n      <div className=\"lhr-comparison-scores-item__label\">PWA</div>\n      {deltaEl}\n    </div>\n  );\n};\n\n/**\n * @param {{lhr?: LH.Result, baseLhr?: LH.Result}} props\n */\nexport const LhrComparisonScores = props => {\n  const {lhr, baseLhr} = props;\n  if (!lhr) return null;\n\n  const compareCategoryIds = Object.keys(lhr.categories);\n  const baseCategoryIds = baseLhr ? Object.keys(baseLhr.categories) : compareCategoryIds;\n  const categoryIds = compareCategoryIds.filter(id => baseCategoryIds.includes(id));\n\n  return (\n    <div className=\"lhr-comparison-scores\">\n      {categoryIds\n        .sort((idA, idB) => {\n          const sortKeyA = idA === 'pwa' ? Infinity : categoryIds.indexOf(idA);\n          const sortKeyB = idB === 'pwa' ? Infinity : categoryIds.indexOf(idB);\n          return sortKeyA - sortKeyB;\n        })\n        .map(id => {\n          return id === 'pwa' ? (\n            <PwaScoreItem lhr={lhr} baseLhr={baseLhr} categoryId={id} />\n          ) : (\n            <StandardScoreItem lhr={lhr} baseLhr={baseLhr} categoryId={id} />\n          );\n        })}\n    </div>\n  );\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport './audit-group.css';\nimport {Paper} from '../../../components/paper';\nimport {ScoreIcon} from '../../../components/score-icon';\nimport clsx from 'clsx';\nimport {AuditDiff} from './audit-diff';\nimport {useState} from 'preact/hooks';\nimport {openLhrInClassicViewer} from '../../../components/lhr-viewer-link';\n\n/** @typedef {{key?: string, group: {id: string, title: string}, selectedAuditId: string|null, setSelectedAuditId: (id: string|null) => void, pairs: Array<LHCI.AuditPair>, baseLhr?: LH.Result, showAsNarrow: boolean, showAsUnchanged: boolean}} Props */\n\n/** @param {Props & {showAsBigPicture: boolean, setShowAsBigPicture: (b: boolean) => void}} props */\nconst MetricsTabHeader = props => {\n  return (\n    <div className=\"audit-group__big-picture-tabs\">\n      <span\n        className={clsx('big-picture-tabs__tab', {\n          'big-picture-tabs__tab--selected': props.showAsBigPicture,\n        })}\n        onClick={() => props.setShowAsBigPicture(true)}\n      >\n        Overview\n      </span>\n      <span\n        className={clsx('big-picture-tabs__tab', {\n          'big-picture-tabs__tab--selected': !props.showAsBigPicture,\n        })}\n        onClick={() => props.setShowAsBigPicture(false)}\n      >\n        Magnified\n      </span>\n    </div>\n  );\n};\n\n/** @param {Props & {showAsBigPicture: boolean}} props */\nconst ChangedAuditList = props => {\n  return (\n    <Fragment>\n      {props.pairs.map(pair => {\n        const {audit} = pair;\n\n        // Only metrics are allowed to display the numericValue diff in this view.\n        if (props.group.id !== 'metrics') {\n          pair = {...pair, diffs: pair.diffs.filter(diff => diff.type !== 'numericValue')};\n        }\n\n        return (\n          <div\n            key={audit.id}\n            className={clsx('audit-group__audit')}\n            onClick={() => props.setSelectedAuditId(audit.id || null)}\n          >\n            <div className=\"audit-group__audit-score\">\n              <ScoreIcon score={audit.score || 0} />\n            </div>\n            <div className=\"audit-group__audit-title\">{audit.title}</div>\n            <div className=\"audit-group__audit-diff\">\n              <AuditDiff\n                pair={pair}\n                showAsBigPicture={props.showAsBigPicture}\n                showAsNarrow={props.showAsNarrow}\n              />\n            </div>\n          </div>\n        );\n      })}\n    </Fragment>\n  );\n};\n\n/** @param {Props & {expanded: boolean}} props */\nconst UnchangedAuditList = props => {\n  const baseLhr = props.baseLhr;\n  if (!baseLhr || !props.expanded) return <Fragment />;\n\n  return (\n    <Fragment>\n      {props.pairs.map(pair => {\n        const {audit} = pair;\n\n        return (\n          <div\n            key={audit.id}\n            className={clsx('audit-group__audit', 'audit-group__audit--unchanged')}\n            onClick={e => {\n              e.preventDefault();\n              e.stopPropagation();\n              openLhrInClassicViewer(baseLhr);\n            }}\n          >\n            <div className=\"audit-group__audit-score\">\n              <ScoreIcon score={audit.score || 0} />\n            </div>\n            <div className=\"audit-group__audit-title\">{audit.title}</div>\n            <div className=\"audit-group__audit-diff\">Open Report</div>\n          </div>\n        );\n      })}\n    </Fragment>\n  );\n};\n\n/** @param {Props} props */\nexport const AuditGroup = props => {\n  const {group} = props;\n  const [showAsBigPicture, setShowAsBigPicture] = useState(group.id === 'metrics');\n  const [expanded, setExpanded] = useState(false);\n\n  return (\n    <Paper\n      className={clsx('audit-group', {\n        'audit-group--expanded': expanded,\n        'audit-group--unchanged': props.showAsUnchanged,\n      })}\n    >\n      <div className=\"audit-group__header\" onClick={() => setExpanded(!expanded)}>\n        <div className=\"audit-group__title\">\n          {group.title} {props.showAsUnchanged ? `(${props.pairs.length})` : ''}\n        </div>\n        <div className=\"audit-group__expand-toggle\">\n          <i className=\"material-icons\">chevron_right</i>\n        </div>\n        {group.id === 'metrics' && !props.showAsNarrow ? (\n          <MetricsTabHeader\n            {...props}\n            showAsBigPicture={showAsBigPicture}\n            setShowAsBigPicture={setShowAsBigPicture}\n          />\n        ) : (\n          <Fragment />\n        )}\n      </div>\n      <div className=\"audit-group__audits\">\n        {props.showAsUnchanged ? (\n          <UnchangedAuditList {...props} expanded={expanded} />\n        ) : (\n          <ChangedAuditList {...props} showAsBigPicture={showAsBigPicture} />\n        )}\n      </div>\n    </Paper>\n  );\n};\n", "/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport './lhr-comparison-legend.css';\nimport {ScoreIcon} from '../../components/score-icon';\n\nexport const LhrComparisonLegend = () => {\n  return (\n    <div className=\"lhr-comparison-legend\">\n      <ScoreIcon score={0} />\n      <span className=\"lhr-comparison-legend__label\">0-49</span>\n      <ScoreIcon score={0.5} />\n      <span className=\"lhr-comparison-legend__label\">50-89</span>\n      <ScoreIcon score={1} />\n      <span className=\"lhr-comparison-legend__label\">90-100</span>\n      <i className=\"lhr-comparison-legend__chip lhr-comparison-legend__chip--regression\" />\n      <span className=\"lhr-comparison-legend__label\">Regression</span>\n      <i className=\"lhr-comparison-legend__chip lhr-comparison-legend__chip--improvement\" />\n      <span className=\"lhr-comparison-legend__label\">Improvement</span>\n    </div>\n  );\n};\n", "/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Check if two objects have a different shape\n * @param {object} a\n * @param {object} b\n * @returns {boolean}\n */\nexport function shallowDiffers(a, b) {\n\tfor (let i in a) if (i !== '__source' && !(i in b)) return true;\n\tfor (let i in b) if (i !== '__source' && a[i] !== b[i]) return true;\n\treturn false;\n}\n\n/**\n * Check if two values are the same value\n * @param {*} x\n * @param {*} y\n * @returns {boolean}\n */\nexport function is(x, y) {\n\treturn (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\n", "import { Component } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nexport function PureComponent(p) {\n\tthis.props = p;\n}\nPureComponent.prototype = new Component();\n// Some third-party libraries check if this property is present\nPureComponent.prototype.isPureReactComponent = true;\nPureComponent.prototype.shouldComponentUpdate = function (props, state) {\n\treturn shallowDiffers(this.props, props) || shallowDiffers(this.state, state);\n};\n", "import { createElement } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionComponent}\n */\nexport function memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref == nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\n\t\tif (!comparer) {\n\t\t\treturn shallowDiffers(this.props, nextProps);\n\t\t}\n\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn createElement(c, props);\n\t}\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed._forwarded = true;\n\treturn Memoed;\n}\n", "import { options } from 'preact';\nimport { assign } from './util';\n\nlet oldDiffHook = options._diff;\noptions._diff = vnode => {\n\tif (vnode.type && vnode.type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\tif (oldDiffHook) oldDiffHook(vnode);\n};\n\nexport const REACT_FORWARD_SYMBOL =\n\t(typeof Symbol != 'undefined' &&\n\t\tSymbol.for &&\n\t\tSymbol.for('react.forward_ref')) ||\n\t0xf47;\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./index').ForwardFn} fn\n * @returns {import('./internal').FunctionComponent}\n */\nexport function forwardRef(fn) {\n\tfunction Forwarded(props) {\n\t\tlet clone = assign({}, props);\n\t\tdelete clone.ref;\n\t\treturn fn(clone, props.ref || null);\n\t}\n\n\t// mobx-react checks for this being present\n\tForwarded.$$typeof = REACT_FORWARD_SYMBOL;\n\t// mobx-react heavily relies on implementation details.\n\t// It expects an object here with a `render` property,\n\t// and prototype.render will fail. Without this\n\t// mobx-react throws.\n\tForwarded.render = Forwarded;\n\n\tForwarded.prototype.isReactComponent = Forwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n", "import { toChildArray } from 'preact';\n\nconst mapFn = (children, fn) => {\n\tif (children == null) return null;\n\treturn toChildArray(toChildArray(children).map(fn));\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nexport const Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tconst normalized = toChildArray(children);\n\t\tif (normalized.length !== 1) throw 'Children.only';\n\t\treturn normalized[0];\n\t},\n\ttoArray: toChildArray\n};\n", "import { Component, createElement, options, Fragment } from 'preact';\nimport { MODE_HYDRATE } from '../../src/constants';\nimport { assign } from './util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function (error, newVNode, oldVNode, errorInfo) {\n\tif (error.then) {\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; (vnode = vnode._parent); ) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\tif (newVNode._dom == null) {\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t}\n\t\t\t\t// Don't call oldCatchError if we found a Suspense\n\t\t\t\treturn component._childDidSuspend(error, newVNode);\n\t\t\t}\n\t\t}\n\t}\n\toldCatchError(error, newVNode, oldVNode, errorInfo);\n};\n\nconst oldUnmount = options.unmount;\noptions.unmount = function (vnode) {\n\t/** @type {import('./internal').Component} */\n\tconst component = vnode._component;\n\tif (component && component._onResolve) {\n\t\tcomponent._onResolve();\n\t}\n\n\t// if the component is still hydrating\n\t// most likely it is because the component is suspended\n\t// we set the vnode.type as `null` so that it is not a typeof function\n\t// so the unmount will remove the vnode._dom\n\tif (component && vnode._flags & MODE_HYDRATE) {\n\t\tvnode.type = null;\n\t}\n\n\tif (oldUnmount) oldUnmount(vnode);\n};\n\nfunction detachedClone(vnode, detachedParent, parentDom) {\n\tif (vnode) {\n\t\tif (vnode._component && vnode._component.__hooks) {\n\t\t\tvnode._component.__hooks._list.forEach(effect => {\n\t\t\t\tif (typeof effect._cleanup == 'function') effect._cleanup();\n\t\t\t});\n\n\t\t\tvnode._component.__hooks = null;\n\t\t}\n\n\t\tvnode = assign({}, vnode);\n\t\tif (vnode._component != null) {\n\t\t\tif (vnode._component._parentDom === parentDom) {\n\t\t\t\tvnode._component._parentDom = detachedParent;\n\t\t\t}\n\t\t\tvnode._component = null;\n\t\t}\n\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tdetachedClone(child, detachedParent, parentDom)\n\t\t\t);\n\t}\n\n\treturn vnode;\n}\n\nfunction removeOriginal(vnode, detachedParent, originalParent) {\n\tif (vnode && originalParent) {\n\t\tvnode._original = null;\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tremoveOriginal(child, detachedParent, originalParent)\n\t\t\t);\n\n\t\tif (vnode._component) {\n\t\t\tif (vnode._component._parentDom === detachedParent) {\n\t\t\t\tif (vnode._dom) {\n\t\t\t\t\toriginalParent.appendChild(vnode._dom);\n\t\t\t\t}\n\t\t\t\tvnode._component._force = true;\n\t\t\t\tvnode._component._parentDom = originalParent;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn vnode;\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense() {\n\t// we do not call super here to golf some bytes...\n\tthis._pendingSuspensionCount = 0;\n\tthis._suspenders = null;\n\tthis._detachOnNextRender = null;\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {Promise} promise The thrown promise\n * @param {import('./internal').VNode<any, any>} suspendingVNode The suspending component\n */\nSuspense.prototype._childDidSuspend = function (promise, suspendingVNode) {\n\tconst suspendingComponent = suspendingVNode._component;\n\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\n\tif (c._suspenders == null) {\n\t\tc._suspenders = [];\n\t}\n\tc._suspenders.push(suspendingComponent);\n\n\tconst resolve = suspended(c._vnode);\n\n\tlet resolved = false;\n\tconst onResolved = () => {\n\t\tif (resolved) return;\n\n\t\tresolved = true;\n\t\tsuspendingComponent._onResolve = null;\n\n\t\tif (resolve) {\n\t\t\tresolve(onSuspensionComplete);\n\t\t} else {\n\t\t\tonSuspensionComplete();\n\t\t}\n\t};\n\n\tsuspendingComponent._onResolve = onResolved;\n\n\tconst onSuspensionComplete = () => {\n\t\tif (!--c._pendingSuspensionCount) {\n\t\t\t// If the suspension was during hydration we don't need to restore the\n\t\t\t// suspended children into the _children array\n\t\t\tif (c.state._suspended) {\n\t\t\t\tconst suspendedVNode = c.state._suspended;\n\t\t\t\tc._vnode._children[0] = removeOriginal(\n\t\t\t\t\tsuspendedVNode,\n\t\t\t\t\tsuspendedVNode._component._parentDom,\n\t\t\t\t\tsuspendedVNode._component._originalParentDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tc.setState({ _suspended: (c._detachOnNextRender = null) });\n\n\t\t\tlet suspended;\n\t\t\twhile ((suspended = c._suspenders.pop())) {\n\t\t\t\tsuspended.forceUpdate();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * We do not set `suspended: true` during hydration because we want the actual markup\n\t * to remain on screen and hydrate it when the suspense actually gets resolved.\n\t * While in non-hydration cases the usual fallback -> component flow would occour.\n\t */\n\tif (\n\t\t!c._pendingSuspensionCount++ &&\n\t\t!(suspendingVNode._flags & MODE_HYDRATE)\n\t) {\n\t\tc.setState({ _suspended: (c._detachOnNextRender = c._vnode._children[0]) });\n\t}\n\tpromise.then(onResolved, onResolved);\n};\n\nSuspense.prototype.componentWillUnmount = function () {\n\tthis._suspenders = [];\n};\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {import('./internal').SuspenseComponent[\"props\"]} props\n * @param {import('./internal').SuspenseState} state\n */\nSuspense.prototype.render = function (props, state) {\n\tif (this._detachOnNextRender) {\n\t\t// When the Suspense's _vnode was created by a call to createVNode\n\t\t// (i.e. due to a setState further up in the tree)\n\t\t// it's _children prop is null, in this case we \"forget\" about the parked vnodes to detach\n\t\tif (this._vnode._children) {\n\t\t\tconst detachedParent = document.createElement('div');\n\t\t\tconst detachedComponent = this._vnode._children[0]._component;\n\t\t\tthis._vnode._children[0] = detachedClone(\n\t\t\t\tthis._detachOnNextRender,\n\t\t\t\tdetachedParent,\n\t\t\t\t(detachedComponent._originalParentDom = detachedComponent._parentDom)\n\t\t\t);\n\t\t}\n\n\t\tthis._detachOnNextRender = null;\n\t}\n\n\t// Wrap fallback tree in a VNode that prevents itself from being marked as aborting mid-hydration:\n\t/** @type {import('./internal').VNode} */\n\tconst fallback =\n\t\tstate._suspended && createElement(Fragment, null, props.fallback);\n\tif (fallback) fallback._flags &= ~MODE_HYDRATE;\n\n\treturn [\n\t\tcreateElement(Fragment, null, state._suspended ? null : props.children),\n\t\tfallback\n\t];\n};\n\n/**\n * Checks and calls the parent component's _suspended method, passing in the\n * suspended vnode. This is a way for a parent (e.g. SuspenseList) to get notified\n * that one of its children/descendants suspended.\n *\n * The parent MAY return a callback. The callback will get called when the\n * suspension resolves, notifying the parent of the fact.\n * Moreover, the callback gets function `unsuspend` as a parameter. The resolved\n * child descendant will not actually get unsuspended until `unsuspend` gets called.\n * This is a way for the parent to delay unsuspending.\n *\n * If the parent does not return a callback then the resolved vnode\n * gets unsuspended immediately when it resolves.\n *\n * @param {import('./internal').VNode} vnode\n * @returns {((unsuspend: () => void) => void)?}\n */\nexport function suspended(vnode) {\n\t/** @type {import('./internal').Component} */\n\tlet component = vnode._parent._component;\n\treturn component && component._suspended && component._suspended(vnode);\n}\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component;\n\tlet error;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\texports => {\n\t\t\t\t\tcomponent = exports.default || exports;\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\terror = e;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!component) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn createElement(component, props);\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n", "import { Component, toChildArray } from 'preact';\nimport { suspended } from './suspense.js';\n\n// Indexes to linked list nodes (nodes are stored as arrays to save bytes).\nconst SUSPENDED_COUNT = 0;\nconst RESOLVED_COUNT = 1;\nconst NEXT_NODE = 2;\n\n// Having custom inheritance instead of a class here saves a lot of bytes.\nexport function SuspenseList() {\n\tthis._next = null;\n\tthis._map = null;\n}\n\n// Mark one of child's earlier suspensions as resolved.\n// Some pending callbacks may become callable due to this\n// (e.g. the last suspended descendant gets resolved when\n// revealOrder === 'together'). Process those callbacks as well.\nconst resolve = (list, child, node) => {\n\tif (++node[RESOLVED_COUNT] === node[SUSPENDED_COUNT]) {\n\t\t// The number a child (or any of its descendants) has been suspended\n\t\t// matches the number of times it's been resolved. Therefore we\n\t\t// mark the child as completely resolved by deleting it from ._map.\n\t\t// This is used to figure out when *all* children have been completely\n\t\t// resolved when revealOrder is 'together'.\n\t\tlist._map.delete(child);\n\t}\n\n\t// If revealOrder is falsy then we can do an early exit, as the\n\t// callbacks won't get queued in the node anyway.\n\t// If revealOrder is 'together' then also do an early exit\n\t// if all suspended descendants have not yet been resolved.\n\tif (\n\t\t!list.props.revealOrder ||\n\t\t(list.props.revealOrder[0] === 't' && list._map.size)\n\t) {\n\t\treturn;\n\t}\n\n\t// Walk the currently suspended children in order, calling their\n\t// stored callbacks on the way. Stop if we encounter a child that\n\t// has not been completely resolved yet.\n\tnode = list._next;\n\twhile (node) {\n\t\twhile (node.length > 3) {\n\t\t\tnode.pop()();\n\t\t}\n\t\tif (node[RESOLVED_COUNT] < node[SUSPENDED_COUNT]) {\n\t\t\tbreak;\n\t\t}\n\t\tlist._next = node = node[NEXT_NODE];\n\t}\n};\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspenseList.prototype = new Component();\n\nSuspenseList.prototype._suspended = function (child) {\n\tconst list = this;\n\tconst delegated = suspended(list._vnode);\n\n\tlet node = list._map.get(child);\n\tnode[SUSPENDED_COUNT]++;\n\n\treturn unsuspend => {\n\t\tconst wrappedUnsuspend = () => {\n\t\t\tif (!list.props.revealOrder) {\n\t\t\t\t// Special case the undefined (falsy) revealOrder, as there\n\t\t\t\t// is no need to coordinate a specific order or unsuspends.\n\t\t\t\tunsuspend();\n\t\t\t} else {\n\t\t\t\tnode.push(unsuspend);\n\t\t\t\tresolve(list, child, node);\n\t\t\t}\n\t\t};\n\t\tif (delegated) {\n\t\t\tdelegated(wrappedUnsuspend);\n\t\t} else {\n\t\t\twrappedUnsuspend();\n\t\t}\n\t};\n};\n\nSuspenseList.prototype.render = function (props) {\n\tthis._next = null;\n\tthis._map = new Map();\n\n\tconst children = toChildArray(props.children);\n\tif (props.revealOrder && props.revealOrder[0] === 'b') {\n\t\t// If order === 'backwards' (or, well, anything starting with a 'b')\n\t\t// then flip the child list around so that the last child will be\n\t\t// the first in the linked list.\n\t\tchildren.reverse();\n\t}\n\t// Build the linked list. Iterate through the children in reverse order\n\t// so that `_next` points to the first linked list node to be resolved.\n\tfor (let i = children.length; i--; ) {\n\t\t// Create a new linked list node as an array of form:\n\t\t// \t[suspended_count, resolved_count, next_node]\n\t\t// where suspended_count and resolved_count are numeric counters for\n\t\t// keeping track how many times a node has been suspended and resolved.\n\t\t//\n\t\t// Note that suspended_count starts from 1 instead of 0, so we can block\n\t\t// processing callbacks until componentDidMount has been called. In a sense\n\t\t// node is suspended at least until componentDidMount gets called!\n\t\t//\n\t\t// Pending callbacks are added to the end of the node:\n\t\t// \t[suspended_count, resolved_count, next_node, callback_0, callback_1, ...]\n\t\tthis._map.set(children[i], (this._next = [1, 0, this._next]));\n\t}\n\treturn props.children;\n};\n\nSuspenseList.prototype.componentDidUpdate =\n\tSuspenseList.prototype.componentDidMount = function () {\n\t\t// Iterate through all children after mounting for two reasons:\n\t\t// 1. As each node[SUSPENDED_COUNT] starts from 1, this iteration increases\n\t\t//    each node[RELEASED_COUNT] by 1, therefore balancing the counters.\n\t\t//    The nodes can now be completely consumed from the linked list.\n\t\t// 2. Handle nodes that might have gotten resolved between render and\n\t\t//    componentDidMount.\n\t\tthis._map.forEach((node, child) => {\n\t\t\tresolve(this, child, node);\n\t\t});\n\t};\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 16;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 17;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { createElement, render } from 'preact';\n\n/**\n * @param {import('../../src/index').RenderableProps<{ context: any }>} props\n */\nfunction ContextProvider(props) {\n\tthis.getChildContext = () => props.context;\n\treturn props.children;\n}\n\n/**\n * Portal component\n * @this {import('./internal').Component}\n * @param {object | null | undefined} props\n *\n * TODO: use createRoot() instead of fake root\n */\nfunction Portal(props) {\n\tconst _this = this;\n\tlet container = props._container;\n\n\t_this.componentWillUnmount = function () {\n\t\trender(null, _this._temp);\n\t\t_this._temp = null;\n\t\t_this._container = null;\n\t};\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\t_this.componentWillUnmount();\n\t}\n\n\tif (!_this._temp) {\n\t\t_this._container = container;\n\n\t\t// Create a fake DOM parent node that manages a subset of `container`'s children:\n\t\t_this._temp = {\n\t\t\tnodeType: 1,\n\t\t\tparentNode: container,\n\t\t\tchildNodes: [],\n\t\t\tappendChild(child) {\n\t\t\t\tthis.childNodes.push(child);\n\t\t\t\t_this._container.appendChild(child);\n\t\t\t},\n\t\t\tinsertBefore(child, before) {\n\t\t\t\tthis.childNodes.push(child);\n\t\t\t\t_this._container.appendChild(child);\n\t\t\t},\n\t\t\tremoveChild(child) {\n\t\t\t\tthis.childNodes.splice(this.childNodes.indexOf(child) >>> 1, 1);\n\t\t\t\t_this._container.removeChild(child);\n\t\t\t}\n\t\t};\n\t}\n\n\t// Render our wrapping element into temp.\n\trender(\n\t\tcreateElement(ContextProvider, { context: _this.context }, props._vnode),\n\t\t_this._temp\n\t);\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nexport function createPortal(vnode, container) {\n\tconst el = createElement(Portal, { _vnode: vnode, _container: container });\n\tel.containerInfo = container;\n\treturn el;\n}\n", "import {\n\trender as preactRender,\n\thydrate as preactHydrate,\n\toptions,\n\ttoChildArray,\n\tComponent\n} from 'preact';\n\nexport const REACT_ELEMENT_TYPE =\n\t(typeof Symbol != 'undefined' && Symbol.for && Symbol.for('react.element')) ||\n\t0xeac7;\n\nconst CAMEL_PROPS =\n\t/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;\nconst ON_ANI = /^on(Ani|Tra|Tou|BeforeInp|Compo)/;\nconst CAMEL_REPLACE = /[A-Z0-9]/g;\n\nconst IS_DOM = typeof document !== 'undefined';\n\n// Input types for which onchange should not be converted to oninput.\n// type=\"file|checkbox|radio\", plus \"range\" in IE11.\n// (IE11 doesn't support Symbol, which we use here to turn `rad` into `ra` which matches \"range\")\nconst onChangeInputType = type =>\n\t(typeof Symbol != 'undefined' && typeof Symbol() == 'symbol'\n\t\t? /fil|che|rad/\n\t\t: /fil|che|ra/\n\t).test(type);\n\n// Some libraries like `react-virtualized` explicitly check for this.\nComponent.prototype.isReactComponent = {};\n\n// `UNSAFE_*` lifecycle hooks\n// Preact only ever invokes the unprefixed methods.\n// Here we provide a base \"fallback\" implementation that calls any defined UNSAFE_ prefixed method.\n// - If a component defines its own `componentDidMount()` (including via defineProperty), use that.\n// - If a component defines `UNSAFE_componentDidMount()`, `componentDidMount` is the alias getter/setter.\n// - If anything assigns to an `UNSAFE_*` property, the assignment is forwarded to the unprefixed property.\n// See https://github.com/preactjs/preact/issues/1941\n[\n\t'componentWillMount',\n\t'componentWillReceiveProps',\n\t'componentWillUpdate'\n].forEach(key => {\n\tObject.defineProperty(Component.prototype, key, {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn this['UNSAFE_' + key];\n\t\t},\n\t\tset(v) {\n\t\t\tObject.defineProperty(this, key, {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true,\n\t\t\t\tvalue: v\n\t\t\t});\n\t\t}\n\t});\n});\n\n/**\n * Proxy render() since React returns a Component reference.\n * @param {import('./internal').VNode} vnode VNode tree to render\n * @param {import('./internal').PreactElement} parent DOM node to render vnode tree into\n * @param {() => void} [callback] Optional callback that will be called after rendering\n * @returns {import('./internal').Component | null} The root component reference or null\n */\nexport function render(vnode, parent, callback) {\n\t// React destroys any existing DOM nodes, see #1727\n\t// ...but only on the first render, see #1828\n\tif (parent._children == null) {\n\t\tparent.textContent = '';\n\t}\n\n\tpreactRender(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nexport function hydrate(vnode, parent, callback) {\n\tpreactHydrate(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nlet oldEventHook = options.event;\noptions.event = e => {\n\tif (oldEventHook) e = oldEventHook(e);\n\n\te.persist = empty;\n\te.isPropagationStopped = isPropagationStopped;\n\te.isDefaultPrevented = isDefaultPrevented;\n\treturn (e.nativeEvent = e);\n};\n\nfunction empty() {}\n\nfunction isPropagationStopped() {\n\treturn this.cancelBubble;\n}\n\nfunction isDefaultPrevented() {\n\treturn this.defaultPrevented;\n}\n\nconst classNameDescriptorNonEnumberable = {\n\tenumerable: false,\n\tconfigurable: true,\n\tget() {\n\t\treturn this.class;\n\t}\n};\n\nfunction handleDomVNode(vnode) {\n\tlet props = vnode.props,\n\t\ttype = vnode.type,\n\t\tnormalizedProps = {};\n\n\tfor (let i in props) {\n\t\tlet value = props[i];\n\n\t\tif (\n\t\t\t(i === 'value' && 'defaultValue' in props && value == null) ||\n\t\t\t// Emulate React's behavior of not rendering the contents of noscript tags on the client.\n\t\t\t(IS_DOM && i === 'children' && type === 'noscript') ||\n\t\t\ti === 'class' ||\n\t\t\ti === 'className'\n\t\t) {\n\t\t\t// Skip applying value if it is null/undefined and we already set\n\t\t\t// a default value\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet lowerCased = i.toLowerCase();\n\t\tif (i === 'defaultValue' && 'value' in props && props.value == null) {\n\t\t\t// `defaultValue` is treated as a fallback `value` when a value prop is present but null/undefined.\n\t\t\t// `defaultValue` for Elements with no value prop is the same as the DOM defaultValue property.\n\t\t\ti = 'value';\n\t\t} else if (i === 'download' && value === true) {\n\t\t\t// Calling `setAttribute` with a truthy value will lead to it being\n\t\t\t// passed as a stringified value, e.g. `download=\"true\"`. React\n\t\t\t// converts it to an empty string instead, otherwise the attribute\n\t\t\t// value will be used as the file name and the file will be called\n\t\t\t// \"true\" upon downloading it.\n\t\t\tvalue = '';\n\t\t} else if (lowerCased === 'ondoubleclick') {\n\t\t\ti = 'ondblclick';\n\t\t} else if (\n\t\t\tlowerCased === 'onchange' &&\n\t\t\t(type === 'input' || type === 'textarea') &&\n\t\t\t!onChangeInputType(props.type)\n\t\t) {\n\t\t\tlowerCased = i = 'oninput';\n\t\t} else if (lowerCased === 'onfocus') {\n\t\t\ti = 'onfocusin';\n\t\t} else if (lowerCased === 'onblur') {\n\t\t\ti = 'onfocusout';\n\t\t} else if (ON_ANI.test(i)) {\n\t\t\ti = lowerCased;\n\t\t} else if (type.indexOf('-') === -1 && CAMEL_PROPS.test(i)) {\n\t\t\ti = i.replace(CAMEL_REPLACE, '-$&').toLowerCase();\n\t\t} else if (value === null) {\n\t\t\tvalue = undefined;\n\t\t}\n\n\t\t// Add support for onInput and onChange, see #3561\n\t\t// if we have an oninput prop already change it to oninputCapture\n\t\tif (lowerCased === 'oninput') {\n\t\t\ti = lowerCased;\n\t\t\tif (normalizedProps[i]) {\n\t\t\t\ti = 'oninputCapture';\n\t\t\t}\n\t\t}\n\n\t\tnormalizedProps[i] = value;\n\t}\n\n\t// Add support for array select values: <select multiple value={[]} />\n\tif (\n\t\ttype == 'select' &&\n\t\tnormalizedProps.multiple &&\n\t\tArray.isArray(normalizedProps.value)\n\t) {\n\t\t// forEach() always returns undefined, which we abuse here to unset the value prop.\n\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\tchild.props.selected =\n\t\t\t\tnormalizedProps.value.indexOf(child.props.value) != -1;\n\t\t});\n\t}\n\n\t// Adding support for defaultValue in select tag\n\tif (type == 'select' && normalizedProps.defaultValue != null) {\n\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\tif (normalizedProps.multiple) {\n\t\t\t\tchild.props.selected =\n\t\t\t\t\tnormalizedProps.defaultValue.indexOf(child.props.value) != -1;\n\t\t\t} else {\n\t\t\t\tchild.props.selected =\n\t\t\t\t\tnormalizedProps.defaultValue == child.props.value;\n\t\t\t}\n\t\t});\n\t}\n\n\tif (props.class && !props.className) {\n\t\tnormalizedProps.class = props.class;\n\t\tObject.defineProperty(\n\t\t\tnormalizedProps,\n\t\t\t'className',\n\t\t\tclassNameDescriptorNonEnumberable\n\t\t);\n\t} else if (props.className && !props.class) {\n\t\tnormalizedProps.class = normalizedProps.className = props.className;\n\t} else if (props.class && props.className) {\n\t\tnormalizedProps.class = normalizedProps.className = props.className;\n\t}\n\n\tvnode.props = normalizedProps;\n}\n\nlet oldVNodeHook = options.vnode;\noptions.vnode = vnode => {\n\t// only normalize props on Element nodes\n\tif (typeof vnode.type === 'string') {\n\t\thandleDomVNode(vnode);\n\t}\n\n\tvnode.$$typeof = REACT_ELEMENT_TYPE;\n\n\tif (oldVNodeHook) oldVNodeHook(vnode);\n};\n\n// Only needed for react-relay\nlet currentComponent;\nconst oldBeforeRender = options._render;\noptions._render = function (vnode) {\n\tif (oldBeforeRender) {\n\t\toldBeforeRender(vnode);\n\t}\n\tcurrentComponent = vnode._component;\n};\n\nconst oldDiffed = options.diffed;\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = function (vnode) {\n\tif (oldDiffed) {\n\t\toldDiffed(vnode);\n\t}\n\n\tconst props = vnode.props;\n\tconst dom = vnode._dom;\n\n\tif (\n\t\tdom != null &&\n\t\tvnode.type === 'textarea' &&\n\t\t'value' in props &&\n\t\tprops.value !== dom.value\n\t) {\n\t\tdom.value = props.value == null ? '' : props.value;\n\t}\n\n\tcurrentComponent = null;\n};\n\n// This is a very very private internal function for React it\n// is used to sort-of do runtime dependency injection. So far\n// only `react-relay` makes use of it. It uses it to read the\n// context value.\nexport const __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = {\n\tReactCurrentDispatcher: {\n\t\tcurrent: {\n\t\t\treadContext(context) {\n\t\t\t\treturn currentComponent._globalContext[context._id].props.value;\n\t\t\t}\n\t\t}\n\t}\n};\n", "import {\n\tcreateElement,\n\trender as preactRender,\n\tcloneElement as preactCloneElement,\n\tcreateRef,\n\tComponent,\n\tcreateContext,\n\tFragment\n} from 'preact';\nimport {\n\tuseState,\n\tuseId,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue\n} from 'preact/hooks';\nimport { PureComponent } from './PureComponent';\nimport { memo } from './memo';\nimport { forwardRef } from './forwardRef';\nimport { Children } from './Children';\nimport { Suspense, lazy } from './suspense';\nimport { SuspenseList } from './suspense-list';\nimport { createPortal } from './portals';\nimport { is } from './util';\nimport {\n\thydrate,\n\trender,\n\tREACT_ELEMENT_TYPE,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n} from './render';\n\nconst version = '17.0.2'; // trick libraries to think we are react\n\n/**\n * Legacy version of createElement.\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor\n */\nfunction createFactory(type) {\n\treturn createElement.bind(null, type);\n}\n\n/**\n * Check if the passed element is a valid (p)react node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isValidElement(element) {\n\treturn !!element && element.$$typeof === REACT_ELEMENT_TYPE;\n}\n\n/**\n * Check if the passed element is a Fragment node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isFragment(element) {\n\treturn isValidElement(element) && element.type === Fragment;\n}\n\n/**\n * Wrap `cloneElement` to abort if the passed element is not a valid element and apply\n * all vnode normalizations.\n * @param {import('./internal').VNode} element The vnode to clone\n * @param {object} props Props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Optional component children\n */\nfunction cloneElement(element) {\n\tif (!isValidElement(element)) return element;\n\treturn preactCloneElement.apply(null, arguments);\n}\n\n/**\n * Remove a component tree from the DOM, including state and event handlers.\n * @param {import('./internal').PreactElement} container\n * @returns {boolean}\n */\nfunction unmountComponentAtNode(container) {\n\tif (container._children) {\n\t\tpreactRender(null, container);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Get the matching DOM node for a component\n * @param {import('./internal').Component} component\n * @returns {import('./internal').PreactElement | null}\n */\nfunction findDOMNode(component) {\n\treturn (\n\t\t(component &&\n\t\t\t(component.base || (component.nodeType === 1 && component))) ||\n\t\tnull\n\t);\n}\n\n/**\n * Deprecated way to control batched rendering inside the reconciler, but we\n * already schedule in batches inside our rendering code\n * @template Arg\n * @param {(arg: Arg) => void} callback function that triggers the updated\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n */\n// eslint-disable-next-line camelcase\nconst unstable_batchedUpdates = (callback, arg) => callback(arg);\n\n/**\n * In React, `flushSync` flushes the entire tree and forces a rerender. It's\n * implmented here as a no-op.\n * @template Arg\n * @template Result\n * @param {(arg: Arg) => Result} callback function that runs before the flush\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n * @returns\n */\nconst flushSync = (callback, arg) => callback(arg);\n\n/**\n * Strict Mode is not implemented in Preact, so we provide a stand-in for it\n * that just renders its children without imposing any restrictions.\n */\nconst StrictMode = Fragment;\n\nexport function startTransition(cb) {\n\tcb();\n}\n\nexport function useDeferredValue(val) {\n\treturn val;\n}\n\nexport function useTransition() {\n\treturn [false, startTransition];\n}\n\n// TODO: in theory this should be done after a VNode is diffed as we want to insert\n// styles/... before it attaches\nexport const useInsertionEffect = useLayoutEffect;\n\n// compat to react-is\nexport const isElement = isValidElement;\n\n/**\n * This is taken from https://github.com/facebook/react/blob/main/packages/use-sync-external-store/src/useSyncExternalStoreShimClient.js#L84\n * on a high level this cuts out the warnings, ... and attempts a smaller implementation\n * @typedef {{ _value: any; _getSnapshot: () => any }} Store\n */\nexport function useSyncExternalStore(subscribe, getSnapshot) {\n\tconst value = getSnapshot();\n\n\t/**\n\t * @typedef {{ _instance: Store }} StoreRef\n\t * @type {[StoreRef, (store: StoreRef) => void]}\n\t */\n\tconst [{ _instance }, forceUpdate] = useState({\n\t\t_instance: { _value: value, _getSnapshot: getSnapshot }\n\t});\n\n\tuseLayoutEffect(() => {\n\t\t_instance._value = value;\n\t\t_instance._getSnapshot = getSnapshot;\n\n\t\tif (didSnapshotChange(_instance)) {\n\t\t\tforceUpdate({ _instance });\n\t\t}\n\t}, [subscribe, value, getSnapshot]);\n\n\tuseEffect(() => {\n\t\tif (didSnapshotChange(_instance)) {\n\t\t\tforceUpdate({ _instance });\n\t\t}\n\n\t\treturn subscribe(() => {\n\t\t\tif (didSnapshotChange(_instance)) {\n\t\t\t\tforceUpdate({ _instance });\n\t\t\t}\n\t\t});\n\t}, [subscribe]);\n\n\treturn value;\n}\n\n/** @type {(inst: Store) => boolean} */\nfunction didSnapshotChange(inst) {\n\tconst latestGetSnapshot = inst._getSnapshot;\n\tconst prevValue = inst._value;\n\ttry {\n\t\tconst nextValue = latestGetSnapshot();\n\t\treturn !is(prevValue, nextValue);\n\t} catch (error) {\n\t\treturn true;\n\t}\n}\n\nexport * from 'preact/hooks';\nexport {\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tisFragment,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tflushSync,\n\t// eslint-disable-next-line camelcase\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n\n// React copies the named exports to the default one.\nexport default {\n\tuseState,\n\tuseId,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseInsertionEffect,\n\tuseTransition,\n\tuseDeferredValue,\n\tuseSyncExternalStore,\n\tstartTransition,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tisElement,\n\tisFragment,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tflushSync,\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n", "/**\n * @license Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport {createPortal, useRef, useEffect} from 'preact/compat';\nimport clsx from 'clsx';\nimport './modal.css';\n\n/** @param {{className?: string, children: LHCI.PreactNode, onClose: () => void}} props */\nexport const Modal = props => {\n  const modalRootRef = useRef(\n    document.getElementById('preact-modal-root') || document.createElement('div')\n  );\n\n  useEffect(() => {\n    modalRootRef.current.id = 'preact-modal-root';\n    document.body.appendChild(modalRootRef.current);\n    return () => document.body.removeChild(modalRootRef.current);\n  }, []);\n\n  return createPortal(\n    <div className=\"modal-backdrop\">\n      <div className={clsx('modal', props.className)} style={{position: 'relative'}}>\n        {props.children}\n        <div className=\"modal__close\" onClick={props.onClose}>\n          <i className=\"material-icons\">close</i>\n        </div>\n      </div>\n    </div>,\n    modalRootRef.current\n  );\n};\n", "/**\n * @license Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport './lhr-comparison-runtime-diff.css';\nimport clsx from 'clsx';\n\n/** @typedef {{label: string, base: string, compare: string, severity: 'warn'|'error'}} RuntimeDiff */\n\n/** @param {any} value */\nfunction getStringValueFromRawConfigSetting(value) {\n  if (typeof value === 'string') return value;\n  if (typeof value === 'number') return value.toString();\n  if (typeof value === 'undefined') return 'Unset';\n  if (typeof value === 'boolean') return value ? 'Enabled' : 'Disabled';\n  if (Array.isArray(value)) return value.join(', ');\n  return 'Unknown';\n}\n\n/**\n * @param {LH.Result} lhr\n * @param {LH.Result|undefined} baseLhr\n * @return {Array<RuntimeDiff>}\n */\nexport function computeRuntimeDiffs(lhr, baseLhr) {\n  if (!baseLhr) return [];\n\n  /** @type {Array<RuntimeDiff>} */\n  const diffs = [];\n\n  const {benchmarkIndex} = lhr.environment;\n  const {benchmarkIndex: baseBenchmarkIndex} = baseLhr.environment;\n  const benchmarkMultiplicativeDelta =\n    Math.abs(benchmarkIndex - baseBenchmarkIndex) / Math.min(benchmarkIndex, baseBenchmarkIndex);\n  if (benchmarkMultiplicativeDelta > 1.5) {\n    diffs.push({\n      label: 'CPU/Memory Power',\n      base: baseLhr.environment.benchmarkIndex.toString(),\n      compare: lhr.environment.benchmarkIndex.toString(),\n      severity: benchmarkMultiplicativeDelta > 2 ? 'error' : 'warn',\n    });\n  }\n\n  const settings = lhr.configSettings;\n  const baseSettings = baseLhr.configSettings;\n  const throttling = settings.throttling || {};\n  const baseThrottling = settings.throttling || {};\n  const potentialDiffs = [\n    ['Lighthouse Version', baseLhr.lighthouseVersion, lhr.lighthouseVersion],\n    ['Storage Reset', baseSettings.disableStorageReset, settings.disableStorageReset],\n    ['Emulated Form Factor', baseSettings.emulatedFormFactor, settings.emulatedFormFactor],\n    ['Throttling Method', baseSettings.throttlingMethod, settings.throttlingMethod],\n    ['CPU Throttling', baseThrottling.cpuSlowdownMultiplier, throttling.cpuSlowdownMultiplier],\n    ['Network RTT', baseThrottling.rttMs, throttling.rttMs],\n    ['Network Throughput', baseThrottling.throughputKbps, throttling.throughputKbps],\n    ['Network RTT', baseThrottling.requestLatencyMs, throttling.requestLatencyMs],\n    [\n      'Network Throughput (Up)',\n      baseThrottling.uploadThroughputKbps,\n      throttling.uploadThroughputKbps,\n    ],\n    [\n      'Network Throughput (Down)',\n      baseThrottling.downloadThroughputKbps,\n      throttling.downloadThroughputKbps,\n    ],\n  ];\n\n  for (const [label, rawBase, rawCompare] of potentialDiffs) {\n    const base = getStringValueFromRawConfigSetting(rawBase);\n    const compare = getStringValueFromRawConfigSetting(rawCompare);\n    if (base === compare) continue;\n    diffs.push({label, base, compare, severity: 'error'});\n  }\n\n  return diffs;\n}\n\n/**\n * @param {{diffs: Array<RuntimeDiff>, variant: 'mini'|'full'}} props\n */\nexport const LhrRuntimeDiff = props => {\n  const {diffs} = props;\n\n  return (\n    <div\n      className={clsx(\n        'lhr-comparison-runtime-diff',\n        `lhr-comparison-runtime-diff--${props.variant}`\n      )}\n    >\n      <div className=\"lhr-comparison__warning\">\n        <i className=\"material-icons\">info</i>\n        <div>\n          Changes of runtime settings or the environment can substantially affect your Lighthouse\n          scores and might be the reason for the differences here.\n        </div>\n      </div>\n      <div className=\"lhr-comparison-runtime-diff__diffs\">\n        The following runtime differences were detected:\n        <table>\n          <thead>\n            <tr>\n              <th />\n              <th>Base</th>\n              <th>Compare</th>\n            </tr>\n          </thead>\n          <tbody>\n            {diffs.map(diff => (\n              <tr key={diff.label}>\n                <td>{diff.label}</td>\n                <td>{diff.base}</td>\n                <td>{diff.compare}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n", "/**\n * @license Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport './comparison.css';\nimport {LH_LOGO_PATH} from '../../components/lhci-components.jsx';\nimport {ReportUploadBox, computeBestDisplayType} from '../../components/report-upload-box';\nimport {LhrComparison} from '../../../../../server/src/ui/routes/build-view/lhr-comparison';\n\n/** @typedef {import('../../app.jsx').ToastMessage} ToastMessage */\n/** @typedef {import('../../app.jsx').ReportData} ReportData */\n\n/** @param {{baseReport: ReportData, compareReport: ReportData, setBaseReport: (d: ReportData|undefined) => void, setCompareReport: (d: ReportData|undefined) => void, addToast: (t: ToastMessage) => void}} props */\nexport const ComparisonRoute = props => {\n  const displayType = computeBestDisplayType(props.baseReport.lhr, props.compareReport.lhr);\n  return (\n    <div className=\"comparison\">\n      <div className=\"comparison-header\">\n        <div\n          className=\"comparison-header__switcher\"\n          onClick={() => {\n            props.setBaseReport(props.compareReport);\n            props.setCompareReport(props.baseReport);\n          }}\n        >\n          <i className=\"material-icons\">swap_horiz</i>\n        </div>\n        <div className=\"comparison-header__logo\">\n          <img\n            src={LH_LOGO_PATH}\n            alt=\"Lighthouse Logo\"\n            onClick={() => {\n              props.setBaseReport(undefined);\n              props.setCompareReport(undefined);\n            }}\n          />\n        </div>\n        <div className=\"comparison-header__upload\">\n          <ReportUploadBox\n            variant=\"base\"\n            dragTarget=\"self\"\n            report={props.baseReport}\n            setReport={props.setBaseReport}\n            addToast={props.addToast}\n            displayType={displayType}\n            showOpenLhrLink\n          />\n          <ReportUploadBox\n            variant=\"compare\"\n            dragTarget=\"self\"\n            report={props.compareReport}\n            setReport={props.setCompareReport}\n            addToast={props.addToast}\n            displayType={displayType}\n            showOpenLhrLink\n          />\n        </div>\n        <a className=\"comparison-header__info\" href=\"https://github.com/GoogleChrome/lighthouse-ci\">\n          <i className=\"material-icons\">info</i>\n        </a>\n      </div>\n      <div className=\"comparison-body\">\n        <LhrComparison\n          lhr={props.compareReport.lhr}\n          baseLhr={props.baseReport.lhr}\n          hookElements={{}}\n        />\n      </div>\n    </div>\n  );\n};\n", "/**\n * @license Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport './toast.css';\nimport {useEffect} from 'preact/hooks';\n\n/** @typedef {import('../app.jsx').ToastMessage} ToastMessage */\n\n/** @param {{toast: ToastMessage, setToasts: import('preact/hooks/src').StateUpdater<Array<ToastMessage>>}} props */\nexport const Toast = props => {\n  const setToasts = props.setToasts;\n  const {message, level = 'info'} = props.toast;\n\n  useEffect(() => {\n    const interval = setTimeout(\n      () => setToasts(toasts => toasts.filter(t => t !== props.toast)),\n      5000\n    );\n    return () => clearInterval(interval);\n  }, []);\n\n  return <div className={`toast toast--${level}`}>{message}</div>;\n};\n", "/**\n * @license Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport {useState, useEffect, useCallback} from 'preact/hooks';\nimport '../../../server/src/ui/app.css';\nimport './app.css';\nimport {LandingRoute} from './routes/landing/landing.jsx';\nimport {ComparisonRoute} from './routes/comparison/comparison.jsx';\nimport {LoadingSpinner} from './components/lhci-components.jsx';\nimport {parseStringAsLhr} from './components/report-upload-box.jsx';\nimport {Toast} from './components/toast.jsx';\n\nconst SEARCH_PARAMS = new URLSearchParams(location.search);\nconst INITIAL_BASE_URL = SEARCH_PARAMS.get('baseReport');\nconst INITIAL_COMPARE_URL = SEARCH_PARAMS.get('compareReport');\n\n/**\n * @typedef {{filename: string, data: string, lhr: LH.Result}} ReportData\n */\n/**\n * @typedef {{message: string, level?: 'error' | 'info'}} ToastMessage\n */\n\n/**\n * @param {string} url\n * @param {(r: ReportData) => void} setReport\n */\nasync function loadReportFromURL(url, setReport) {\n  const filename = new URL(url).pathname.split('/').slice(-1)[0] || 'Unknown';\n  const response = await fetch(url);\n  const data = await response.text();\n  const lhr = parseStringAsLhr(data);\n  if (lhr instanceof Error) throw lhr;\n  setReport({filename, data, lhr});\n}\n\n/**\n * @param {(r: ReportData) => void} setBaseReport\n * @param {(r: ReportData) => void} setCompareReport\n * @param {(b: boolean) => void} setIsLoading\n * @param {(t: ToastMessage) => void} addToast\n */\nasync function loadInitialReports(setBaseReport, setCompareReport, setIsLoading, addToast) {\n  if (window.location.hostname === 'localhost') {\n    const lastBaseReport = localStorage.getItem('lastBaseReport');\n    const lastCompareReport = localStorage.getItem('lastCompareReport');\n    if (lastBaseReport) setBaseReport(JSON.parse(lastBaseReport));\n    if (lastCompareReport) setCompareReport(JSON.parse(lastCompareReport));\n  }\n\n  const promises = [\n    INITIAL_BASE_URL && loadReportFromURL(INITIAL_BASE_URL, setBaseReport),\n    INITIAL_COMPARE_URL && loadReportFromURL(INITIAL_COMPARE_URL, setCompareReport),\n  ].filter(/** @return {p is Promise<void>} */ p => !!p);\n  if (!promises.length) return;\n\n  setIsLoading(true);\n  await Promise.all(\n    promises.map(p =>\n      p.catch(err => {\n        console.error(err); // eslint-disable-line no-console\n        addToast({message: `Failed loading report from URL: ${err.message}`, level: 'error'});\n      })\n    )\n  );\n  setIsLoading(false);\n}\n\nexport const App = () => {\n  const initialReport = /** @type {ReportData|undefined} */ (undefined);\n  const [isLoading, setIsLoading] = useState(false);\n  const [baseReport, setBaseReport] = useState(initialReport);\n  const [compareReport, setCompareReport] = useState(initialReport);\n  const [toasts, setToasts] = useState(/** @type {Array<ToastMessage>} */ ([]));\n  /** @param {ToastMessage} toast */\n  const addToastUnmemoized = toast => setToasts(toasts => [...toasts, toast]);\n  const addToast = useCallback(addToastUnmemoized, [setToasts]);\n\n  useEffect(() => {\n    loadInitialReports(setBaseReport, setCompareReport, setIsLoading, addToast);\n  }, []);\n\n  useEffect(() => {\n    try {\n      if (baseReport) localStorage.setItem('lastBaseReport', JSON.stringify(baseReport));\n      if (compareReport) localStorage.setItem('lastCompareReport', JSON.stringify(compareReport));\n    } catch (err) {\n      console.error(`Error saving to localStorage: ${err}`); // eslint-disable-line no-console\n    }\n  }, [baseReport, compareReport]);\n\n  return (\n    <div className=\"lhci-viewer\">\n      {isLoading ? (\n        <div className=\"loading-container\">\n          <LoadingSpinner />\n        </div>\n      ) : (\n        <Fragment />\n      )}\n      <div className=\"toast-container\">\n        {toasts.map(toast => (\n          <Toast key={toast.message} toast={toast} setToasts={setToasts} />\n        ))}\n      </div>\n      {baseReport && compareReport ? (\n        <ComparisonRoute\n          baseReport={baseReport}\n          setBaseReport={setBaseReport}\n          compareReport={compareReport}\n          setCompareReport={setCompareReport}\n          addToast={addToast}\n        />\n      ) : (\n        <LandingRoute\n          baseReport={baseReport}\n          setBaseReport={setBaseReport}\n          compareReport={compareReport}\n          setCompareReport={setCompareReport}\n          addToast={addToast}\n        />\n      )}\n    </div>\n  );\n};\n", "/**\n * @license Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, render} from 'preact';\nimport {App} from './app.jsx';\n\n// Fontsource for fonts/icons instead of google cdn\nimport '@fontsource/roboto/400.css';\nimport '@fontsource/roboto/500.css';\nimport '@fontsource/roboto-mono/400.css';\nimport '@fontsource/roboto-mono/500.css';\nimport '@fontsource/material-icons';\n\nconst preactRoot = document.getElementById('preact-root');\nif (!preactRoot) throw new Error('Missing #preact-root');\nrender(<App />, preactRoot);\n"],
  "mappings": "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",
  "names": ["require_lodash", "__commonJSMin", "exports", "module", "merge", "v1", "v2", "i", "o1", "o2", "o1Keys", "o2Keys", "key", "kebabCase", "s", "opts", "kebabed", "groupIntoMap", "items", "keyFn", "groups", "item", "group", "debounce", "fn", "time", "timeout", "cancel", "debouncedFn", "args", "from", "to", "by", "numbers", "word", "length", "padding", "depth", "v", "k", "o", "seen", "out", "maxItem", "maxValue", "value", "a", "b", "object", "propertiesToPick", "key_", "propertiesToDrop", "options", "uuid", "string", "number", "pluralForm", "id", "require_lhr_generator", "__commonJSMin", "exports", "module", "_", "LOREM_IPSUM", "getCategoryForAuditId", "auditId", "getGroupForAuditId", "generateNumericValue", "average", "prandom", "maxDelta", "createLHR", "pageUrl", "auditDefs", "audits", "loremIpsumTokens", "auditDef", "averageNumericValue", "averageWastedMs", "unit", "groupId", "numericValue", "score", "wastedMs", "hasBytes", "item", "wastedBytes", "passRate", "headersAsObject", "items", "_a", "_b", "url", "inclusionRate", "rest", "__objRest", "key", "dataKey", "v", "valueType", "averageValue", "details", "header", "__spreadProps", "__spreadValues", "categories", "auditsGroupedByCategory", "pair", "category", "sum", "next", "id", "fetchTimeBase", "fetchTimeOffset", "fetchTime", "require_audit_diff_finder", "__commonJSMin", "exports", "module", "_", "getGroupForAuditId", "auditsToNotDIff", "getDeltaLabel", "delta", "deltaType", "isImprovement", "getDiffLabel", "diff", "getDeltaStats", "getRowLabel", "diffs", "itemDeltaDiffs", "getMatchingDiffsForIndex", "compareItemIndex", "baseItemIndex", "compareIndex", "baseIndex", "getRowLabelForIndex", "getWorstNumericDeltaForIndex", "numericDiffs", "isNumericAuditDiff", "getMostSevereDiffLabel", "labels", "l", "getScoreLevel", "score", "getMetricScoreLevel", "value", "cutoffs", "getDiffSeverity", "baseValue", "compareValue", "absoluteDelta", "percentDelta", "percentAbsoluteDelta", "createAuditDiff", "auditId", "type", "itemKey", "numericDiffResult", "__spreadProps", "__spreadValues", "findAuditDetailItemKeyDiffs", "baseEntry", "compareEntry", "headings", "key", "heading", "synthesizeItemKeyDiffs", "baseItems", "compareItems", "itemKeyDiffs", "item", "itemIndexKeyName", "itemIndexValue", "replaceNondeterministicStrings", "s", "url", "err", "deepPruneItemForKeySerialization", "entry", "itemAsRecord", "keysToKeep", "copy", "getItemKey", "_a", "_b", "_c", "source", "zipBaseAndCompareItems", "groupedByKey", "i", "zipped", "entries", "sortZippedBaseAndCompareItems", "zippedItems", "rowLabelSortOrder", "a", "b", "compareIndexA", "baseIndexA", "compareIndexB", "baseIndexB", "rowStateIndexA", "rowStateIndexB", "labelValueA", "labelValueB", "numericValueA", "numericValueB", "findAuditDetailItemsDiffs", "base", "compare", "normalizeScore", "audit", "getNumericValue", "normalizeNumericValue", "normalizeDetails", "findAuditDiffs", "baseAudit", "compareAudit", "options", "percentAbsoluteDeltaThreshold", "hasItemDetails", "baseAuditDetails", "compareAuditDetails", "baseHeadings", "compareHeadings", "filteredDiffs", "isAllPassing", "require_markdown", "__commonJSMin", "exports", "module", "splitMarkdownLink", "text", "segments", "parts", "preambleText", "linkText", "linkHref", "MODE_HYDRATE", "slice", "options", "vnodeId", "isValidElement", "rerenderQueue", "prevDebounce", "defer", "depthSort", "i", "EMPTY_OBJ", "EMPTY_ARR", "IS_NON_DIMENSIONAL", "isArray", "Array", "assign", "obj", "props", "removeNode", "node", "parentNode", "removeChild", "createElement", "type", "children", "key", "ref", "normalizedProps", "arguments", "length", "call", "defaultProps", "createVNode", "original", "vnode", "__k", "__", "__b", "__e", "__d", "__c", "constructor", "__v", "__i", "__u", "Fragment", "props", "children", "BaseComponent", "context", "this", "getDomSibling", "vnode", "childIndex", "__", "sibling", "__k", "length", "__e", "type", "updateParentDomPointers", "i", "child", "__c", "base", "enqueueRender", "c", "__d", "rerenderQueue", "push", "process", "prevDebounce", "options", "debounceRendering", "defer", "renderQueueLength", "component", "newVNode", "oldVNode", "oldDom", "parentDom", "commitQueue", "refQueue", "sort", "depthSort", "shift", "__v", "__P", "assign", "diff", "__n", "ownerSVGElement", "__u", "__i", "commitRoot", "diffChildren", "renderResult", "newParentVNode", "oldParentVNode", "globalContext", "isSvg", "excessDomChildren", "isHydrating", "childVNode", "newDom", "firstChildDom", "oldChildren", "EMPTY_ARR", "newChildrenLength", "constructNewChildrenArray", "EMPTY_OBJ", "ref", "applyRef", "insert", "nextSibling", "skewedIndex", "matchingIndex", "oldChildrenLength", "remainingOldChildren", "skew", "constructor", "String", "createVNode", "isArray", "key", "__b", "findMatchingIndex", "unmount", "parentVNode", "insertBefore", "toChildArray", "out", "some", "x", "y", "setStyle", "style", "value", "setProperty", "IS_NON_DIMENSIONAL", "test", "dom", "name", "oldValue", "useCapture", "o", "cssText", "replace", "toLowerCase", "slice", "l", "_attached", "Date", "now", "addEventListener", "eventProxyCapture", "eventProxy", "removeEventListener", "e", "removeAttribute", "setAttribute", "eventHandler", "_dispatched", "event", "tmp", "isNew", "oldProps", "oldState", "snapshot", "clearProcessingException", "newProps", "provider", "componentContext", "renderHook", "count", "newType", "outer", "contextType", "__E", "prototype", "render", "doRender", "sub", "state", "__h", "_sb", "__s", "getDerivedStateFromProps", "componentWillMount", "componentDidMount", "componentWillReceiveProps", "shouldComponentUpdate", "forEach", "componentWillUpdate", "componentDidUpdate", "__r", "getChildContext", "getSnapshotBeforeUpdate", "MODE_HYDRATE", "indexOf", "diffElementNodes", "diffed", "root", "cb", "call", "newHtml", "oldHtml", "newChildren", "inputValue", "checked", "nodeType", "localName", "document", "createTextNode", "createElementNS", "createElement", "is", "data", "childNodes", "attributes", "__html", "innerHTML", "removeNode", "current", "skipRemove", "r", "componentWillUnmount", "replaceNode", "firstChild", "slice", "EMPTY_ARR", "options", "__e", "error", "vnode", "oldVNode", "errorInfo", "component", "ctor", "handled", "__", "__c", "constructor", "getDerivedStateFromError", "setState", "__d", "componentDidCatch", "__E", "e", "vnodeId", "isValidElement", "undefined", "BaseComponent", "prototype", "update", "callback", "s", "this", "__s", "state", "assign", "props", "__v", "_sb", "push", "enqueueRender", "forceUpdate", "__h", "render", "Fragment", "rerenderQueue", "defer", "Promise", "then", "bind", "resolve", "setTimeout", "depthSort", "a", "b", "__b", "process", "__r", "i", "currentIndex", "currentComponent", "previousComponent", "prevRaf", "currentHook", "afterPaintEffects", "EMPTY", "oldBeforeDiff", "options", "__b", "oldBeforeRender", "__r", "oldAfterDiff", "diffed", "oldCommit", "__c", "oldBeforeUnmount", "unmount", "getHookState", "index", "type", "__h", "hooks", "__H", "__", "length", "push", "__V", "useState", "initialState", "useReducer", "invokeOrReturn", "reducer", "init", "hookState", "_reducer", "action", "currentValue", "__N", "nextValue", "setState", "_hasScuFromHooks", "updateHookState", "p", "s", "c", "stateHooks", "filter", "x", "every", "prevScu", "call", "this", "shouldUpdate", "forEach", "hookItem", "props", "shouldComponentUpdate", "prevCWU", "componentWillUpdate", "__e", "tmp", "useEffect", "callback", "args", "state", "__s", "argsChanged", "_pendingArgs", "useRef", "initialValue", "currentHook", "useMemo", "current", "useMemo", "factory", "args", "state", "getHookState", "currentIndex", "argsChanged", "__V", "_pendingArgs", "__h", "__", "useCallback", "callback", "currentHook", "flushAfterPaintEffects", "component", "afterPaintEffects", "shift", "__P", "__H", "__h", "forEach", "invokeCleanup", "invokeEffect", "e", "options", "__e", "__v", "__b", "vnode", "currentComponent", "oldBeforeDiff", "__r", "oldBeforeRender", "currentIndex", "hooks", "__c", "previousComponent", "__", "hookItem", "__N", "EMPTY", "_pendingArgs", "diffed", "oldAfterDiff", "c", "length", "push", "prevRaf", "requestAnimationFrame", "afterNextFrame", "__V", "commitQueue", "some", "filter", "cb", "oldCommit", "unmount", "oldBeforeUnmount", "hasErrored", "s", "HAS_RAF", "callback", "raf", "done", "clearTimeout", "timeout", "cancelAnimationFrame", "setTimeout", "hook", "comp", "cleanup", "argsChanged", "oldArgs", "newArgs", "arg", "index", "invokeOrReturn", "f", "toVal", "mix", "k", "y", "str", "clsx_m_default", "i", "x", "SVG_PATH", "LoadingSpinner_", "y", "LoadingSpinner", "props", "clsx_m_default", "Paper", "props", "children", "y", "clsx_m_default", "openLhrInClassicViewer", "lhr", "VIEWER_ORIGIN", "msgHandler", "messageEvent", "popup", "fetchTime", "windowName", "LhrViewerLink", "props", "children", "lhrOrResolver", "isLoading", "setIsLoading", "h", "y", "clsx_m_default", "evt", "__async", "LH_ICON_PATH", "LhrViewerButton", "props", "lhr", "label", "y", "LhrViewerLink", "CONFETTI_PATH", "LH_LOGO_PATH", "parseStringAsLhr", "s", "match", "lhr", "err", "computeBestDisplayType", "lhrA", "lhrB", "urlA", "urlB", "FilePill", "props", "filename", "url", "timestamp", "options", "tooltip", "y", "handleFileInput", "fileList", "reader", "handleDragEnter", "dragTargetRef", "setIsDragging", "e", "handleDragLeave", "handleDragOver", "handleDrop", "ReportUploadBox", "isDragging", "h", "_", "onDragEnter", "onDragLeave", "onDragOver", "onDrop", "p", "clsx_m_default", "g", "LhrViewerButton", "input", "LandingRoute", "props", "y", "CONFETTI_PATH", "Paper", "LH_LOGO_PATH", "ReportUploadBox", "import_lodash", "import_audit_diff_finder", "Dropdown", "props", "options", "value", "setValue", "className", "title", "label", "computedOptions", "option", "y", "clsx_m_default", "g", "evt", "usePreviousValue", "value", "ref", "_", "p", "ScoreIcon", "props", "score", "y", "ScoreWord", "import_markdown", "Markdown", "props", "segments", "y", "g", "segment", "i", "url", "Nbsp", "y", "import_audit_diff_finder", "SimpleDetails", "props", "type", "compareValue", "baseValue", "diff", "value", "label", "numericBase", "numericCompare", "baseDisplay", "compareDisplay", "numericTitle", "deltaPercent", "kb", "y", "Nbsp", "ms", "evt", "img", "display", "hostname", "url", "_", "line", "column", "g", "debugdata", "import_audit_diff_finder", "isNumericValueType", "itemType", "TableDetails", "props", "audit", "baseAudit", "allDiffs", "y", "g", "compareHeadings", "compareItems", "baseHeadings", "baseItems", "zippedItems", "sortedItems", "headings", "insertRowLabelAfterIndex", "heading", "i", "base", "compare", "diffs", "key", "state", "j", "diff", "compareItem", "baseItem", "SimpleDetails", "import_audit_diff_finder", "BIG_PICTURE_LIMITS", "getBigPictureLimit", "audit", "limitType", "auditId", "toNearestRoundNumber", "x", "direction", "fn", "getUnitFromAudit", "groupId", "displayValue", "toDisplay", "options", "asDelta", "withSuffix", "unit", "value", "fractionDigits", "suffixUnit", "string", "numericSign", "resultStr", "y", "g", "Nbsp", "NumericDiff", "props", "diff", "currentNumericValue", "baseNumericValue", "delta", "minValue", "maxValue", "lowerLimit", "upperLimit", "range", "minValueConstrainted", "maxValueConstrainted", "boxLeft", "boxRight", "deltaType", "minValueIsCurrentValue", "hoverDisplay", "clsx_m_default", "deltaLabel", "deltaLabelLength", "narrowCutoffThresholdInPercent", "_", "import_audit_diff_finder", "ICONS_BY_AUDIT_ID", "IconForAuditItems", "props", "auditId", "groupId", "icon", "y", "ScoreDiff", "g", "ScoreWord", "DisplayValueDiff", "getDiffLabelForRowLabel", "rowLabel", "getUniqueBaseCompareIndexPairs", "diffs", "diff", "indexes", "idx", "ItemDiff", "baseAudit", "baseAuditItems", "rowLabels", "pair", "regressionCount", "label", "improvementCount", "baseElements", "clsx_m_default", "NoBaseAudit", "ErrorDiff", "message", "AuditDiff", "audit", "group", "noDiffAvailable", "numericDiff", "NumericDiff", "scoreDiff", "displayValueDiff", "import_audit_diff_finder", "ScoreOnlyDetails", "props", "audit", "baseAudit", "y", "ScoreWord", "ErrorDetails", "erroredAudit", "g", "Details", "pair", "details", "baseDetails", "hasItems", "itemDiff", "tableDetails", "numericDetails", "TableDetails", "ItemDiff", "__spreadProps", "__spreadValues", "numericDiff", "diff", "NumericDiff", "scoreDiff", "AuditDetail", "clsx_m_default", "ScoreIcon", "Markdown", "AuditDetailPane", "props", "paneElementRef", "_", "previouslySelectedAuditId", "usePreviousValue", "p", "auditId", "paneElement", "childElement", "y", "el", "pair", "audit", "AuditDetail", "import_audit_diff_finder", "Gauge", "props", "score", "rawBaseScore", "baseScore", "label", "baseStrokeDasharray", "delta", "deltaDasharrayScore", "deltaStrokeDasharray", "deltaTransform", "indicatorTransform", "y", "clsx_m_default", "_", "FastReliableIcon", "props", "y", "InstallableIcon", "OptimizedIcon", "getBadgeDiffType", "base", "compare", "key", "getBadgeStatus", "lhr", "pwaCategory", "auditsByCategory", "ref", "hasEveryPass", "refs", "audit", "PWAGauge", "status", "all", "clsx_m_default", "import_audit_diff_finder", "ScoreDeltaBadge", "props", "delta", "y", "clsx_m_default", "StandardScoreItem", "props", "lhr", "baseLhr", "categoryId", "category", "baseCategory", "diff", "y", "clsx_m_default", "Gauge", "ScoreDeltaBadge", "PwaScoreItem", "compareStatus", "getBadgeStatus", "deltaEl", "overallStatus", "baseStatus", "diffTypes", "getBadgeDiffType", "allEqual", "type", "individualBadges", "g", "FastReliableIcon", "InstallableIcon", "OptimizedIcon", "PWAGauge", "LhrComparisonScores", "compareCategoryIds", "baseCategoryIds", "categoryIds", "id", "idA", "idB", "sortKeyA", "sortKeyB", "MetricsTabHeader", "props", "y", "clsx_m_default", "ChangedAuditList", "g", "pair", "audit", "__spreadProps", "__spreadValues", "diff", "ScoreIcon", "AuditDiff", "UnchangedAuditList", "baseLhr", "e", "openLhrInClassicViewer", "AuditGroup", "group", "showAsBigPicture", "setShowAsBigPicture", "h", "expanded", "setExpanded", "Paper", "LhrComparisonLegend", "y", "ScoreIcon", "assign", "obj", "props", "i", "shallowDiffers", "a", "b", "PureComponent", "p", "this", "PureComponent", "prototype", "Component", "isPureReactComponent", "shouldComponentUpdate", "props", "state", "shallowDiffers", "this", "oldDiffHook", "options", "__b", "vnode", "type", "__f", "ref", "REACT_FORWARD_SYMBOL", "Symbol", "for", "oldCatchError", "options", "error", "newVNode", "oldVNode", "errorInfo", "then", "component", "vnode", "__", "__c", "__e", "__k", "oldUnmount", "unmount", "detachedClone", "detachedParent", "parentDom", "__H", "forEach", "effect", "assign", "__P", "map", "child", "removeOriginal", "originalParent", "__v", "appendChild", "Suspense", "this", "__u", "_suspenders", "__b", "suspended", "__a", "SuspenseList", "this", "_next", "_map", "options", "unmount", "vnode", "component", "__c", "__R", "__u", "type", "oldUnmount", "Suspense", "prototype", "Component", "promise", "suspendingVNode", "suspendingComponent", "c", "_suspenders", "push", "resolve", "suspended", "__v", "resolved", "onResolved", "onSuspensionComplete", "state", "__a", "suspendedVNode", "__k", "removeOriginal", "__P", "__O", "setState", "pop", "forceUpdate", "then", "componentWillUnmount", "render", "props", "detachedParent", "document", "createElement", "detachedComponent", "detachedClone", "__b", "fallback", "Fragment", "children", "list", "child", "node", "delete", "revealOrder", "size", "length", "ContextProvider", "getChildContext", "context", "Portal", "_this", "container", "_container", "_temp", "nodeType", "parentNode", "childNodes", "appendChild", "insertBefore", "before", "removeChild", "splice", "indexOf", "createPortal", "el", "containerInfo", "delegated", "get", "unsuspend", "wrappedUnsuspend", "Map", "toChildArray", "reverse", "i", "set", "componentDidUpdate", "componentDidMount", "forEach", "REACT_ELEMENT_TYPE", "Symbol", "for", "CAMEL_PROPS", "ON_ANI", "CAMEL_REPLACE", "IS_DOM", "onChangeInputType", "test", "Component", "prototype", "isReactComponent", "forEach", "key", "Object", "defineProperty", "configurable", "get", "this", "set", "v", "writable", "value", "oldEventHook", "options", "event", "empty", "isPropagationStopped", "cancelBubble", "isDefaultPrevented", "defaultPrevented", "e", "persist", "nativeEvent", "currentComponent", "classNameDescriptorNonEnumberable", "enumerable", "class", "oldVNodeHook", "vnode", "type", "props", "normalizedProps", "i", "IS_DOM", "lowerCased", "toLowerCase", "onChangeInputType", "ON_ANI", "test", "indexOf", "CAMEL_PROPS", "replace", "CAMEL_REPLACE", "multiple", "Array", "isArray", "toChildArray", "children", "child", "selected", "defaultValue", "className", "$$typeof", "REACT_ELEMENT_TYPE", "oldBeforeRender", "__r", "__c", "oldDiffed", "diffed", "dom", "__e", "Modal", "props", "modalRootRef", "_", "p", "j", "y", "clsx_m_default", "getStringValueFromRawConfigSetting", "value", "computeRuntimeDiffs", "lhr", "baseLhr", "diffs", "benchmarkIndex", "baseBenchmarkIndex", "benchmarkMultiplicativeDelta", "settings", "baseSettings", "throttling", "baseThrottling", "potentialDiffs", "label", "rawBase", "rawCompare", "base", "compare", "LhrRuntimeDiff", "props", "y", "clsx_m_default", "diff", "useAuditPermalinkScrollOnLoad", "setAuditId", "wait", "ms", "r", "waitUntilSelector", "selector", "__async", "attempts", "p", "computeAuditGroups", "lhr", "baseLhr", "options", "auditGroups", "categoryId", "category", "categoryAsGroup", "auditRefsGroupedByGroup", "_", "ref", "unchangedAuditsGroupId", "unchangedAuditsGroup", "auditRefGroup", "groupId", "groupWithoutId", "group", "__spreadProps", "__spreadValues", "pairs", "audit", "baseAudit", "diffs", "maxSeverity", "a", "b", "pairsWithDiffs", "pair", "pairsWithoutDiffs", "LhrComparisonScoresAndUrl", "props", "y", "Dropdown", "value", "g", "LhrComparisonScores", "AuditGroups", "auditGroup", "AuditGroup", "LhrComparison", "defaultAck", "percentAbsoluteDeltaThreshold", "setDiffThreshold", "h", "selectedAuditId", "runtimeDiffAck", "setRuntimeDiffAck", "runtimeDiffs", "computeRuntimeDiffs", "runtimeDiffsHaveError", "diff", "Modal", "LhrRuntimeDiff", "AuditDetailPane", "clsx_m_default", "Paper", "LhrComparisonLegend", "LhrViewerLink", "ComparisonRoute", "props", "displayType", "computeBestDisplayType", "y", "LH_LOGO_PATH", "ReportUploadBox", "LhrComparison", "Toast", "props", "setToasts", "message", "level", "p", "interval", "toasts", "t", "y", "SEARCH_PARAMS", "INITIAL_BASE_URL", "INITIAL_COMPARE_URL", "loadReportFromURL", "url", "setReport", "__async", "filename", "data", "lhr", "parseStringAsLhr", "loadInitialReports", "setBaseReport", "setCompareReport", "setIsLoading", "addToast", "lastBaseReport", "lastCompareReport", "promises", "p", "err", "App", "isLoading", "h", "baseReport", "compareReport", "toasts", "setToasts", "T", "toast", "y", "LoadingSpinner", "g", "Toast", "ComparisonRoute", "LandingRoute", "preactRoot", "q", "y", "App"]
}
